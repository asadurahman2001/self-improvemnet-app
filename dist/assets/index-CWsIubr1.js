(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var rt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function r0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function s0(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var a=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,a.get?a:{enumerable:!0,get:function(){return e[s]}})}),r}var lc={exports:{}},wa={},oc={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tn=Symbol.for("react.element"),n0=Symbol.for("react.portal"),a0=Symbol.for("react.fragment"),i0=Symbol.for("react.strict_mode"),l0=Symbol.for("react.profiler"),o0=Symbol.for("react.provider"),d0=Symbol.for("react.context"),c0=Symbol.for("react.forward_ref"),u0=Symbol.for("react.suspense"),h0=Symbol.for("react.memo"),f0=Symbol.for("react.lazy"),Po=Symbol.iterator;function g0(e){return e===null||typeof e!="object"?null:(e=Po&&e[Po]||e["@@iterator"],typeof e=="function"?e:null)}var dc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cc=Object.assign,uc={};function rs(e,t,r){this.props=e,this.context=t,this.refs=uc,this.updater=r||dc}rs.prototype.isReactComponent={};rs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};rs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function hc(){}hc.prototype=rs.prototype;function Cl(e,t,r){this.props=e,this.context=t,this.refs=uc,this.updater=r||dc}var El=Cl.prototype=new hc;El.constructor=Cl;cc(El,rs.prototype);El.isPureReactComponent=!0;var Do=Array.isArray,fc=Object.prototype.hasOwnProperty,Tl={current:null},gc={key:!0,ref:!0,__self:!0,__source:!0};function mc(e,t,r){var s,a={},i=null,l=null;if(t!=null)for(s in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)fc.call(t,s)&&!gc.hasOwnProperty(s)&&(a[s]=t[s]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var d=Array(o),c=0;c<o;c++)d[c]=arguments[c+2];a.children=d}if(e&&e.defaultProps)for(s in o=e.defaultProps,o)a[s]===void 0&&(a[s]=o[s]);return{$$typeof:tn,type:e,key:i,ref:l,props:a,_owner:Tl.current}}function m0(e,t){return{$$typeof:tn,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Pl(e){return typeof e=="object"&&e!==null&&e.$$typeof===tn}function x0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Oo=/\/+/g;function Wa(e,t){return typeof e=="object"&&e!==null&&e.key!=null?x0(""+e.key):t.toString(36)}function $n(e,t,r,s,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case tn:case n0:l=!0}}if(l)return l=e,a=a(l),e=s===""?"."+Wa(l,0):s,Do(a)?(r="",e!=null&&(r=e.replace(Oo,"$&/")+"/"),$n(a,t,r,"",function(c){return c})):a!=null&&(Pl(a)&&(a=m0(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(Oo,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=s===""?".":s+":",Do(e))for(var o=0;o<e.length;o++){i=e[o];var d=s+Wa(i,o);l+=$n(i,t,r,d,a)}else if(d=g0(e),typeof d=="function")for(e=d.call(e),o=0;!(i=e.next()).done;)i=i.value,d=s+Wa(i,o++),l+=$n(i,t,r,d,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function fn(e,t,r){if(e==null)return e;var s=[],a=0;return $n(e,s,"","",function(i){return t.call(r,i,a++)}),s}function y0(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Le={current:null},Mn={transition:null},p0={ReactCurrentDispatcher:Le,ReactCurrentBatchConfig:Mn,ReactCurrentOwner:Tl};function xc(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:fn,forEach:function(e,t,r){fn(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return fn(e,function(){t++}),t},toArray:function(e){return fn(e,function(t){return t})||[]},only:function(e){if(!Pl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};te.Component=rs;te.Fragment=a0;te.Profiler=l0;te.PureComponent=Cl;te.StrictMode=i0;te.Suspense=u0;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=p0;te.act=xc;te.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=cc({},e.props),a=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=Tl.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(d in t)fc.call(t,d)&&!gc.hasOwnProperty(d)&&(s[d]=t[d]===void 0&&o!==void 0?o[d]:t[d])}var d=arguments.length-2;if(d===1)s.children=r;else if(1<d){o=Array(d);for(var c=0;c<d;c++)o[c]=arguments[c+2];s.children=o}return{$$typeof:tn,type:e.type,key:a,ref:i,props:s,_owner:l}};te.createContext=function(e){return e={$$typeof:d0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:o0,_context:e},e.Consumer=e};te.createElement=mc;te.createFactory=function(e){var t=mc.bind(null,e);return t.type=e,t};te.createRef=function(){return{current:null}};te.forwardRef=function(e){return{$$typeof:c0,render:e}};te.isValidElement=Pl;te.lazy=function(e){return{$$typeof:f0,_payload:{_status:-1,_result:e},_init:y0}};te.memo=function(e,t){return{$$typeof:h0,type:e,compare:t===void 0?null:t}};te.startTransition=function(e){var t=Mn.transition;Mn.transition={};try{e()}finally{Mn.transition=t}};te.unstable_act=xc;te.useCallback=function(e,t){return Le.current.useCallback(e,t)};te.useContext=function(e){return Le.current.useContext(e)};te.useDebugValue=function(){};te.useDeferredValue=function(e){return Le.current.useDeferredValue(e)};te.useEffect=function(e,t){return Le.current.useEffect(e,t)};te.useId=function(){return Le.current.useId()};te.useImperativeHandle=function(e,t,r){return Le.current.useImperativeHandle(e,t,r)};te.useInsertionEffect=function(e,t){return Le.current.useInsertionEffect(e,t)};te.useLayoutEffect=function(e,t){return Le.current.useLayoutEffect(e,t)};te.useMemo=function(e,t){return Le.current.useMemo(e,t)};te.useReducer=function(e,t,r){return Le.current.useReducer(e,t,r)};te.useRef=function(e){return Le.current.useRef(e)};te.useState=function(e){return Le.current.useState(e)};te.useSyncExternalStore=function(e,t,r){return Le.current.useSyncExternalStore(e,t,r)};te.useTransition=function(){return Le.current.useTransition()};te.version="18.3.1";oc.exports=te;var T=oc.exports;const yc=r0(T);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v0=T,w0=Symbol.for("react.element"),b0=Symbol.for("react.fragment"),k0=Object.prototype.hasOwnProperty,j0=v0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,N0={key:!0,ref:!0,__self:!0,__source:!0};function pc(e,t,r){var s,a={},i=null,l=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(s in t)k0.call(t,s)&&!N0.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:w0,type:e,key:i,ref:l,props:a,_owner:j0.current}}wa.Fragment=b0;wa.jsx=pc;wa.jsxs=pc;lc.exports=wa;var n=lc.exports,vc={exports:{}},Qe={},wc={exports:{}},bc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,H){var B=A.length;A.push(H);e:for(;0<B;){var K=B-1>>>1,Y=A[K];if(0<a(Y,H))A[K]=H,A[B]=Y,B=K;else break e}}function r(A){return A.length===0?null:A[0]}function s(A){if(A.length===0)return null;var H=A[0],B=A.pop();if(B!==H){A[0]=B;e:for(var K=0,Y=A.length,ve=Y>>>1;K<ve;){var p=2*(K+1)-1,N=A[p],I=p+1,z=A[I];if(0>a(N,B))I<Y&&0>a(z,N)?(A[K]=z,A[I]=B,K=I):(A[K]=N,A[p]=B,K=p);else if(I<Y&&0>a(z,B))A[K]=z,A[I]=B,K=I;else break e}}return H}function a(A,H){var B=A.sortIndex-H.sortIndex;return B!==0?B:A.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var d=[],c=[],u=1,m=null,x=3,v=!1,k=!1,y=!1,E=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function h(A){for(var H=r(c);H!==null;){if(H.callback===null)s(c);else if(H.startTime<=A)s(c),H.sortIndex=H.expirationTime,t(d,H);else break;H=r(c)}}function w(A){if(y=!1,h(A),!k)if(r(d)!==null)k=!0,_(b);else{var H=r(c);H!==null&&M(w,H.startTime-A)}}function b(A,H){k=!1,y&&(y=!1,g(L),L=-1),v=!0;var B=x;try{for(h(H),m=r(d);m!==null&&(!(m.expirationTime>H)||A&&!O());){var K=m.callback;if(typeof K=="function"){m.callback=null,x=m.priorityLevel;var Y=K(m.expirationTime<=H);H=e.unstable_now(),typeof Y=="function"?m.callback=Y:m===r(d)&&s(d),h(H)}else s(d);m=r(d)}if(m!==null)var ve=!0;else{var p=r(c);p!==null&&M(w,p.startTime-H),ve=!1}return ve}finally{m=null,x=B,v=!1}}var S=!1,P=null,L=-1,C=5,D=-1;function O(){return!(e.unstable_now()-D<C)}function F(){if(P!==null){var A=e.unstable_now();D=A;var H=!0;try{H=P(!0,A)}finally{H?j():(S=!1,P=null)}}else S=!1}var j;if(typeof f=="function")j=function(){f(F)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,G=U.port2;U.port1.onmessage=F,j=function(){G.postMessage(null)}}else j=function(){E(F,0)};function _(A){P=A,S||(S=!0,j())}function M(A,H){L=E(function(){A(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){k||v||(k=!0,_(b))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(A){switch(x){case 1:case 2:case 3:var H=3;break;default:H=x}var B=x;x=H;try{return A()}finally{x=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,H){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var B=x;x=A;try{return H()}finally{x=B}},e.unstable_scheduleCallback=function(A,H,B){var K=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?K+B:K):B=K,A){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=B+Y,A={id:u++,callback:H,priorityLevel:A,startTime:B,expirationTime:Y,sortIndex:-1},B>K?(A.sortIndex=B,t(c,A),r(d)===null&&A===r(c)&&(y?(g(L),L=-1):y=!0,M(w,B-K))):(A.sortIndex=Y,t(d,A),k||v||(k=!0,_(b))),A},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(A){var H=x;return function(){var B=x;x=H;try{return A.apply(this,arguments)}finally{x=B}}}})(bc);wc.exports=bc;var _0=wc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S0=T,Ge=_0;function $(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kc=new Set,$s={};function wr(e,t){Gr(e,t),Gr(e+"Capture",t)}function Gr(e,t){for($s[e]=t,e=0;e<t.length;e++)kc.add(t[e])}var Tt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ni=Object.prototype.hasOwnProperty,C0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ao={},Ro={};function E0(e){return Ni.call(Ro,e)?!0:Ni.call(Ao,e)?!1:C0.test(e)?Ro[e]=!0:(Ao[e]=!0,!1)}function T0(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function P0(e,t,r,s){if(t===null||typeof t>"u"||T0(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function $e(e,t,r,s,a,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var Se={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Se[e]=new $e(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Se[t]=new $e(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Se[e]=new $e(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Se[e]=new $e(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Se[e]=new $e(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Se[e]=new $e(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Se[e]=new $e(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Se[e]=new $e(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Se[e]=new $e(e,5,!1,e.toLowerCase(),null,!1,!1)});var Dl=/[\-:]([a-z])/g;function Ol(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Dl,Ol);Se[t]=new $e(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Dl,Ol);Se[t]=new $e(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Dl,Ol);Se[t]=new $e(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Se[e]=new $e(e,1,!1,e.toLowerCase(),null,!1,!1)});Se.xlinkHref=new $e("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Se[e]=new $e(e,1,!1,e.toLowerCase(),null,!0,!0)});function Al(e,t,r,s){var a=Se.hasOwnProperty(t)?Se[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(P0(t,r,a,s)&&(r=null),s||a===null?E0(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,s=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var Rt=S0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gn=Symbol.for("react.element"),Tr=Symbol.for("react.portal"),Pr=Symbol.for("react.fragment"),Rl=Symbol.for("react.strict_mode"),_i=Symbol.for("react.profiler"),jc=Symbol.for("react.provider"),Nc=Symbol.for("react.context"),Ll=Symbol.for("react.forward_ref"),Si=Symbol.for("react.suspense"),Ci=Symbol.for("react.suspense_list"),$l=Symbol.for("react.memo"),Mt=Symbol.for("react.lazy"),_c=Symbol.for("react.offscreen"),Lo=Symbol.iterator;function ls(e){return e===null||typeof e!="object"?null:(e=Lo&&e[Lo]||e["@@iterator"],typeof e=="function"?e:null)}var he=Object.assign,Va;function ys(e){if(Va===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Va=t&&t[1]||""}return`
`+Va+e}var Ga=!1;function Qa(e,t){if(!e||Ga)return"";Ga=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var s=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){s=c}e.call(t.prototype)}else{try{throw Error()}catch(c){s=c}e()}}catch(c){if(c&&s&&typeof c.stack=="string"){for(var a=c.stack.split(`
`),i=s.stack.split(`
`),l=a.length-1,o=i.length-1;1<=l&&0<=o&&a[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(a[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||a[l]!==i[o]){var d=`
`+a[l].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=l&&0<=o);break}}}finally{Ga=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?ys(e):""}function D0(e){switch(e.tag){case 5:return ys(e.type);case 16:return ys("Lazy");case 13:return ys("Suspense");case 19:return ys("SuspenseList");case 0:case 2:case 15:return e=Qa(e.type,!1),e;case 11:return e=Qa(e.type.render,!1),e;case 1:return e=Qa(e.type,!0),e;default:return""}}function Ei(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Pr:return"Fragment";case Tr:return"Portal";case _i:return"Profiler";case Rl:return"StrictMode";case Si:return"Suspense";case Ci:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Nc:return(e.displayName||"Context")+".Consumer";case jc:return(e._context.displayName||"Context")+".Provider";case Ll:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case $l:return t=e.displayName||null,t!==null?t:Ei(e.type)||"Memo";case Mt:t=e._payload,e=e._init;try{return Ei(e(t))}catch{}}return null}function O0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ei(t);case 8:return t===Rl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Zt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Sc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function A0(e){var t=Sc(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(l){s=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(l){s=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function mn(e){e._valueTracker||(e._valueTracker=A0(e))}function Cc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=Sc(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function Qn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ti(e,t){var r=t.checked;return he({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function $o(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=Zt(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ec(e,t){t=t.checked,t!=null&&Al(e,"checked",t,!1)}function Pi(e,t){Ec(e,t);var r=Zt(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Di(e,t.type,r):t.hasOwnProperty("defaultValue")&&Di(e,t.type,Zt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Mo(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Di(e,t,r){(t!=="number"||Qn(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ps=Array.isArray;function qr(e,t,r,s){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&s&&(e[r].defaultSelected=!0)}else{for(r=""+Zt(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Oi(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error($(91));return he({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Io(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error($(92));if(ps(r)){if(1<r.length)throw Error($(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Zt(r)}}function Tc(e,t){var r=Zt(t.value),s=Zt(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function Uo(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Pc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ai(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Pc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var xn,Dc=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(xn=xn||document.createElement("div"),xn.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=xn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ms(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ks={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},R0=["Webkit","ms","Moz","O"];Object.keys(ks).forEach(function(e){R0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ks[t]=ks[e]})});function Oc(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ks.hasOwnProperty(e)&&ks[e]?(""+t).trim():t+"px"}function Ac(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,a=Oc(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,a):e[r]=a}}var L0=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ri(e,t){if(t){if(L0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error($(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error($(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error($(61))}if(t.style!=null&&typeof t.style!="object")throw Error($(62))}}function Li(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $i=null;function Ml(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Mi=null,Fr=null,Hr=null;function zo(e){if(e=nn(e)){if(typeof Mi!="function")throw Error($(280));var t=e.stateNode;t&&(t=_a(t),Mi(e.stateNode,e.type,t))}}function Rc(e){Fr?Hr?Hr.push(e):Hr=[e]:Fr=e}function Lc(){if(Fr){var e=Fr,t=Hr;if(Hr=Fr=null,zo(e),t)for(e=0;e<t.length;e++)zo(t[e])}}function $c(e,t){return e(t)}function Mc(){}var Ka=!1;function Ic(e,t,r){if(Ka)return e(t,r);Ka=!0;try{return $c(e,t,r)}finally{Ka=!1,(Fr!==null||Hr!==null)&&(Mc(),Lc())}}function Is(e,t){var r=e.stateNode;if(r===null)return null;var s=_a(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error($(231,t,typeof r));return r}var Ii=!1;if(Tt)try{var os={};Object.defineProperty(os,"passive",{get:function(){Ii=!0}}),window.addEventListener("test",os,os),window.removeEventListener("test",os,os)}catch{Ii=!1}function $0(e,t,r,s,a,i,l,o,d){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(u){this.onError(u)}}var js=!1,Kn=null,Jn=!1,Ui=null,M0={onError:function(e){js=!0,Kn=e}};function I0(e,t,r,s,a,i,l,o,d){js=!1,Kn=null,$0.apply(M0,arguments)}function U0(e,t,r,s,a,i,l,o,d){if(I0.apply(this,arguments),js){if(js){var c=Kn;js=!1,Kn=null}else throw Error($(198));Jn||(Jn=!0,Ui=c)}}function br(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Uc(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function qo(e){if(br(e)!==e)throw Error($(188))}function z0(e){var t=e.alternate;if(!t){if(t=br(e),t===null)throw Error($(188));return t!==e?null:e}for(var r=e,s=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return qo(a),e;if(i===s)return qo(a),t;i=i.sibling}throw Error($(188))}if(r.return!==s.return)r=a,s=i;else{for(var l=!1,o=a.child;o;){if(o===r){l=!0,r=a,s=i;break}if(o===s){l=!0,s=a,r=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===r){l=!0,r=i,s=a;break}if(o===s){l=!0,s=i,r=a;break}o=o.sibling}if(!l)throw Error($(189))}}if(r.alternate!==s)throw Error($(190))}if(r.tag!==3)throw Error($(188));return r.stateNode.current===r?e:t}function zc(e){return e=z0(e),e!==null?qc(e):null}function qc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=qc(e);if(t!==null)return t;e=e.sibling}return null}var Fc=Ge.unstable_scheduleCallback,Fo=Ge.unstable_cancelCallback,q0=Ge.unstable_shouldYield,F0=Ge.unstable_requestPaint,me=Ge.unstable_now,H0=Ge.unstable_getCurrentPriorityLevel,Il=Ge.unstable_ImmediatePriority,Hc=Ge.unstable_UserBlockingPriority,Yn=Ge.unstable_NormalPriority,B0=Ge.unstable_LowPriority,Bc=Ge.unstable_IdlePriority,ba=null,vt=null;function W0(e){if(vt&&typeof vt.onCommitFiberRoot=="function")try{vt.onCommitFiberRoot(ba,e,void 0,(e.current.flags&128)===128)}catch{}}var ht=Math.clz32?Math.clz32:Q0,V0=Math.log,G0=Math.LN2;function Q0(e){return e>>>=0,e===0?32:31-(V0(e)/G0|0)|0}var yn=64,pn=4194304;function vs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Xn(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,a=e.suspendedLanes,i=e.pingedLanes,l=r&268435455;if(l!==0){var o=l&~a;o!==0?s=vs(o):(i&=l,i!==0&&(s=vs(i)))}else l=r&~a,l!==0?s=vs(l):i!==0&&(s=vs(i));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-ht(t),a=1<<r,s|=e[r],t&=~a;return s}function K0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function J0(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-ht(i),o=1<<l,d=a[l];d===-1?(!(o&r)||o&s)&&(a[l]=K0(o,t)):d<=t&&(e.expiredLanes|=o),i&=~o}}function zi(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Wc(){var e=yn;return yn<<=1,!(yn&4194240)&&(yn=64),e}function Ja(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function rn(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ht(t),e[t]=r}function Y0(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-ht(r),i=1<<a;t[a]=0,s[a]=-1,e[a]=-1,r&=~i}}function Ul(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-ht(r),a=1<<s;a&t|e[s]&t&&(e[s]|=t),r&=~a}}var se=0;function Vc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Gc,zl,Qc,Kc,Jc,qi=!1,vn=[],Wt=null,Vt=null,Gt=null,Us=new Map,zs=new Map,zt=[],X0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ho(e,t){switch(e){case"focusin":case"focusout":Wt=null;break;case"dragenter":case"dragleave":Vt=null;break;case"mouseover":case"mouseout":Gt=null;break;case"pointerover":case"pointerout":Us.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zs.delete(t.pointerId)}}function ds(e,t,r,s,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:i,targetContainers:[a]},t!==null&&(t=nn(t),t!==null&&zl(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Z0(e,t,r,s,a){switch(t){case"focusin":return Wt=ds(Wt,e,t,r,s,a),!0;case"dragenter":return Vt=ds(Vt,e,t,r,s,a),!0;case"mouseover":return Gt=ds(Gt,e,t,r,s,a),!0;case"pointerover":var i=a.pointerId;return Us.set(i,ds(Us.get(i)||null,e,t,r,s,a)),!0;case"gotpointercapture":return i=a.pointerId,zs.set(i,ds(zs.get(i)||null,e,t,r,s,a)),!0}return!1}function Yc(e){var t=cr(e.target);if(t!==null){var r=br(t);if(r!==null){if(t=r.tag,t===13){if(t=Uc(r),t!==null){e.blockedOn=t,Jc(e.priority,function(){Qc(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function In(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Fi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);$i=s,r.target.dispatchEvent(s),$i=null}else return t=nn(r),t!==null&&zl(t),e.blockedOn=r,!1;t.shift()}return!0}function Bo(e,t,r){In(e)&&r.delete(t)}function ef(){qi=!1,Wt!==null&&In(Wt)&&(Wt=null),Vt!==null&&In(Vt)&&(Vt=null),Gt!==null&&In(Gt)&&(Gt=null),Us.forEach(Bo),zs.forEach(Bo)}function cs(e,t){e.blockedOn===t&&(e.blockedOn=null,qi||(qi=!0,Ge.unstable_scheduleCallback(Ge.unstable_NormalPriority,ef)))}function qs(e){function t(a){return cs(a,e)}if(0<vn.length){cs(vn[0],e);for(var r=1;r<vn.length;r++){var s=vn[r];s.blockedOn===e&&(s.blockedOn=null)}}for(Wt!==null&&cs(Wt,e),Vt!==null&&cs(Vt,e),Gt!==null&&cs(Gt,e),Us.forEach(t),zs.forEach(t),r=0;r<zt.length;r++)s=zt[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<zt.length&&(r=zt[0],r.blockedOn===null);)Yc(r),r.blockedOn===null&&zt.shift()}var Br=Rt.ReactCurrentBatchConfig,Zn=!0;function tf(e,t,r,s){var a=se,i=Br.transition;Br.transition=null;try{se=1,ql(e,t,r,s)}finally{se=a,Br.transition=i}}function rf(e,t,r,s){var a=se,i=Br.transition;Br.transition=null;try{se=4,ql(e,t,r,s)}finally{se=a,Br.transition=i}}function ql(e,t,r,s){if(Zn){var a=Fi(e,t,r,s);if(a===null)ii(e,t,s,ea,r),Ho(e,s);else if(Z0(a,e,t,r,s))s.stopPropagation();else if(Ho(e,s),t&4&&-1<X0.indexOf(e)){for(;a!==null;){var i=nn(a);if(i!==null&&Gc(i),i=Fi(e,t,r,s),i===null&&ii(e,t,s,ea,r),i===a)break;a=i}a!==null&&s.stopPropagation()}else ii(e,t,s,null,r)}}var ea=null;function Fi(e,t,r,s){if(ea=null,e=Ml(s),e=cr(e),e!==null)if(t=br(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Uc(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ea=e,null}function Xc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(H0()){case Il:return 1;case Hc:return 4;case Yn:case B0:return 16;case Bc:return 536870912;default:return 16}default:return 16}}var Ht=null,Fl=null,Un=null;function Zc(){if(Un)return Un;var e,t=Fl,r=t.length,s,a="value"in Ht?Ht.value:Ht.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var l=r-e;for(s=1;s<=l&&t[r-s]===a[i-s];s++);return Un=a.slice(e,1<s?1-s:void 0)}function zn(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function wn(){return!0}function Wo(){return!1}function Ke(e){function t(r,s,a,i,l){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?wn:Wo,this.isPropagationStopped=Wo,this}return he(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=wn)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=wn)},persist:function(){},isPersistent:wn}),t}var ss={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hl=Ke(ss),sn=he({},ss,{view:0,detail:0}),sf=Ke(sn),Ya,Xa,us,ka=he({},sn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==us&&(us&&e.type==="mousemove"?(Ya=e.screenX-us.screenX,Xa=e.screenY-us.screenY):Xa=Ya=0,us=e),Ya)},movementY:function(e){return"movementY"in e?e.movementY:Xa}}),Vo=Ke(ka),nf=he({},ka,{dataTransfer:0}),af=Ke(nf),lf=he({},sn,{relatedTarget:0}),Za=Ke(lf),of=he({},ss,{animationName:0,elapsedTime:0,pseudoElement:0}),df=Ke(of),cf=he({},ss,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),uf=Ke(cf),hf=he({},ss,{data:0}),Go=Ke(hf),ff={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=mf[e])?!!t[e]:!1}function Bl(){return xf}var yf=he({},sn,{key:function(e){if(e.key){var t=ff[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=zn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?gf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bl,charCode:function(e){return e.type==="keypress"?zn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?zn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),pf=Ke(yf),vf=he({},ka,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qo=Ke(vf),wf=he({},sn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bl}),bf=Ke(wf),kf=he({},ss,{propertyName:0,elapsedTime:0,pseudoElement:0}),jf=Ke(kf),Nf=he({},ka,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),_f=Ke(Nf),Sf=[9,13,27,32],Wl=Tt&&"CompositionEvent"in window,Ns=null;Tt&&"documentMode"in document&&(Ns=document.documentMode);var Cf=Tt&&"TextEvent"in window&&!Ns,eu=Tt&&(!Wl||Ns&&8<Ns&&11>=Ns),Ko=" ",Jo=!1;function tu(e,t){switch(e){case"keyup":return Sf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ru(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Dr=!1;function Ef(e,t){switch(e){case"compositionend":return ru(t);case"keypress":return t.which!==32?null:(Jo=!0,Ko);case"textInput":return e=t.data,e===Ko&&Jo?null:e;default:return null}}function Tf(e,t){if(Dr)return e==="compositionend"||!Wl&&tu(e,t)?(e=Zc(),Un=Fl=Ht=null,Dr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return eu&&t.locale!=="ko"?null:t.data;default:return null}}var Pf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Pf[e.type]:t==="textarea"}function su(e,t,r,s){Rc(s),t=ta(t,"onChange"),0<t.length&&(r=new Hl("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var _s=null,Fs=null;function Df(e){gu(e,0)}function ja(e){var t=Rr(e);if(Cc(t))return e}function Of(e,t){if(e==="change")return t}var nu=!1;if(Tt){var ei;if(Tt){var ti="oninput"in document;if(!ti){var Xo=document.createElement("div");Xo.setAttribute("oninput","return;"),ti=typeof Xo.oninput=="function"}ei=ti}else ei=!1;nu=ei&&(!document.documentMode||9<document.documentMode)}function Zo(){_s&&(_s.detachEvent("onpropertychange",au),Fs=_s=null)}function au(e){if(e.propertyName==="value"&&ja(Fs)){var t=[];su(t,Fs,e,Ml(e)),Ic(Df,t)}}function Af(e,t,r){e==="focusin"?(Zo(),_s=t,Fs=r,_s.attachEvent("onpropertychange",au)):e==="focusout"&&Zo()}function Rf(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ja(Fs)}function Lf(e,t){if(e==="click")return ja(t)}function $f(e,t){if(e==="input"||e==="change")return ja(t)}function Mf(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var mt=typeof Object.is=="function"?Object.is:Mf;function Hs(e,t){if(mt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!Ni.call(t,a)||!mt(e[a],t[a]))return!1}return!0}function ed(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function td(e,t){var r=ed(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ed(r)}}function iu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?iu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function lu(){for(var e=window,t=Qn();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Qn(e.document)}return t}function Vl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function If(e){var t=lu(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&iu(r.ownerDocument.documentElement,r)){if(s!==null&&Vl(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(s.start,a);s=s.end===void 0?i:Math.min(s.end,a),!e.extend&&i>s&&(a=s,s=i,i=a),a=td(r,i);var l=td(r,s);a&&l&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Uf=Tt&&"documentMode"in document&&11>=document.documentMode,Or=null,Hi=null,Ss=null,Bi=!1;function rd(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Bi||Or==null||Or!==Qn(s)||(s=Or,"selectionStart"in s&&Vl(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ss&&Hs(Ss,s)||(Ss=s,s=ta(Hi,"onSelect"),0<s.length&&(t=new Hl("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=Or)))}function bn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ar={animationend:bn("Animation","AnimationEnd"),animationiteration:bn("Animation","AnimationIteration"),animationstart:bn("Animation","AnimationStart"),transitionend:bn("Transition","TransitionEnd")},ri={},ou={};Tt&&(ou=document.createElement("div").style,"AnimationEvent"in window||(delete Ar.animationend.animation,delete Ar.animationiteration.animation,delete Ar.animationstart.animation),"TransitionEvent"in window||delete Ar.transitionend.transition);function Na(e){if(ri[e])return ri[e];if(!Ar[e])return e;var t=Ar[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in ou)return ri[e]=t[r];return e}var du=Na("animationend"),cu=Na("animationiteration"),uu=Na("animationstart"),hu=Na("transitionend"),fu=new Map,sd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tr(e,t){fu.set(e,t),wr(t,[e])}for(var si=0;si<sd.length;si++){var ni=sd[si],zf=ni.toLowerCase(),qf=ni[0].toUpperCase()+ni.slice(1);tr(zf,"on"+qf)}tr(du,"onAnimationEnd");tr(cu,"onAnimationIteration");tr(uu,"onAnimationStart");tr("dblclick","onDoubleClick");tr("focusin","onFocus");tr("focusout","onBlur");tr(hu,"onTransitionEnd");Gr("onMouseEnter",["mouseout","mouseover"]);Gr("onMouseLeave",["mouseout","mouseover"]);Gr("onPointerEnter",["pointerout","pointerover"]);Gr("onPointerLeave",["pointerout","pointerover"]);wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wr("onBeforeInput",["compositionend","keypress","textInput","paste"]);wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ws="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ff=new Set("cancel close invalid load scroll toggle".split(" ").concat(ws));function nd(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,U0(s,t,void 0,e),e.currentTarget=null}function gu(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],a=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var l=s.length-1;0<=l;l--){var o=s[l],d=o.instance,c=o.currentTarget;if(o=o.listener,d!==i&&a.isPropagationStopped())break e;nd(a,o,c),i=d}else for(l=0;l<s.length;l++){if(o=s[l],d=o.instance,c=o.currentTarget,o=o.listener,d!==i&&a.isPropagationStopped())break e;nd(a,o,c),i=d}}}if(Jn)throw e=Ui,Jn=!1,Ui=null,e}function le(e,t){var r=t[Ki];r===void 0&&(r=t[Ki]=new Set);var s=e+"__bubble";r.has(s)||(mu(t,e,2,!1),r.add(s))}function ai(e,t,r){var s=0;t&&(s|=4),mu(r,e,s,t)}var kn="_reactListening"+Math.random().toString(36).slice(2);function Bs(e){if(!e[kn]){e[kn]=!0,kc.forEach(function(r){r!=="selectionchange"&&(Ff.has(r)||ai(r,!1,e),ai(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[kn]||(t[kn]=!0,ai("selectionchange",!1,t))}}function mu(e,t,r,s){switch(Xc(t)){case 1:var a=tf;break;case 4:a=rf;break;default:a=ql}r=a.bind(null,t,r,e),a=void 0,!Ii||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function ii(e,t,r,s,a){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var l=s.tag;if(l===3||l===4){var o=s.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(l===4)for(l=s.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===a||d.nodeType===8&&d.parentNode===a))return;l=l.return}for(;o!==null;){if(l=cr(o),l===null)return;if(d=l.tag,d===5||d===6){s=i=l;continue e}o=o.parentNode}}s=s.return}Ic(function(){var c=i,u=Ml(r),m=[];e:{var x=fu.get(e);if(x!==void 0){var v=Hl,k=e;switch(e){case"keypress":if(zn(r)===0)break e;case"keydown":case"keyup":v=pf;break;case"focusin":k="focus",v=Za;break;case"focusout":k="blur",v=Za;break;case"beforeblur":case"afterblur":v=Za;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Vo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=af;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=bf;break;case du:case cu:case uu:v=df;break;case hu:v=jf;break;case"scroll":v=sf;break;case"wheel":v=_f;break;case"copy":case"cut":case"paste":v=uf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Qo}var y=(t&4)!==0,E=!y&&e==="scroll",g=y?x!==null?x+"Capture":null:x;y=[];for(var f=c,h;f!==null;){h=f;var w=h.stateNode;if(h.tag===5&&w!==null&&(h=w,g!==null&&(w=Is(f,g),w!=null&&y.push(Ws(f,w,h)))),E)break;f=f.return}0<y.length&&(x=new v(x,k,null,r,u),m.push({event:x,listeners:y}))}}if(!(t&7)){e:{if(x=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",x&&r!==$i&&(k=r.relatedTarget||r.fromElement)&&(cr(k)||k[Pt]))break e;if((v||x)&&(x=u.window===u?u:(x=u.ownerDocument)?x.defaultView||x.parentWindow:window,v?(k=r.relatedTarget||r.toElement,v=c,k=k?cr(k):null,k!==null&&(E=br(k),k!==E||k.tag!==5&&k.tag!==6)&&(k=null)):(v=null,k=c),v!==k)){if(y=Vo,w="onMouseLeave",g="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(y=Qo,w="onPointerLeave",g="onPointerEnter",f="pointer"),E=v==null?x:Rr(v),h=k==null?x:Rr(k),x=new y(w,f+"leave",v,r,u),x.target=E,x.relatedTarget=h,w=null,cr(u)===c&&(y=new y(g,f+"enter",k,r,u),y.target=h,y.relatedTarget=E,w=y),E=w,v&&k)t:{for(y=v,g=k,f=0,h=y;h;h=jr(h))f++;for(h=0,w=g;w;w=jr(w))h++;for(;0<f-h;)y=jr(y),f--;for(;0<h-f;)g=jr(g),h--;for(;f--;){if(y===g||g!==null&&y===g.alternate)break t;y=jr(y),g=jr(g)}y=null}else y=null;v!==null&&ad(m,x,v,y,!1),k!==null&&E!==null&&ad(m,E,k,y,!0)}}e:{if(x=c?Rr(c):window,v=x.nodeName&&x.nodeName.toLowerCase(),v==="select"||v==="input"&&x.type==="file")var b=Of;else if(Yo(x))if(nu)b=$f;else{b=Rf;var S=Af}else(v=x.nodeName)&&v.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(b=Lf);if(b&&(b=b(e,c))){su(m,b,r,u);break e}S&&S(e,x,c),e==="focusout"&&(S=x._wrapperState)&&S.controlled&&x.type==="number"&&Di(x,"number",x.value)}switch(S=c?Rr(c):window,e){case"focusin":(Yo(S)||S.contentEditable==="true")&&(Or=S,Hi=c,Ss=null);break;case"focusout":Ss=Hi=Or=null;break;case"mousedown":Bi=!0;break;case"contextmenu":case"mouseup":case"dragend":Bi=!1,rd(m,r,u);break;case"selectionchange":if(Uf)break;case"keydown":case"keyup":rd(m,r,u)}var P;if(Wl)e:{switch(e){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Dr?tu(e,r)&&(L="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(L="onCompositionStart");L&&(eu&&r.locale!=="ko"&&(Dr||L!=="onCompositionStart"?L==="onCompositionEnd"&&Dr&&(P=Zc()):(Ht=u,Fl="value"in Ht?Ht.value:Ht.textContent,Dr=!0)),S=ta(c,L),0<S.length&&(L=new Go(L,e,null,r,u),m.push({event:L,listeners:S}),P?L.data=P:(P=ru(r),P!==null&&(L.data=P)))),(P=Cf?Ef(e,r):Tf(e,r))&&(c=ta(c,"onBeforeInput"),0<c.length&&(u=new Go("onBeforeInput","beforeinput",null,r,u),m.push({event:u,listeners:c}),u.data=P))}gu(m,t)})}function Ws(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ta(e,t){for(var r=t+"Capture",s=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Is(e,r),i!=null&&s.unshift(Ws(e,i,a)),i=Is(e,t),i!=null&&s.push(Ws(e,i,a))),e=e.return}return s}function jr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ad(e,t,r,s,a){for(var i=t._reactName,l=[];r!==null&&r!==s;){var o=r,d=o.alternate,c=o.stateNode;if(d!==null&&d===s)break;o.tag===5&&c!==null&&(o=c,a?(d=Is(r,i),d!=null&&l.unshift(Ws(r,d,o))):a||(d=Is(r,i),d!=null&&l.push(Ws(r,d,o)))),r=r.return}l.length!==0&&e.push({event:t,listeners:l})}var Hf=/\r\n?/g,Bf=/\u0000|\uFFFD/g;function id(e){return(typeof e=="string"?e:""+e).replace(Hf,`
`).replace(Bf,"")}function jn(e,t,r){if(t=id(t),id(e)!==t&&r)throw Error($(425))}function ra(){}var Wi=null,Vi=null;function Gi(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Qi=typeof setTimeout=="function"?setTimeout:void 0,Wf=typeof clearTimeout=="function"?clearTimeout:void 0,ld=typeof Promise=="function"?Promise:void 0,Vf=typeof queueMicrotask=="function"?queueMicrotask:typeof ld<"u"?function(e){return ld.resolve(null).then(e).catch(Gf)}:Qi;function Gf(e){setTimeout(function(){throw e})}function li(e,t){var r=t,s=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(s===0){e.removeChild(a),qs(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=a}while(r);qs(t)}function Qt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function od(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var ns=Math.random().toString(36).slice(2),pt="__reactFiber$"+ns,Vs="__reactProps$"+ns,Pt="__reactContainer$"+ns,Ki="__reactEvents$"+ns,Qf="__reactListeners$"+ns,Kf="__reactHandles$"+ns;function cr(e){var t=e[pt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Pt]||r[pt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=od(e);e!==null;){if(r=e[pt])return r;e=od(e)}return t}e=r,r=e.parentNode}return null}function nn(e){return e=e[pt]||e[Pt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Rr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error($(33))}function _a(e){return e[Vs]||null}var Ji=[],Lr=-1;function rr(e){return{current:e}}function oe(e){0>Lr||(e.current=Ji[Lr],Ji[Lr]=null,Lr--)}function ie(e,t){Lr++,Ji[Lr]=e.current,e.current=t}var er={},Oe=rr(er),qe=rr(!1),mr=er;function Qr(e,t){var r=e.type.contextTypes;if(!r)return er;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Fe(e){return e=e.childContextTypes,e!=null}function sa(){oe(qe),oe(Oe)}function dd(e,t,r){if(Oe.current!==er)throw Error($(168));ie(Oe,t),ie(qe,r)}function xu(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error($(108,O0(e)||"Unknown",a));return he({},r,s)}function na(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||er,mr=Oe.current,ie(Oe,e),ie(qe,qe.current),!0}function cd(e,t,r){var s=e.stateNode;if(!s)throw Error($(169));r?(e=xu(e,t,mr),s.__reactInternalMemoizedMergedChildContext=e,oe(qe),oe(Oe),ie(Oe,e)):oe(qe),ie(qe,r)}var Nt=null,Sa=!1,oi=!1;function yu(e){Nt===null?Nt=[e]:Nt.push(e)}function Jf(e){Sa=!0,yu(e)}function sr(){if(!oi&&Nt!==null){oi=!0;var e=0,t=se;try{var r=Nt;for(se=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}Nt=null,Sa=!1}catch(a){throw Nt!==null&&(Nt=Nt.slice(e+1)),Fc(Il,sr),a}finally{se=t,oi=!1}}return null}var $r=[],Mr=0,aa=null,ia=0,Je=[],Ye=0,xr=null,_t=1,St="";function ir(e,t){$r[Mr++]=ia,$r[Mr++]=aa,aa=e,ia=t}function pu(e,t,r){Je[Ye++]=_t,Je[Ye++]=St,Je[Ye++]=xr,xr=e;var s=_t;e=St;var a=32-ht(s)-1;s&=~(1<<a),r+=1;var i=32-ht(t)+a;if(30<i){var l=a-a%5;i=(s&(1<<l)-1).toString(32),s>>=l,a-=l,_t=1<<32-ht(t)+a|r<<a|s,St=i+e}else _t=1<<i|r<<a|s,St=e}function Gl(e){e.return!==null&&(ir(e,1),pu(e,1,0))}function Ql(e){for(;e===aa;)aa=$r[--Mr],$r[Mr]=null,ia=$r[--Mr],$r[Mr]=null;for(;e===xr;)xr=Je[--Ye],Je[Ye]=null,St=Je[--Ye],Je[Ye]=null,_t=Je[--Ye],Je[Ye]=null}var Ve=null,We=null,de=!1,ut=null;function vu(e,t){var r=Ze(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function ud(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ve=e,We=Qt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ve=e,We=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=xr!==null?{id:_t,overflow:St}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ze(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ve=e,We=null,!0):!1;default:return!1}}function Yi(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Xi(e){if(de){var t=We;if(t){var r=t;if(!ud(e,t)){if(Yi(e))throw Error($(418));t=Qt(r.nextSibling);var s=Ve;t&&ud(e,t)?vu(s,r):(e.flags=e.flags&-4097|2,de=!1,Ve=e)}}else{if(Yi(e))throw Error($(418));e.flags=e.flags&-4097|2,de=!1,Ve=e}}}function hd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ve=e}function Nn(e){if(e!==Ve)return!1;if(!de)return hd(e),de=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Gi(e.type,e.memoizedProps)),t&&(t=We)){if(Yi(e))throw wu(),Error($(418));for(;t;)vu(e,t),t=Qt(t.nextSibling)}if(hd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error($(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){We=Qt(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}We=null}}else We=Ve?Qt(e.stateNode.nextSibling):null;return!0}function wu(){for(var e=We;e;)e=Qt(e.nextSibling)}function Kr(){We=Ve=null,de=!1}function Kl(e){ut===null?ut=[e]:ut.push(e)}var Yf=Rt.ReactCurrentBatchConfig;function hs(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error($(309));var s=r.stateNode}if(!s)throw Error($(147,e));var a=s,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var o=a.refs;l===null?delete o[i]:o[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error($(284));if(!r._owner)throw Error($(290,e))}return e}function _n(e,t){throw e=Object.prototype.toString.call(t),Error($(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fd(e){var t=e._init;return t(e._payload)}function bu(e){function t(g,f){if(e){var h=g.deletions;h===null?(g.deletions=[f],g.flags|=16):h.push(f)}}function r(g,f){if(!e)return null;for(;f!==null;)t(g,f),f=f.sibling;return null}function s(g,f){for(g=new Map;f!==null;)f.key!==null?g.set(f.key,f):g.set(f.index,f),f=f.sibling;return g}function a(g,f){return g=Xt(g,f),g.index=0,g.sibling=null,g}function i(g,f,h){return g.index=h,e?(h=g.alternate,h!==null?(h=h.index,h<f?(g.flags|=2,f):h):(g.flags|=2,f)):(g.flags|=1048576,f)}function l(g){return e&&g.alternate===null&&(g.flags|=2),g}function o(g,f,h,w){return f===null||f.tag!==6?(f=mi(h,g.mode,w),f.return=g,f):(f=a(f,h),f.return=g,f)}function d(g,f,h,w){var b=h.type;return b===Pr?u(g,f,h.props.children,w,h.key):f!==null&&(f.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Mt&&fd(b)===f.type)?(w=a(f,h.props),w.ref=hs(g,f,h),w.return=g,w):(w=Gn(h.type,h.key,h.props,null,g.mode,w),w.ref=hs(g,f,h),w.return=g,w)}function c(g,f,h,w){return f===null||f.tag!==4||f.stateNode.containerInfo!==h.containerInfo||f.stateNode.implementation!==h.implementation?(f=xi(h,g.mode,w),f.return=g,f):(f=a(f,h.children||[]),f.return=g,f)}function u(g,f,h,w,b){return f===null||f.tag!==7?(f=gr(h,g.mode,w,b),f.return=g,f):(f=a(f,h),f.return=g,f)}function m(g,f,h){if(typeof f=="string"&&f!==""||typeof f=="number")return f=mi(""+f,g.mode,h),f.return=g,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case gn:return h=Gn(f.type,f.key,f.props,null,g.mode,h),h.ref=hs(g,null,f),h.return=g,h;case Tr:return f=xi(f,g.mode,h),f.return=g,f;case Mt:var w=f._init;return m(g,w(f._payload),h)}if(ps(f)||ls(f))return f=gr(f,g.mode,h,null),f.return=g,f;_n(g,f)}return null}function x(g,f,h,w){var b=f!==null?f.key:null;if(typeof h=="string"&&h!==""||typeof h=="number")return b!==null?null:o(g,f,""+h,w);if(typeof h=="object"&&h!==null){switch(h.$$typeof){case gn:return h.key===b?d(g,f,h,w):null;case Tr:return h.key===b?c(g,f,h,w):null;case Mt:return b=h._init,x(g,f,b(h._payload),w)}if(ps(h)||ls(h))return b!==null?null:u(g,f,h,w,null);_n(g,h)}return null}function v(g,f,h,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(h)||null,o(f,g,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case gn:return g=g.get(w.key===null?h:w.key)||null,d(f,g,w,b);case Tr:return g=g.get(w.key===null?h:w.key)||null,c(f,g,w,b);case Mt:var S=w._init;return v(g,f,h,S(w._payload),b)}if(ps(w)||ls(w))return g=g.get(h)||null,u(f,g,w,b,null);_n(f,w)}return null}function k(g,f,h,w){for(var b=null,S=null,P=f,L=f=0,C=null;P!==null&&L<h.length;L++){P.index>L?(C=P,P=null):C=P.sibling;var D=x(g,P,h[L],w);if(D===null){P===null&&(P=C);break}e&&P&&D.alternate===null&&t(g,P),f=i(D,f,L),S===null?b=D:S.sibling=D,S=D,P=C}if(L===h.length)return r(g,P),de&&ir(g,L),b;if(P===null){for(;L<h.length;L++)P=m(g,h[L],w),P!==null&&(f=i(P,f,L),S===null?b=P:S.sibling=P,S=P);return de&&ir(g,L),b}for(P=s(g,P);L<h.length;L++)C=v(P,g,L,h[L],w),C!==null&&(e&&C.alternate!==null&&P.delete(C.key===null?L:C.key),f=i(C,f,L),S===null?b=C:S.sibling=C,S=C);return e&&P.forEach(function(O){return t(g,O)}),de&&ir(g,L),b}function y(g,f,h,w){var b=ls(h);if(typeof b!="function")throw Error($(150));if(h=b.call(h),h==null)throw Error($(151));for(var S=b=null,P=f,L=f=0,C=null,D=h.next();P!==null&&!D.done;L++,D=h.next()){P.index>L?(C=P,P=null):C=P.sibling;var O=x(g,P,D.value,w);if(O===null){P===null&&(P=C);break}e&&P&&O.alternate===null&&t(g,P),f=i(O,f,L),S===null?b=O:S.sibling=O,S=O,P=C}if(D.done)return r(g,P),de&&ir(g,L),b;if(P===null){for(;!D.done;L++,D=h.next())D=m(g,D.value,w),D!==null&&(f=i(D,f,L),S===null?b=D:S.sibling=D,S=D);return de&&ir(g,L),b}for(P=s(g,P);!D.done;L++,D=h.next())D=v(P,g,L,D.value,w),D!==null&&(e&&D.alternate!==null&&P.delete(D.key===null?L:D.key),f=i(D,f,L),S===null?b=D:S.sibling=D,S=D);return e&&P.forEach(function(F){return t(g,F)}),de&&ir(g,L),b}function E(g,f,h,w){if(typeof h=="object"&&h!==null&&h.type===Pr&&h.key===null&&(h=h.props.children),typeof h=="object"&&h!==null){switch(h.$$typeof){case gn:e:{for(var b=h.key,S=f;S!==null;){if(S.key===b){if(b=h.type,b===Pr){if(S.tag===7){r(g,S.sibling),f=a(S,h.props.children),f.return=g,g=f;break e}}else if(S.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Mt&&fd(b)===S.type){r(g,S.sibling),f=a(S,h.props),f.ref=hs(g,S,h),f.return=g,g=f;break e}r(g,S);break}else t(g,S);S=S.sibling}h.type===Pr?(f=gr(h.props.children,g.mode,w,h.key),f.return=g,g=f):(w=Gn(h.type,h.key,h.props,null,g.mode,w),w.ref=hs(g,f,h),w.return=g,g=w)}return l(g);case Tr:e:{for(S=h.key;f!==null;){if(f.key===S)if(f.tag===4&&f.stateNode.containerInfo===h.containerInfo&&f.stateNode.implementation===h.implementation){r(g,f.sibling),f=a(f,h.children||[]),f.return=g,g=f;break e}else{r(g,f);break}else t(g,f);f=f.sibling}f=xi(h,g.mode,w),f.return=g,g=f}return l(g);case Mt:return S=h._init,E(g,f,S(h._payload),w)}if(ps(h))return k(g,f,h,w);if(ls(h))return y(g,f,h,w);_n(g,h)}return typeof h=="string"&&h!==""||typeof h=="number"?(h=""+h,f!==null&&f.tag===6?(r(g,f.sibling),f=a(f,h),f.return=g,g=f):(r(g,f),f=mi(h,g.mode,w),f.return=g,g=f),l(g)):r(g,f)}return E}var Jr=bu(!0),ku=bu(!1),la=rr(null),oa=null,Ir=null,Jl=null;function Yl(){Jl=Ir=oa=null}function Xl(e){var t=la.current;oe(la),e._currentValue=t}function Zi(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function Wr(e,t){oa=e,Jl=Ir=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ze=!0),e.firstContext=null)}function st(e){var t=e._currentValue;if(Jl!==e)if(e={context:e,memoizedValue:t,next:null},Ir===null){if(oa===null)throw Error($(308));Ir=e,oa.dependencies={lanes:0,firstContext:e}}else Ir=Ir.next=e;return t}var ur=null;function Zl(e){ur===null?ur=[e]:ur.push(e)}function ju(e,t,r,s){var a=t.interleaved;return a===null?(r.next=r,Zl(t)):(r.next=a.next,a.next=r),t.interleaved=r,Dt(e,s)}function Dt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var It=!1;function eo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ct(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Kt(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,re&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,Dt(e,r)}return a=s.interleaved,a===null?(t.next=t,Zl(s)):(t.next=a.next,a.next=t),s.interleaved=t,Dt(e,r)}function qn(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Ul(e,r)}}function gd(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=l:i=i.next=l,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function da(e,t,r,s){var a=e.updateQueue;It=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var d=o,c=d.next;d.next=null,l===null?i=c:l.next=c,l=d;var u=e.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==l&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=d))}if(i!==null){var m=a.baseState;l=0,u=c=d=null,o=i;do{var x=o.lane,v=o.eventTime;if((s&x)===x){u!==null&&(u=u.next={eventTime:v,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var k=e,y=o;switch(x=t,v=r,y.tag){case 1:if(k=y.payload,typeof k=="function"){m=k.call(v,m,x);break e}m=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=y.payload,x=typeof k=="function"?k.call(v,m,x):k,x==null)break e;m=he({},m,x);break e;case 2:It=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,x=a.effects,x===null?a.effects=[o]:x.push(o))}else v={eventTime:v,lane:x,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=v,d=m):u=u.next=v,l|=x;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;x=o,o=x.next,x.next=null,a.lastBaseUpdate=x,a.shared.pending=null}}while(!0);if(u===null&&(d=m),a.baseState=d,a.firstBaseUpdate=c,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do l|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);pr|=l,e.lanes=l,e.memoizedState=m}}function md(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!="function")throw Error($(191,a));a.call(s)}}}var an={},wt=rr(an),Gs=rr(an),Qs=rr(an);function hr(e){if(e===an)throw Error($(174));return e}function to(e,t){switch(ie(Qs,t),ie(Gs,e),ie(wt,an),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ai(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ai(t,e)}oe(wt),ie(wt,t)}function Yr(){oe(wt),oe(Gs),oe(Qs)}function _u(e){hr(Qs.current);var t=hr(wt.current),r=Ai(t,e.type);t!==r&&(ie(Gs,e),ie(wt,r))}function ro(e){Gs.current===e&&(oe(wt),oe(Gs))}var ce=rr(0);function ca(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var di=[];function so(){for(var e=0;e<di.length;e++)di[e]._workInProgressVersionPrimary=null;di.length=0}var Fn=Rt.ReactCurrentDispatcher,ci=Rt.ReactCurrentBatchConfig,yr=0,ue=null,ye=null,be=null,ua=!1,Cs=!1,Ks=0,Xf=0;function Ce(){throw Error($(321))}function no(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!mt(e[r],t[r]))return!1;return!0}function ao(e,t,r,s,a,i){if(yr=i,ue=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Fn.current=e===null||e.memoizedState===null?rg:sg,e=r(s,a),Cs){i=0;do{if(Cs=!1,Ks=0,25<=i)throw Error($(301));i+=1,be=ye=null,t.updateQueue=null,Fn.current=ng,e=r(s,a)}while(Cs)}if(Fn.current=ha,t=ye!==null&&ye.next!==null,yr=0,be=ye=ue=null,ua=!1,t)throw Error($(300));return e}function io(){var e=Ks!==0;return Ks=0,e}function yt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return be===null?ue.memoizedState=be=e:be=be.next=e,be}function nt(){if(ye===null){var e=ue.alternate;e=e!==null?e.memoizedState:null}else e=ye.next;var t=be===null?ue.memoizedState:be.next;if(t!==null)be=t,ye=e;else{if(e===null)throw Error($(310));ye=e,e={memoizedState:ye.memoizedState,baseState:ye.baseState,baseQueue:ye.baseQueue,queue:ye.queue,next:null},be===null?ue.memoizedState=be=e:be=be.next=e}return be}function Js(e,t){return typeof t=="function"?t(e):t}function ui(e){var t=nt(),r=t.queue;if(r===null)throw Error($(311));r.lastRenderedReducer=e;var s=ye,a=s.baseQueue,i=r.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}s.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,s=s.baseState;var o=l=null,d=null,c=i;do{var u=c.lane;if((yr&u)===u)d!==null&&(d=d.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),s=c.hasEagerState?c.eagerState:e(s,c.action);else{var m={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};d===null?(o=d=m,l=s):d=d.next=m,ue.lanes|=u,pr|=u}c=c.next}while(c!==null&&c!==i);d===null?l=s:d.next=o,mt(s,t.memoizedState)||(ze=!0),t.memoizedState=s,t.baseState=l,t.baseQueue=d,r.lastRenderedState=s}if(e=r.interleaved,e!==null){a=e;do i=a.lane,ue.lanes|=i,pr|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function hi(e){var t=nt(),r=t.queue;if(r===null)throw Error($(311));r.lastRenderedReducer=e;var s=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var l=a=a.next;do i=e(i,l.action),l=l.next;while(l!==a);mt(i,t.memoizedState)||(ze=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,s]}function Su(){}function Cu(e,t){var r=ue,s=nt(),a=t(),i=!mt(s.memoizedState,a);if(i&&(s.memoizedState=a,ze=!0),s=s.queue,lo(Pu.bind(null,r,s,e),[e]),s.getSnapshot!==t||i||be!==null&&be.memoizedState.tag&1){if(r.flags|=2048,Ys(9,Tu.bind(null,r,s,a,t),void 0,null),ke===null)throw Error($(349));yr&30||Eu(r,t,a)}return a}function Eu(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ue.updateQueue,t===null?(t={lastEffect:null,stores:null},ue.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Tu(e,t,r,s){t.value=r,t.getSnapshot=s,Du(t)&&Ou(e)}function Pu(e,t,r){return r(function(){Du(t)&&Ou(e)})}function Du(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!mt(e,r)}catch{return!0}}function Ou(e){var t=Dt(e,1);t!==null&&ft(t,e,1,-1)}function xd(e){var t=yt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:e},t.queue=e,e=e.dispatch=tg.bind(null,ue,e),[t.memoizedState,e]}function Ys(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=ue.updateQueue,t===null?(t={lastEffect:null,stores:null},ue.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function Au(){return nt().memoizedState}function Hn(e,t,r,s){var a=yt();ue.flags|=e,a.memoizedState=Ys(1|t,r,void 0,s===void 0?null:s)}function Ca(e,t,r,s){var a=nt();s=s===void 0?null:s;var i=void 0;if(ye!==null){var l=ye.memoizedState;if(i=l.destroy,s!==null&&no(s,l.deps)){a.memoizedState=Ys(t,r,i,s);return}}ue.flags|=e,a.memoizedState=Ys(1|t,r,i,s)}function yd(e,t){return Hn(8390656,8,e,t)}function lo(e,t){return Ca(2048,8,e,t)}function Ru(e,t){return Ca(4,2,e,t)}function Lu(e,t){return Ca(4,4,e,t)}function $u(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Mu(e,t,r){return r=r!=null?r.concat([e]):null,Ca(4,4,$u.bind(null,t,e),r)}function oo(){}function Iu(e,t){var r=nt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&no(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function Uu(e,t){var r=nt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&no(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function zu(e,t,r){return yr&21?(mt(r,t)||(r=Wc(),ue.lanes|=r,pr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ze=!0),e.memoizedState=r)}function Zf(e,t){var r=se;se=r!==0&&4>r?r:4,e(!0);var s=ci.transition;ci.transition={};try{e(!1),t()}finally{se=r,ci.transition=s}}function qu(){return nt().memoizedState}function eg(e,t,r){var s=Yt(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},Fu(e))Hu(t,r);else if(r=ju(e,t,r,s),r!==null){var a=Re();ft(r,e,s,a),Bu(r,t,s)}}function tg(e,t,r){var s=Yt(e),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(Fu(e))Hu(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,o=i(l,r);if(a.hasEagerState=!0,a.eagerState=o,mt(o,l)){var d=t.interleaved;d===null?(a.next=a,Zl(t)):(a.next=d.next,d.next=a),t.interleaved=a;return}}catch{}finally{}r=ju(e,t,a,s),r!==null&&(a=Re(),ft(r,e,s,a),Bu(r,t,s))}}function Fu(e){var t=e.alternate;return e===ue||t!==null&&t===ue}function Hu(e,t){Cs=ua=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Bu(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Ul(e,r)}}var ha={readContext:st,useCallback:Ce,useContext:Ce,useEffect:Ce,useImperativeHandle:Ce,useInsertionEffect:Ce,useLayoutEffect:Ce,useMemo:Ce,useReducer:Ce,useRef:Ce,useState:Ce,useDebugValue:Ce,useDeferredValue:Ce,useTransition:Ce,useMutableSource:Ce,useSyncExternalStore:Ce,useId:Ce,unstable_isNewReconciler:!1},rg={readContext:st,useCallback:function(e,t){return yt().memoizedState=[e,t===void 0?null:t],e},useContext:st,useEffect:yd,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Hn(4194308,4,$u.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Hn(4194308,4,e,t)},useInsertionEffect:function(e,t){return Hn(4,2,e,t)},useMemo:function(e,t){var r=yt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=yt();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=eg.bind(null,ue,e),[s.memoizedState,e]},useRef:function(e){var t=yt();return e={current:e},t.memoizedState=e},useState:xd,useDebugValue:oo,useDeferredValue:function(e){return yt().memoizedState=e},useTransition:function(){var e=xd(!1),t=e[0];return e=Zf.bind(null,e[1]),yt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=ue,a=yt();if(de){if(r===void 0)throw Error($(407));r=r()}else{if(r=t(),ke===null)throw Error($(349));yr&30||Eu(s,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,yd(Pu.bind(null,s,i,e),[e]),s.flags|=2048,Ys(9,Tu.bind(null,s,i,r,t),void 0,null),r},useId:function(){var e=yt(),t=ke.identifierPrefix;if(de){var r=St,s=_t;r=(s&~(1<<32-ht(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=Ks++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Xf++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},sg={readContext:st,useCallback:Iu,useContext:st,useEffect:lo,useImperativeHandle:Mu,useInsertionEffect:Ru,useLayoutEffect:Lu,useMemo:Uu,useReducer:ui,useRef:Au,useState:function(){return ui(Js)},useDebugValue:oo,useDeferredValue:function(e){var t=nt();return zu(t,ye.memoizedState,e)},useTransition:function(){var e=ui(Js)[0],t=nt().memoizedState;return[e,t]},useMutableSource:Su,useSyncExternalStore:Cu,useId:qu,unstable_isNewReconciler:!1},ng={readContext:st,useCallback:Iu,useContext:st,useEffect:lo,useImperativeHandle:Mu,useInsertionEffect:Ru,useLayoutEffect:Lu,useMemo:Uu,useReducer:hi,useRef:Au,useState:function(){return hi(Js)},useDebugValue:oo,useDeferredValue:function(e){var t=nt();return ye===null?t.memoizedState=e:zu(t,ye.memoizedState,e)},useTransition:function(){var e=hi(Js)[0],t=nt().memoizedState;return[e,t]},useMutableSource:Su,useSyncExternalStore:Cu,useId:qu,unstable_isNewReconciler:!1};function ot(e,t){if(e&&e.defaultProps){t=he({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function el(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:he({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ea={isMounted:function(e){return(e=e._reactInternals)?br(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=Re(),a=Yt(e),i=Ct(s,a);i.payload=t,r!=null&&(i.callback=r),t=Kt(e,i,a),t!==null&&(ft(t,e,a,s),qn(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=Re(),a=Yt(e),i=Ct(s,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Kt(e,i,a),t!==null&&(ft(t,e,a,s),qn(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Re(),s=Yt(e),a=Ct(r,s);a.tag=2,t!=null&&(a.callback=t),t=Kt(e,a,s),t!==null&&(ft(t,e,s,r),qn(t,e,s))}};function pd(e,t,r,s,a,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,l):t.prototype&&t.prototype.isPureReactComponent?!Hs(r,s)||!Hs(a,i):!0}function Wu(e,t,r){var s=!1,a=er,i=t.contextType;return typeof i=="object"&&i!==null?i=st(i):(a=Fe(t)?mr:Oe.current,s=t.contextTypes,i=(s=s!=null)?Qr(e,a):er),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ea,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function vd(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&Ea.enqueueReplaceState(t,t.state,null)}function tl(e,t,r,s){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},eo(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=st(i):(i=Fe(t)?mr:Oe.current,a.context=Qr(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(el(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Ea.enqueueReplaceState(a,a.state,null),da(e,r,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Xr(e,t){try{var r="",s=t;do r+=D0(s),s=s.return;while(s);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function fi(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function rl(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var ag=typeof WeakMap=="function"?WeakMap:Map;function Vu(e,t,r){r=Ct(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){ga||(ga=!0,hl=s),rl(e,t)},r}function Gu(e,t,r){r=Ct(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;r.payload=function(){return s(a)},r.callback=function(){rl(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){rl(e,t),typeof s!="function"&&(Jt===null?Jt=new Set([this]):Jt.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function wd(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new ag;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(r)||(a.add(r),e=vg.bind(null,e,t,r),t.then(e,e))}function bd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function kd(e,t,r,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ct(-1,1),t.tag=2,Kt(r,t,1))),r.lanes|=1),e)}var ig=Rt.ReactCurrentOwner,ze=!1;function Ae(e,t,r,s){t.child=e===null?ku(t,null,r,s):Jr(t,e.child,r,s)}function jd(e,t,r,s,a){r=r.render;var i=t.ref;return Wr(t,a),s=ao(e,t,r,s,i,a),r=io(),e!==null&&!ze?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ot(e,t,a)):(de&&r&&Gl(t),t.flags|=1,Ae(e,t,s,a),t.child)}function Nd(e,t,r,s,a){if(e===null){var i=r.type;return typeof i=="function"&&!yo(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,Qu(e,t,i,s,a)):(e=Gn(r.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var l=i.memoizedProps;if(r=r.compare,r=r!==null?r:Hs,r(l,s)&&e.ref===t.ref)return Ot(e,t,a)}return t.flags|=1,e=Xt(i,s),e.ref=t.ref,e.return=t,t.child=e}function Qu(e,t,r,s,a){if(e!==null){var i=e.memoizedProps;if(Hs(i,s)&&e.ref===t.ref)if(ze=!1,t.pendingProps=s=i,(e.lanes&a)!==0)e.flags&131072&&(ze=!0);else return t.lanes=e.lanes,Ot(e,t,a)}return sl(e,t,r,s,a)}function Ku(e,t,r){var s=t.pendingProps,a=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ie(zr,Be),Be|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ie(zr,Be),Be|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:r,ie(zr,Be),Be|=s}else i!==null?(s=i.baseLanes|r,t.memoizedState=null):s=r,ie(zr,Be),Be|=s;return Ae(e,t,a,r),t.child}function Ju(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function sl(e,t,r,s,a){var i=Fe(r)?mr:Oe.current;return i=Qr(t,i),Wr(t,a),r=ao(e,t,r,s,i,a),s=io(),e!==null&&!ze?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ot(e,t,a)):(de&&s&&Gl(t),t.flags|=1,Ae(e,t,r,a),t.child)}function _d(e,t,r,s,a){if(Fe(r)){var i=!0;na(t)}else i=!1;if(Wr(t,a),t.stateNode===null)Bn(e,t),Wu(t,r,s),tl(t,r,s,a),s=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var d=l.context,c=r.contextType;typeof c=="object"&&c!==null?c=st(c):(c=Fe(r)?mr:Oe.current,c=Qr(t,c));var u=r.getDerivedStateFromProps,m=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==s||d!==c)&&vd(t,l,s,c),It=!1;var x=t.memoizedState;l.state=x,da(t,s,l,a),d=t.memoizedState,o!==s||x!==d||qe.current||It?(typeof u=="function"&&(el(t,r,u,s),d=t.memoizedState),(o=It||pd(t,r,o,s,x,d,c))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=d),l.props=s,l.state=d,l.context=c,s=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{l=t.stateNode,Nu(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:ot(t.type,o),l.props=c,m=t.pendingProps,x=l.context,d=r.contextType,typeof d=="object"&&d!==null?d=st(d):(d=Fe(r)?mr:Oe.current,d=Qr(t,d));var v=r.getDerivedStateFromProps;(u=typeof v=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==m||x!==d)&&vd(t,l,s,d),It=!1,x=t.memoizedState,l.state=x,da(t,s,l,a);var k=t.memoizedState;o!==m||x!==k||qe.current||It?(typeof v=="function"&&(el(t,r,v,s),k=t.memoizedState),(c=It||pd(t,r,c,s,x,k,d)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,k,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,k,d)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=k),l.props=s,l.state=k,l.context=d,s=c):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),s=!1)}return nl(e,t,r,s,i,a)}function nl(e,t,r,s,a,i){Ju(e,t);var l=(t.flags&128)!==0;if(!s&&!l)return a&&cd(t,r,!1),Ot(e,t,i);s=t.stateNode,ig.current=t;var o=l&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&l?(t.child=Jr(t,e.child,null,i),t.child=Jr(t,null,o,i)):Ae(e,t,o,i),t.memoizedState=s.state,a&&cd(t,r,!0),t.child}function Yu(e){var t=e.stateNode;t.pendingContext?dd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&dd(e,t.context,!1),to(e,t.containerInfo)}function Sd(e,t,r,s,a){return Kr(),Kl(a),t.flags|=256,Ae(e,t,r,s),t.child}var al={dehydrated:null,treeContext:null,retryLane:0};function il(e){return{baseLanes:e,cachePool:null,transitions:null}}function Xu(e,t,r){var s=t.pendingProps,a=ce.current,i=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),ie(ce,a&1),e===null)return Xi(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=s.children,e=s.fallback,i?(s=t.mode,i=t.child,l={mode:"hidden",children:l},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Da(l,s,0,null),e=gr(e,s,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=il(r),t.memoizedState=al,e):co(t,l));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return lg(e,t,l,s,o,a,r);if(i){i=s.fallback,l=t.mode,a=e.child,o=a.sibling;var d={mode:"hidden",children:s.children};return!(l&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=d,t.deletions=null):(s=Xt(a,d),s.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=Xt(o,i):(i=gr(i,l,r,null),i.flags|=2),i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,l=e.child.memoizedState,l=l===null?il(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~r,t.memoizedState=al,s}return i=e.child,e=i.sibling,s=Xt(i,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function co(e,t){return t=Da({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Sn(e,t,r,s){return s!==null&&Kl(s),Jr(t,e.child,null,r),e=co(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function lg(e,t,r,s,a,i,l){if(r)return t.flags&256?(t.flags&=-257,s=fi(Error($(422))),Sn(e,t,l,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=s.fallback,a=t.mode,s=Da({mode:"visible",children:s.children},a,0,null),i=gr(i,a,l,null),i.flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,t.mode&1&&Jr(t,e.child,null,l),t.child.memoizedState=il(l),t.memoizedState=al,i);if(!(t.mode&1))return Sn(e,t,l,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var o=s.dgst;return s=o,i=Error($(419)),s=fi(i,s,void 0),Sn(e,t,l,s)}if(o=(l&e.childLanes)!==0,ze||o){if(s=ke,s!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Dt(e,a),ft(s,e,a,-1))}return xo(),s=fi(Error($(421))),Sn(e,t,l,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=wg.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,We=Qt(a.nextSibling),Ve=t,de=!0,ut=null,e!==null&&(Je[Ye++]=_t,Je[Ye++]=St,Je[Ye++]=xr,_t=e.id,St=e.overflow,xr=t),t=co(t,s.children),t.flags|=4096,t)}function Cd(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Zi(e.return,t,r)}function gi(e,t,r,s,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=r,i.tailMode=a)}function Zu(e,t,r){var s=t.pendingProps,a=s.revealOrder,i=s.tail;if(Ae(e,t,s.children,r),s=ce.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Cd(e,r,t);else if(e.tag===19)Cd(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(ie(ce,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&ca(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),gi(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&ca(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}gi(t,!0,r,null,i);break;case"together":gi(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bn(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ot(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),pr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error($(153));if(t.child!==null){for(e=t.child,r=Xt(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Xt(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function og(e,t,r){switch(t.tag){case 3:Yu(t),Kr();break;case 5:_u(t);break;case 1:Fe(t.type)&&na(t);break;case 4:to(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;ie(la,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(ie(ce,ce.current&1),t.flags|=128,null):r&t.child.childLanes?Xu(e,t,r):(ie(ce,ce.current&1),e=Ot(e,t,r),e!==null?e.sibling:null);ie(ce,ce.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return Zu(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ie(ce,ce.current),s)break;return null;case 22:case 23:return t.lanes=0,Ku(e,t,r)}return Ot(e,t,r)}var eh,ll,th,rh;eh=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};ll=function(){};th=function(e,t,r,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,hr(wt.current);var i=null;switch(r){case"input":a=Ti(e,a),s=Ti(e,s),i=[];break;case"select":a=he({},a,{value:void 0}),s=he({},s,{value:void 0}),i=[];break;case"textarea":a=Oi(e,a),s=Oi(e,s),i=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=ra)}Ri(r,s);var l;r=null;for(c in a)if(!s.hasOwnProperty(c)&&a.hasOwnProperty(c)&&a[c]!=null)if(c==="style"){var o=a[c];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&($s.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in s){var d=s[c];if(o=a!=null?a[c]:void 0,s.hasOwnProperty(c)&&d!==o&&(d!=null||o!=null))if(c==="style")if(o){for(l in o)!o.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in d)d.hasOwnProperty(l)&&o[l]!==d[l]&&(r||(r={}),r[l]=d[l])}else r||(i||(i=[]),i.push(c,r)),r=d;else c==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,o=o?o.__html:void 0,d!=null&&o!==d&&(i=i||[]).push(c,d)):c==="children"?typeof d!="string"&&typeof d!="number"||(i=i||[]).push(c,""+d):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&($s.hasOwnProperty(c)?(d!=null&&c==="onScroll"&&le("scroll",e),i||o===d||(i=[])):(i=i||[]).push(c,d))}r&&(i=i||[]).push("style",r);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};rh=function(e,t,r,s){r!==s&&(t.flags|=4)};function fs(e,t){if(!de)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Ee(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function dg(e,t,r){var s=t.pendingProps;switch(Ql(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ee(t),null;case 1:return Fe(t.type)&&sa(),Ee(t),null;case 3:return s=t.stateNode,Yr(),oe(qe),oe(Oe),so(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Nn(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ut!==null&&(ml(ut),ut=null))),ll(e,t),Ee(t),null;case 5:ro(t);var a=hr(Qs.current);if(r=t.type,e!==null&&t.stateNode!=null)th(e,t,r,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error($(166));return Ee(t),null}if(e=hr(wt.current),Nn(t)){s=t.stateNode,r=t.type;var i=t.memoizedProps;switch(s[pt]=t,s[Vs]=i,e=(t.mode&1)!==0,r){case"dialog":le("cancel",s),le("close",s);break;case"iframe":case"object":case"embed":le("load",s);break;case"video":case"audio":for(a=0;a<ws.length;a++)le(ws[a],s);break;case"source":le("error",s);break;case"img":case"image":case"link":le("error",s),le("load",s);break;case"details":le("toggle",s);break;case"input":$o(s,i),le("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},le("invalid",s);break;case"textarea":Io(s,i),le("invalid",s)}Ri(r,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?s.textContent!==o&&(i.suppressHydrationWarning!==!0&&jn(s.textContent,o,e),a=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&jn(s.textContent,o,e),a=["children",""+o]):$s.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&le("scroll",s)}switch(r){case"input":mn(s),Mo(s,i,!0);break;case"textarea":mn(s),Uo(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=ra)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Pc(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=l.createElement(r,{is:s.is}):(e=l.createElement(r),r==="select"&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,r),e[pt]=t,e[Vs]=s,eh(e,t,!1,!1),t.stateNode=e;e:{switch(l=Li(r,s),r){case"dialog":le("cancel",e),le("close",e),a=s;break;case"iframe":case"object":case"embed":le("load",e),a=s;break;case"video":case"audio":for(a=0;a<ws.length;a++)le(ws[a],e);a=s;break;case"source":le("error",e),a=s;break;case"img":case"image":case"link":le("error",e),le("load",e),a=s;break;case"details":le("toggle",e),a=s;break;case"input":$o(e,s),a=Ti(e,s),le("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=he({},s,{value:void 0}),le("invalid",e);break;case"textarea":Io(e,s),a=Oi(e,s),le("invalid",e);break;default:a=s}Ri(r,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var d=o[i];i==="style"?Ac(e,d):i==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Dc(e,d)):i==="children"?typeof d=="string"?(r!=="textarea"||d!=="")&&Ms(e,d):typeof d=="number"&&Ms(e,""+d):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&($s.hasOwnProperty(i)?d!=null&&i==="onScroll"&&le("scroll",e):d!=null&&Al(e,i,d,l))}switch(r){case"input":mn(e),Mo(e,s,!1);break;case"textarea":mn(e),Uo(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Zt(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?qr(e,!!s.multiple,i,!1):s.defaultValue!=null&&qr(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=ra)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ee(t),null;case 6:if(e&&t.stateNode!=null)rh(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error($(166));if(r=hr(Qs.current),hr(wt.current),Nn(t)){if(s=t.stateNode,r=t.memoizedProps,s[pt]=t,(i=s.nodeValue!==r)&&(e=Ve,e!==null))switch(e.tag){case 3:jn(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&jn(s.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[pt]=t,t.stateNode=s}return Ee(t),null;case 13:if(oe(ce),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(de&&We!==null&&t.mode&1&&!(t.flags&128))wu(),Kr(),t.flags|=98560,i=!1;else if(i=Nn(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error($(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[pt]=t}else Kr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ee(t),i=!1}else ut!==null&&(ml(ut),ut=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||ce.current&1?pe===0&&(pe=3):xo())),t.updateQueue!==null&&(t.flags|=4),Ee(t),null);case 4:return Yr(),ll(e,t),e===null&&Bs(t.stateNode.containerInfo),Ee(t),null;case 10:return Xl(t.type._context),Ee(t),null;case 17:return Fe(t.type)&&sa(),Ee(t),null;case 19:if(oe(ce),i=t.memoizedState,i===null)return Ee(t),null;if(s=(t.flags&128)!==0,l=i.rendering,l===null)if(s)fs(i,!1);else{if(pe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=ca(e),l!==null){for(t.flags|=128,fs(i,!1),s=l.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)i=r,e=s,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ie(ce,ce.current&1|2),t.child}e=e.sibling}i.tail!==null&&me()>Zr&&(t.flags|=128,s=!0,fs(i,!1),t.lanes=4194304)}else{if(!s)if(e=ca(l),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),fs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!de)return Ee(t),null}else 2*me()-i.renderingStartTime>Zr&&r!==1073741824&&(t.flags|=128,s=!0,fs(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(r=i.last,r!==null?r.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=me(),t.sibling=null,r=ce.current,ie(ce,s?r&1|2:r&1),t):(Ee(t),null);case 22:case 23:return mo(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Be&1073741824&&(Ee(t),t.subtreeFlags&6&&(t.flags|=8192)):Ee(t),null;case 24:return null;case 25:return null}throw Error($(156,t.tag))}function cg(e,t){switch(Ql(t),t.tag){case 1:return Fe(t.type)&&sa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Yr(),oe(qe),oe(Oe),so(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ro(t),null;case 13:if(oe(ce),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error($(340));Kr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return oe(ce),null;case 4:return Yr(),null;case 10:return Xl(t.type._context),null;case 22:case 23:return mo(),null;case 24:return null;default:return null}}var Cn=!1,Pe=!1,ug=typeof WeakSet=="function"?WeakSet:Set,q=null;function Ur(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){ge(e,t,s)}else r.current=null}function ol(e,t,r){try{r()}catch(s){ge(e,t,s)}}var Ed=!1;function hg(e,t){if(Wi=Zn,e=lu(),Vl(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var l=0,o=-1,d=-1,c=0,u=0,m=e,x=null;t:for(;;){for(var v;m!==r||a!==0&&m.nodeType!==3||(o=l+a),m!==i||s!==0&&m.nodeType!==3||(d=l+s),m.nodeType===3&&(l+=m.nodeValue.length),(v=m.firstChild)!==null;)x=m,m=v;for(;;){if(m===e)break t;if(x===r&&++c===a&&(o=l),x===i&&++u===s&&(d=l),(v=m.nextSibling)!==null)break;m=x,x=m.parentNode}m=v}r=o===-1||d===-1?null:{start:o,end:d}}else r=null}r=r||{start:0,end:0}}else r=null;for(Vi={focusedElem:e,selectionRange:r},Zn=!1,q=t;q!==null;)if(t=q,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,q=e;else for(;q!==null;){t=q;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var y=k.memoizedProps,E=k.memoizedState,g=t.stateNode,f=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ot(t.type,y),E);g.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var h=t.stateNode.containerInfo;h.nodeType===1?h.textContent="":h.nodeType===9&&h.documentElement&&h.removeChild(h.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(w){ge(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,q=e;break}q=t.return}return k=Ed,Ed=!1,k}function Es(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&ol(t,r,i)}a=a.next}while(a!==s)}}function Ta(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function dl(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function sh(e){var t=e.alternate;t!==null&&(e.alternate=null,sh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[pt],delete t[Vs],delete t[Ki],delete t[Qf],delete t[Kf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function nh(e){return e.tag===5||e.tag===3||e.tag===4}function Td(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||nh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function cl(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ra));else if(s!==4&&(e=e.child,e!==null))for(cl(e,t,r),e=e.sibling;e!==null;)cl(e,t,r),e=e.sibling}function ul(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(ul(e,t,r),e=e.sibling;e!==null;)ul(e,t,r),e=e.sibling}var je=null,dt=!1;function Lt(e,t,r){for(r=r.child;r!==null;)ah(e,t,r),r=r.sibling}function ah(e,t,r){if(vt&&typeof vt.onCommitFiberUnmount=="function")try{vt.onCommitFiberUnmount(ba,r)}catch{}switch(r.tag){case 5:Pe||Ur(r,t);case 6:var s=je,a=dt;je=null,Lt(e,t,r),je=s,dt=a,je!==null&&(dt?(e=je,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):je.removeChild(r.stateNode));break;case 18:je!==null&&(dt?(e=je,r=r.stateNode,e.nodeType===8?li(e.parentNode,r):e.nodeType===1&&li(e,r),qs(e)):li(je,r.stateNode));break;case 4:s=je,a=dt,je=r.stateNode.containerInfo,dt=!0,Lt(e,t,r),je=s,dt=a;break;case 0:case 11:case 14:case 15:if(!Pe&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&ol(r,t,l),a=a.next}while(a!==s)}Lt(e,t,r);break;case 1:if(!Pe&&(Ur(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(o){ge(r,t,o)}Lt(e,t,r);break;case 21:Lt(e,t,r);break;case 22:r.mode&1?(Pe=(s=Pe)||r.memoizedState!==null,Lt(e,t,r),Pe=s):Lt(e,t,r);break;default:Lt(e,t,r)}}function Pd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new ug),t.forEach(function(s){var a=bg.bind(null,e,s);r.has(s)||(r.add(s),s.then(a,a))})}}function it(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var i=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:je=o.stateNode,dt=!1;break e;case 3:je=o.stateNode.containerInfo,dt=!0;break e;case 4:je=o.stateNode.containerInfo,dt=!0;break e}o=o.return}if(je===null)throw Error($(160));ah(i,l,a),je=null,dt=!1;var d=a.alternate;d!==null&&(d.return=null),a.return=null}catch(c){ge(a,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ih(t,e),t=t.sibling}function ih(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(it(t,e),xt(e),s&4){try{Es(3,e,e.return),Ta(3,e)}catch(y){ge(e,e.return,y)}try{Es(5,e,e.return)}catch(y){ge(e,e.return,y)}}break;case 1:it(t,e),xt(e),s&512&&r!==null&&Ur(r,r.return);break;case 5:if(it(t,e),xt(e),s&512&&r!==null&&Ur(r,r.return),e.flags&32){var a=e.stateNode;try{Ms(a,"")}catch(y){ge(e,e.return,y)}}if(s&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,l=r!==null?r.memoizedProps:i,o=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&Ec(a,i),Li(o,l);var c=Li(o,i);for(l=0;l<d.length;l+=2){var u=d[l],m=d[l+1];u==="style"?Ac(a,m):u==="dangerouslySetInnerHTML"?Dc(a,m):u==="children"?Ms(a,m):Al(a,u,m,c)}switch(o){case"input":Pi(a,i);break;case"textarea":Tc(a,i);break;case"select":var x=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?qr(a,!!i.multiple,v,!1):x!==!!i.multiple&&(i.defaultValue!=null?qr(a,!!i.multiple,i.defaultValue,!0):qr(a,!!i.multiple,i.multiple?[]:"",!1))}a[Vs]=i}catch(y){ge(e,e.return,y)}}break;case 6:if(it(t,e),xt(e),s&4){if(e.stateNode===null)throw Error($(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(y){ge(e,e.return,y)}}break;case 3:if(it(t,e),xt(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{qs(t.containerInfo)}catch(y){ge(e,e.return,y)}break;case 4:it(t,e),xt(e);break;case 13:it(t,e),xt(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(fo=me())),s&4&&Pd(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(Pe=(c=Pe)||u,it(t,e),Pe=c):it(t,e),xt(e),s&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(q=e,u=e.child;u!==null;){for(m=q=u;q!==null;){switch(x=q,v=x.child,x.tag){case 0:case 11:case 14:case 15:Es(4,x,x.return);break;case 1:Ur(x,x.return);var k=x.stateNode;if(typeof k.componentWillUnmount=="function"){s=x,r=x.return;try{t=s,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(y){ge(s,r,y)}}break;case 5:Ur(x,x.return);break;case 22:if(x.memoizedState!==null){Od(m);continue}}v!==null?(v.return=x,q=v):Od(m)}u=u.sibling}e:for(u=null,m=e;;){if(m.tag===5){if(u===null){u=m;try{a=m.stateNode,c?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=m.stateNode,d=m.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,o.style.display=Oc("display",l))}catch(y){ge(e,e.return,y)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(y){ge(e,e.return,y)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:it(t,e),xt(e),s&4&&Pd(e);break;case 21:break;default:it(t,e),xt(e)}}function xt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(nh(r)){var s=r;break e}r=r.return}throw Error($(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(Ms(a,""),s.flags&=-33);var i=Td(e);ul(e,i,a);break;case 3:case 4:var l=s.stateNode.containerInfo,o=Td(e);cl(e,o,l);break;default:throw Error($(161))}}catch(d){ge(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function fg(e,t,r){q=e,lh(e)}function lh(e,t,r){for(var s=(e.mode&1)!==0;q!==null;){var a=q,i=a.child;if(a.tag===22&&s){var l=a.memoizedState!==null||Cn;if(!l){var o=a.alternate,d=o!==null&&o.memoizedState!==null||Pe;o=Cn;var c=Pe;if(Cn=l,(Pe=d)&&!c)for(q=a;q!==null;)l=q,d=l.child,l.tag===22&&l.memoizedState!==null?Ad(a):d!==null?(d.return=l,q=d):Ad(a);for(;i!==null;)q=i,lh(i),i=i.sibling;q=a,Cn=o,Pe=c}Dd(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,q=i):Dd(e)}}function Dd(e){for(;q!==null;){var t=q;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Pe||Ta(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Pe)if(r===null)s.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:ot(t.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&md(t,i,s);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}md(t,l,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&r.focus();break;case"img":d.src&&(r.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&qs(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}Pe||t.flags&512&&dl(t)}catch(x){ge(t,t.return,x)}}if(t===e){q=null;break}if(r=t.sibling,r!==null){r.return=t.return,q=r;break}q=t.return}}function Od(e){for(;q!==null;){var t=q;if(t===e){q=null;break}var r=t.sibling;if(r!==null){r.return=t.return,q=r;break}q=t.return}}function Ad(e){for(;q!==null;){var t=q;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ta(4,t)}catch(d){ge(t,r,d)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(d){ge(t,a,d)}}var i=t.return;try{dl(t)}catch(d){ge(t,i,d)}break;case 5:var l=t.return;try{dl(t)}catch(d){ge(t,l,d)}}}catch(d){ge(t,t.return,d)}if(t===e){q=null;break}var o=t.sibling;if(o!==null){o.return=t.return,q=o;break}q=t.return}}var gg=Math.ceil,fa=Rt.ReactCurrentDispatcher,uo=Rt.ReactCurrentOwner,tt=Rt.ReactCurrentBatchConfig,re=0,ke=null,xe=null,_e=0,Be=0,zr=rr(0),pe=0,Xs=null,pr=0,Pa=0,ho=0,Ts=null,Ie=null,fo=0,Zr=1/0,kt=null,ga=!1,hl=null,Jt=null,En=!1,Bt=null,ma=0,Ps=0,fl=null,Wn=-1,Vn=0;function Re(){return re&6?me():Wn!==-1?Wn:Wn=me()}function Yt(e){return e.mode&1?re&2&&_e!==0?_e&-_e:Yf.transition!==null?(Vn===0&&(Vn=Wc()),Vn):(e=se,e!==0||(e=window.event,e=e===void 0?16:Xc(e.type)),e):1}function ft(e,t,r,s){if(50<Ps)throw Ps=0,fl=null,Error($(185));rn(e,r,s),(!(re&2)||e!==ke)&&(e===ke&&(!(re&2)&&(Pa|=r),pe===4&&qt(e,_e)),He(e,s),r===1&&re===0&&!(t.mode&1)&&(Zr=me()+500,Sa&&sr()))}function He(e,t){var r=e.callbackNode;J0(e,t);var s=Xn(e,e===ke?_e:0);if(s===0)r!==null&&Fo(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&Fo(r),t===1)e.tag===0?Jf(Rd.bind(null,e)):yu(Rd.bind(null,e)),Vf(function(){!(re&6)&&sr()}),r=null;else{switch(Vc(s)){case 1:r=Il;break;case 4:r=Hc;break;case 16:r=Yn;break;case 536870912:r=Bc;break;default:r=Yn}r=mh(r,oh.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function oh(e,t){if(Wn=-1,Vn=0,re&6)throw Error($(327));var r=e.callbackNode;if(Vr()&&e.callbackNode!==r)return null;var s=Xn(e,e===ke?_e:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=xa(e,s);else{t=s;var a=re;re|=2;var i=ch();(ke!==e||_e!==t)&&(kt=null,Zr=me()+500,fr(e,t));do try{yg();break}catch(o){dh(e,o)}while(!0);Yl(),fa.current=i,re=a,xe!==null?t=0:(ke=null,_e=0,t=pe)}if(t!==0){if(t===2&&(a=zi(e),a!==0&&(s=a,t=gl(e,a))),t===1)throw r=Xs,fr(e,0),qt(e,s),He(e,me()),r;if(t===6)qt(e,s);else{if(a=e.current.alternate,!(s&30)&&!mg(a)&&(t=xa(e,s),t===2&&(i=zi(e),i!==0&&(s=i,t=gl(e,i))),t===1))throw r=Xs,fr(e,0),qt(e,s),He(e,me()),r;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error($(345));case 2:lr(e,Ie,kt);break;case 3:if(qt(e,s),(s&130023424)===s&&(t=fo+500-me(),10<t)){if(Xn(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){Re(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Qi(lr.bind(null,e,Ie,kt),t);break}lr(e,Ie,kt);break;case 4:if(qt(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var l=31-ht(s);i=1<<l,l=t[l],l>a&&(a=l),s&=~i}if(s=a,s=me()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*gg(s/1960))-s,10<s){e.timeoutHandle=Qi(lr.bind(null,e,Ie,kt),s);break}lr(e,Ie,kt);break;case 5:lr(e,Ie,kt);break;default:throw Error($(329))}}}return He(e,me()),e.callbackNode===r?oh.bind(null,e):null}function gl(e,t){var r=Ts;return e.current.memoizedState.isDehydrated&&(fr(e,t).flags|=256),e=xa(e,t),e!==2&&(t=Ie,Ie=r,t!==null&&ml(t)),e}function ml(e){Ie===null?Ie=e:Ie.push.apply(Ie,e)}function mg(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],i=a.getSnapshot;a=a.value;try{if(!mt(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function qt(e,t){for(t&=~ho,t&=~Pa,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ht(t),s=1<<r;e[r]=-1,t&=~s}}function Rd(e){if(re&6)throw Error($(327));Vr();var t=Xn(e,0);if(!(t&1))return He(e,me()),null;var r=xa(e,t);if(e.tag!==0&&r===2){var s=zi(e);s!==0&&(t=s,r=gl(e,s))}if(r===1)throw r=Xs,fr(e,0),qt(e,t),He(e,me()),r;if(r===6)throw Error($(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,lr(e,Ie,kt),He(e,me()),null}function go(e,t){var r=re;re|=1;try{return e(t)}finally{re=r,re===0&&(Zr=me()+500,Sa&&sr())}}function vr(e){Bt!==null&&Bt.tag===0&&!(re&6)&&Vr();var t=re;re|=1;var r=tt.transition,s=se;try{if(tt.transition=null,se=1,e)return e()}finally{se=s,tt.transition=r,re=t,!(re&6)&&sr()}}function mo(){Be=zr.current,oe(zr)}function fr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Wf(r)),xe!==null)for(r=xe.return;r!==null;){var s=r;switch(Ql(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&sa();break;case 3:Yr(),oe(qe),oe(Oe),so();break;case 5:ro(s);break;case 4:Yr();break;case 13:oe(ce);break;case 19:oe(ce);break;case 10:Xl(s.type._context);break;case 22:case 23:mo()}r=r.return}if(ke=e,xe=e=Xt(e.current,null),_e=Be=t,pe=0,Xs=null,ho=Pa=pr=0,Ie=Ts=null,ur!==null){for(t=0;t<ur.length;t++)if(r=ur[t],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,i=r.pending;if(i!==null){var l=i.next;i.next=a,s.next=l}r.pending=s}ur=null}return e}function dh(e,t){do{var r=xe;try{if(Yl(),Fn.current=ha,ua){for(var s=ue.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}ua=!1}if(yr=0,be=ye=ue=null,Cs=!1,Ks=0,uo.current=null,r===null||r.return===null){pe=1,Xs=t,xe=null;break}e:{var i=e,l=r.return,o=r,d=t;if(t=_e,o.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var c=d,u=o,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var x=u.alternate;x?(u.updateQueue=x.updateQueue,u.memoizedState=x.memoizedState,u.lanes=x.lanes):(u.updateQueue=null,u.memoizedState=null)}var v=bd(l);if(v!==null){v.flags&=-257,kd(v,l,o,i,t),v.mode&1&&wd(i,c,t),t=v,d=c;var k=t.updateQueue;if(k===null){var y=new Set;y.add(d),t.updateQueue=y}else k.add(d);break e}else{if(!(t&1)){wd(i,c,t),xo();break e}d=Error($(426))}}else if(de&&o.mode&1){var E=bd(l);if(E!==null){!(E.flags&65536)&&(E.flags|=256),kd(E,l,o,i,t),Kl(Xr(d,o));break e}}i=d=Xr(d,o),pe!==4&&(pe=2),Ts===null?Ts=[i]:Ts.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=Vu(i,d,t);gd(i,g);break e;case 1:o=d;var f=i.type,h=i.stateNode;if(!(i.flags&128)&&(typeof f.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Jt===null||!Jt.has(h)))){i.flags|=65536,t&=-t,i.lanes|=t;var w=Gu(i,o,t);gd(i,w);break e}}i=i.return}while(i!==null)}hh(r)}catch(b){t=b,xe===r&&r!==null&&(xe=r=r.return);continue}break}while(!0)}function ch(){var e=fa.current;return fa.current=ha,e===null?ha:e}function xo(){(pe===0||pe===3||pe===2)&&(pe=4),ke===null||!(pr&268435455)&&!(Pa&268435455)||qt(ke,_e)}function xa(e,t){var r=re;re|=2;var s=ch();(ke!==e||_e!==t)&&(kt=null,fr(e,t));do try{xg();break}catch(a){dh(e,a)}while(!0);if(Yl(),re=r,fa.current=s,xe!==null)throw Error($(261));return ke=null,_e=0,pe}function xg(){for(;xe!==null;)uh(xe)}function yg(){for(;xe!==null&&!q0();)uh(xe)}function uh(e){var t=gh(e.alternate,e,Be);e.memoizedProps=e.pendingProps,t===null?hh(e):xe=t,uo.current=null}function hh(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=cg(r,t),r!==null){r.flags&=32767,xe=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{pe=6,xe=null;return}}else if(r=dg(r,t,Be),r!==null){xe=r;return}if(t=t.sibling,t!==null){xe=t;return}xe=t=e}while(t!==null);pe===0&&(pe=5)}function lr(e,t,r){var s=se,a=tt.transition;try{tt.transition=null,se=1,pg(e,t,r,s)}finally{tt.transition=a,se=s}return null}function pg(e,t,r,s){do Vr();while(Bt!==null);if(re&6)throw Error($(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error($(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(Y0(e,i),e===ke&&(xe=ke=null,_e=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||En||(En=!0,mh(Yn,function(){return Vr(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=tt.transition,tt.transition=null;var l=se;se=1;var o=re;re|=4,uo.current=null,hg(e,r),ih(r,e),If(Vi),Zn=!!Wi,Vi=Wi=null,e.current=r,fg(r),F0(),re=o,se=l,tt.transition=i}else e.current=r;if(En&&(En=!1,Bt=e,ma=a),i=e.pendingLanes,i===0&&(Jt=null),W0(r.stateNode),He(e,me()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(ga)throw ga=!1,e=hl,hl=null,e;return ma&1&&e.tag!==0&&Vr(),i=e.pendingLanes,i&1?e===fl?Ps++:(Ps=0,fl=e):Ps=0,sr(),null}function Vr(){if(Bt!==null){var e=Vc(ma),t=tt.transition,r=se;try{if(tt.transition=null,se=16>e?16:e,Bt===null)var s=!1;else{if(e=Bt,Bt=null,ma=0,re&6)throw Error($(331));var a=re;for(re|=4,q=e.current;q!==null;){var i=q,l=i.child;if(q.flags&16){var o=i.deletions;if(o!==null){for(var d=0;d<o.length;d++){var c=o[d];for(q=c;q!==null;){var u=q;switch(u.tag){case 0:case 11:case 15:Es(8,u,i)}var m=u.child;if(m!==null)m.return=u,q=m;else for(;q!==null;){u=q;var x=u.sibling,v=u.return;if(sh(u),u===c){q=null;break}if(x!==null){x.return=v,q=x;break}q=v}}}var k=i.alternate;if(k!==null){var y=k.child;if(y!==null){k.child=null;do{var E=y.sibling;y.sibling=null,y=E}while(y!==null)}}q=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,q=l;else e:for(;q!==null;){if(i=q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Es(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,q=g;break e}q=i.return}}var f=e.current;for(q=f;q!==null;){l=q;var h=l.child;if(l.subtreeFlags&2064&&h!==null)h.return=l,q=h;else e:for(l=f;q!==null;){if(o=q,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Ta(9,o)}}catch(b){ge(o,o.return,b)}if(o===l){q=null;break e}var w=o.sibling;if(w!==null){w.return=o.return,q=w;break e}q=o.return}}if(re=a,sr(),vt&&typeof vt.onPostCommitFiberRoot=="function")try{vt.onPostCommitFiberRoot(ba,e)}catch{}s=!0}return s}finally{se=r,tt.transition=t}}return!1}function Ld(e,t,r){t=Xr(r,t),t=Vu(e,t,1),e=Kt(e,t,1),t=Re(),e!==null&&(rn(e,1,t),He(e,t))}function ge(e,t,r){if(e.tag===3)Ld(e,e,r);else for(;t!==null;){if(t.tag===3){Ld(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Jt===null||!Jt.has(s))){e=Xr(r,e),e=Gu(t,e,1),t=Kt(t,e,1),e=Re(),t!==null&&(rn(t,1,e),He(t,e));break}}t=t.return}}function vg(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=Re(),e.pingedLanes|=e.suspendedLanes&r,ke===e&&(_e&r)===r&&(pe===4||pe===3&&(_e&130023424)===_e&&500>me()-fo?fr(e,0):ho|=r),He(e,t)}function fh(e,t){t===0&&(e.mode&1?(t=pn,pn<<=1,!(pn&130023424)&&(pn=4194304)):t=1);var r=Re();e=Dt(e,t),e!==null&&(rn(e,t,r),He(e,r))}function wg(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),fh(e,r)}function bg(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error($(314))}s!==null&&s.delete(t),fh(e,r)}var gh;gh=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||qe.current)ze=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ze=!1,og(e,t,r);ze=!!(e.flags&131072)}else ze=!1,de&&t.flags&1048576&&pu(t,ia,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Bn(e,t),e=t.pendingProps;var a=Qr(t,Oe.current);Wr(t,r),a=ao(null,t,s,e,a,r);var i=io();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Fe(s)?(i=!0,na(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,eo(t),a.updater=Ea,t.stateNode=a,a._reactInternals=t,tl(t,s,e,r),t=nl(null,t,s,!0,i,r)):(t.tag=0,de&&i&&Gl(t),Ae(null,t,a,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Bn(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=jg(s),e=ot(s,e),a){case 0:t=sl(null,t,s,e,r);break e;case 1:t=_d(null,t,s,e,r);break e;case 11:t=jd(null,t,s,e,r);break e;case 14:t=Nd(null,t,s,ot(s.type,e),r);break e}throw Error($(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:ot(s,a),sl(e,t,s,a,r);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:ot(s,a),_d(e,t,s,a,r);case 3:e:{if(Yu(t),e===null)throw Error($(387));s=t.pendingProps,i=t.memoizedState,a=i.element,Nu(e,t),da(t,s,null,r);var l=t.memoizedState;if(s=l.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Xr(Error($(423)),t),t=Sd(e,t,s,r,a);break e}else if(s!==a){a=Xr(Error($(424)),t),t=Sd(e,t,s,r,a);break e}else for(We=Qt(t.stateNode.containerInfo.firstChild),Ve=t,de=!0,ut=null,r=ku(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Kr(),s===a){t=Ot(e,t,r);break e}Ae(e,t,s,r)}t=t.child}return t;case 5:return _u(t),e===null&&Xi(t),s=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,l=a.children,Gi(s,a)?l=null:i!==null&&Gi(s,i)&&(t.flags|=32),Ju(e,t),Ae(e,t,l,r),t.child;case 6:return e===null&&Xi(t),null;case 13:return Xu(e,t,r);case 4:return to(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Jr(t,null,s,r):Ae(e,t,s,r),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:ot(s,a),jd(e,t,s,a,r);case 7:return Ae(e,t,t.pendingProps,r),t.child;case 8:return Ae(e,t,t.pendingProps.children,r),t.child;case 12:return Ae(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,i=t.memoizedProps,l=a.value,ie(la,s._currentValue),s._currentValue=l,i!==null)if(mt(i.value,l)){if(i.children===a.children&&!qe.current){t=Ot(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var d=o.firstContext;d!==null;){if(d.context===s){if(i.tag===1){d=Ct(-1,r&-r),d.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?d.next=d:(d.next=u.next,u.next=d),c.pending=d}}i.lanes|=r,d=i.alternate,d!==null&&(d.lanes|=r),Zi(i.return,r,t),o.lanes|=r;break}d=d.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error($(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),Zi(l,r,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}Ae(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,Wr(t,r),a=st(a),s=s(a),t.flags|=1,Ae(e,t,s,r),t.child;case 14:return s=t.type,a=ot(s,t.pendingProps),a=ot(s.type,a),Nd(e,t,s,a,r);case 15:return Qu(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:ot(s,a),Bn(e,t),t.tag=1,Fe(s)?(e=!0,na(t)):e=!1,Wr(t,r),Wu(t,s,a),tl(t,s,a,r),nl(null,t,s,!0,e,r);case 19:return Zu(e,t,r);case 22:return Ku(e,t,r)}throw Error($(156,t.tag))};function mh(e,t){return Fc(e,t)}function kg(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ze(e,t,r,s){return new kg(e,t,r,s)}function yo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function jg(e){if(typeof e=="function")return yo(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ll)return 11;if(e===$l)return 14}return 2}function Xt(e,t){var r=e.alternate;return r===null?(r=Ze(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Gn(e,t,r,s,a,i){var l=2;if(s=e,typeof e=="function")yo(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Pr:return gr(r.children,a,i,t);case Rl:l=8,a|=8;break;case _i:return e=Ze(12,r,t,a|2),e.elementType=_i,e.lanes=i,e;case Si:return e=Ze(13,r,t,a),e.elementType=Si,e.lanes=i,e;case Ci:return e=Ze(19,r,t,a),e.elementType=Ci,e.lanes=i,e;case _c:return Da(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case jc:l=10;break e;case Nc:l=9;break e;case Ll:l=11;break e;case $l:l=14;break e;case Mt:l=16,s=null;break e}throw Error($(130,e==null?e:typeof e,""))}return t=Ze(l,r,t,a),t.elementType=e,t.type=s,t.lanes=i,t}function gr(e,t,r,s){return e=Ze(7,e,s,t),e.lanes=r,e}function Da(e,t,r,s){return e=Ze(22,e,s,t),e.elementType=_c,e.lanes=r,e.stateNode={isHidden:!1},e}function mi(e,t,r){return e=Ze(6,e,null,t),e.lanes=r,e}function xi(e,t,r){return t=Ze(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ng(e,t,r,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ja(0),this.expirationTimes=Ja(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ja(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function po(e,t,r,s,a,i,l,o,d){return e=new Ng(e,t,r,o,d),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ze(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},eo(i),e}function _g(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tr,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function xh(e){if(!e)return er;e=e._reactInternals;e:{if(br(e)!==e||e.tag!==1)throw Error($(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Fe(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error($(171))}if(e.tag===1){var r=e.type;if(Fe(r))return xu(e,r,t)}return t}function yh(e,t,r,s,a,i,l,o,d){return e=po(r,s,!0,e,a,i,l,o,d),e.context=xh(null),r=e.current,s=Re(),a=Yt(r),i=Ct(s,a),i.callback=t??null,Kt(r,i,a),e.current.lanes=a,rn(e,a,s),He(e,s),e}function Oa(e,t,r,s){var a=t.current,i=Re(),l=Yt(a);return r=xh(r),t.context===null?t.context=r:t.pendingContext=r,t=Ct(i,l),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Kt(a,t,l),e!==null&&(ft(e,a,l,i),qn(e,a,l)),l}function ya(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function $d(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function vo(e,t){$d(e,t),(e=e.alternate)&&$d(e,t)}function Sg(){return null}var ph=typeof reportError=="function"?reportError:function(e){console.error(e)};function wo(e){this._internalRoot=e}Aa.prototype.render=wo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error($(409));Oa(e,t,null,null)};Aa.prototype.unmount=wo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;vr(function(){Oa(null,e,null,null)}),t[Pt]=null}};function Aa(e){this._internalRoot=e}Aa.prototype.unstable_scheduleHydration=function(e){if(e){var t=Kc();e={blockedOn:null,target:e,priority:t};for(var r=0;r<zt.length&&t!==0&&t<zt[r].priority;r++);zt.splice(r,0,e),r===0&&Yc(e)}};function bo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ra(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Md(){}function Cg(e,t,r,s,a){if(a){if(typeof s=="function"){var i=s;s=function(){var c=ya(l);i.call(c)}}var l=yh(t,s,e,0,null,!1,!1,"",Md);return e._reactRootContainer=l,e[Pt]=l.current,Bs(e.nodeType===8?e.parentNode:e),vr(),l}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var o=s;s=function(){var c=ya(d);o.call(c)}}var d=po(e,0,!1,null,null,!1,!1,"",Md);return e._reactRootContainer=d,e[Pt]=d.current,Bs(e.nodeType===8?e.parentNode:e),vr(function(){Oa(t,d,r,s)}),d}function La(e,t,r,s,a){var i=r._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var o=a;a=function(){var d=ya(l);o.call(d)}}Oa(t,l,e,a)}else l=Cg(r,t,e,a,s);return ya(l)}Gc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=vs(t.pendingLanes);r!==0&&(Ul(t,r|1),He(t,me()),!(re&6)&&(Zr=me()+500,sr()))}break;case 13:vr(function(){var s=Dt(e,1);if(s!==null){var a=Re();ft(s,e,1,a)}}),vo(e,1)}};zl=function(e){if(e.tag===13){var t=Dt(e,134217728);if(t!==null){var r=Re();ft(t,e,134217728,r)}vo(e,134217728)}};Qc=function(e){if(e.tag===13){var t=Yt(e),r=Dt(e,t);if(r!==null){var s=Re();ft(r,e,t,s)}vo(e,t)}};Kc=function(){return se};Jc=function(e,t){var r=se;try{return se=e,t()}finally{se=r}};Mi=function(e,t,r){switch(t){case"input":if(Pi(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var a=_a(s);if(!a)throw Error($(90));Cc(s),Pi(s,a)}}}break;case"textarea":Tc(e,r);break;case"select":t=r.value,t!=null&&qr(e,!!r.multiple,t,!1)}};$c=go;Mc=vr;var Eg={usingClientEntryPoint:!1,Events:[nn,Rr,_a,Rc,Lc,go]},gs={findFiberByHostInstance:cr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Tg={bundleType:gs.bundleType,version:gs.version,rendererPackageName:gs.rendererPackageName,rendererConfig:gs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=zc(e),e===null?null:e.stateNode},findFiberByHostInstance:gs.findFiberByHostInstance||Sg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tn.isDisabled&&Tn.supportsFiber)try{ba=Tn.inject(Tg),vt=Tn}catch{}}Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Eg;Qe.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bo(t))throw Error($(200));return _g(e,t,null,r)};Qe.createRoot=function(e,t){if(!bo(e))throw Error($(299));var r=!1,s="",a=ph;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=po(e,1,!1,null,null,r,!1,s,a),e[Pt]=t.current,Bs(e.nodeType===8?e.parentNode:e),new wo(t)};Qe.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error($(188)):(e=Object.keys(e).join(","),Error($(268,e)));return e=zc(t),e=e===null?null:e.stateNode,e};Qe.flushSync=function(e){return vr(e)};Qe.hydrate=function(e,t,r){if(!Ra(t))throw Error($(200));return La(null,e,t,!0,r)};Qe.hydrateRoot=function(e,t,r){if(!bo(e))throw Error($(405));var s=r!=null&&r.hydratedSources||null,a=!1,i="",l=ph;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=yh(t,null,e,1,r??null,a,!1,i,l),e[Pt]=t.current,Bs(e),s)for(e=0;e<s.length;e++)r=s[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Aa(t)};Qe.render=function(e,t,r){if(!Ra(t))throw Error($(200));return La(null,e,t,!1,r)};Qe.unmountComponentAtNode=function(e){if(!Ra(e))throw Error($(40));return e._reactRootContainer?(vr(function(){La(null,null,e,!1,function(){e._reactRootContainer=null,e[Pt]=null})}),!0):!1};Qe.unstable_batchedUpdates=go;Qe.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!Ra(r))throw Error($(200));if(e==null||e._reactInternals===void 0)throw Error($(38));return La(e,t,r,!1,s)};Qe.version="18.3.1-next-f1338f8080-20240426";function vh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vh)}catch(e){console.error(e)}}vh(),vc.exports=Qe;var Pg=vc.exports,wh,Id=Pg;wh=Id.createRoot,Id.hydrateRoot;const Dg="modulepreload",Og=function(e){return"/"+e},Ud={},ln=function(t,r,s){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=Promise.allSettled(r.map(d=>{if(d=Og(d),d in Ud)return;Ud[d]=!0;const c=d.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${u}`))return;const m=document.createElement("link");if(m.rel=c?"stylesheet":Dg,c||(m.as="script"),m.crossOrigin="",m.href=d,o&&m.setAttribute("nonce",o),document.head.appendChild(m),c)return new Promise((x,v)=>{m.addEventListener("load",x),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return a.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return t().catch(i)})},Ag=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>ln(async()=>{const{default:s}=await Promise.resolve().then(()=>as);return{default:s}},void 0).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)};class ko extends Error{constructor(t,r="FunctionsError",s){super(t),this.name=r,this.context=s}}class Rg extends ko{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class zd extends ko{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class qd extends ko{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var xl;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(xl||(xl={}));var Lg=function(e,t,r,s){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(s.next(u))}catch(m){l(m)}}function d(u){try{c(s.throw(u))}catch(m){l(m)}}function c(u){u.done?i(u.value):a(u.value).then(o,d)}c((s=s.apply(e,t||[])).next())})};class $g{constructor(t,{headers:r={},customFetch:s,region:a=xl.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=Ag(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var s;return Lg(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:l}=r;let o={},{region:d}=r;d||(d=this.region);const c=new URL(`${this.url}/${t}`);d&&d!=="any"&&(o["x-region"]=d,c.searchParams.set("forceFunctionRegion",d));let u;l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",u=l):typeof l=="string"?(o["Content-Type"]="text/plain",u=l):typeof FormData<"u"&&l instanceof FormData?u=l:(o["Content-Type"]="application/json",u=JSON.stringify(l)));const m=yield this.fetch(c.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),a),body:u}).catch(y=>{throw new Rg(y)}),x=m.headers.get("x-relay-error");if(x&&x==="true")throw new zd(m);if(!m.ok)throw new qd(m);let v=((s=m.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),k;return v==="application/json"?k=yield m.json():v==="application/octet-stream"?k=yield m.blob():v==="text/event-stream"?k=m:v==="multipart/form-data"?k=yield m.formData():k=yield m.text(),{data:k,error:null,response:m}}catch(a){return{data:null,error:a,response:a instanceof qd||a instanceof zd?a.context:void 0}}})}}var Ue={},jo={},$a={},on={},Ma={},Ia={},Mg=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},es=Mg();const Ig=es.fetch,bh=es.fetch.bind(es),kh=es.Headers,Ug=es.Request,zg=es.Response,as=Object.freeze(Object.defineProperty({__proto__:null,Headers:kh,Request:Ug,Response:zg,default:bh,fetch:Ig},Symbol.toStringTag,{value:"Module"})),qg=s0(as);var Ua={};Object.defineProperty(Ua,"__esModule",{value:!0});let Fg=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Ua.default=Fg;var jh=rt&&rt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ia,"__esModule",{value:!0});const Hg=jh(qg),Bg=jh(Ua);let Wg=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Hg.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let a=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var l,o,d;let c=null,u=null,m=null,x=i.status,v=i.statusText;if(i.ok){if(this.method!=="HEAD"){const g=await i.text();g===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=g:u=JSON.parse(g))}const y=(l=this.headers.Prefer)===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),E=(o=i.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");y&&E&&E.length>1&&(m=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,m=null,x=406,v="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const y=await i.text();try{c=JSON.parse(y),Array.isArray(c)&&i.status===404&&(u=[],c=null,x=200,v="OK")}catch{i.status===404&&y===""?(x=204,v="No Content"):c={message:y}}if(c&&this.isMaybeSingle&&(!((d=c==null?void 0:c.details)===null||d===void 0)&&d.includes("0 rows"))&&(c=null,x=200,v="OK"),c&&this.shouldThrowOnError)throw new Bg.default(c)}return{error:c,data:u,count:m,status:x,statusText:v}});return this.shouldThrowOnError||(a=a.catch(i=>{var l,o,d;return{error:{message:`${(l=i==null?void 0:i.name)!==null&&l!==void 0?l:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(d=i==null?void 0:i.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,r)}returns(){return this}overrideTypes(){return this}};Ia.default=Wg;var Vg=rt&&rt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ma,"__esModule",{value:!0});const Gg=Vg(Ia);let Qg=class extends Gg.default{select(t){let r=!1;const s=(t??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:s,foreignTable:a,referencedTable:i=a}={}){const l=i?`${i}.order`:"order",o=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${o?`${o},`:""}${t}.${r?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:s=r}={}){const a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,r,{foreignTable:s,referencedTable:a=s}={}){const i=typeof a>"u"?"offset":`${a}.offset`,l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(l,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:s=!1,buffers:a=!1,wal:i=!1,format:l="text"}={}){var o;const d=[t?"analyze":null,r?"verbose":null,s?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${l}; for="${c}"; options=${d};`,l==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Ma.default=Qg;var Kg=rt&&rt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(on,"__esModule",{value:!0});const Jg=Kg(Ma);let Yg=class extends Jg.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const s=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${s})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:s,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const l=s===void 0?"":`(${s})`;return this.url.searchParams.append(t,`${i}fts${l}.${r}`),this}match(t){return Object.entries(t).forEach(([r,s])=>{this.url.searchParams.append(r,`eq.${s}`)}),this}not(t,r,s){return this.url.searchParams.append(t,`not.${r}.${s}`),this}or(t,{foreignTable:r,referencedTable:s=r}={}){const a=s?`${s}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,r,s){return this.url.searchParams.append(t,`${r}.${s}`),this}};on.default=Yg;var Xg=rt&&rt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($a,"__esModule",{value:!0});const ms=Xg(on);let Zg=class{constructor(t,{headers:r={},schema:s,fetch:a}){this.url=t,this.headers=r,this.schema=s,this.fetch=a}select(t,{head:r=!1,count:s}={}){const a=r?"HEAD":"GET";let i=!1;const l=(t??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",l),s&&(this.headers.Prefer=`count=${s}`),new ms.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:s=!0}={}){const a="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),s||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const l=t.reduce((o,d)=>o.concat(Object.keys(d)),[]);if(l.length>0){const o=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",o.join(","))}}return new ms.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:s=!1,count:a,defaultToNull:i=!0}={}){const l="POST",o=[`resolution=${s?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&o.push(this.headers.Prefer),a&&o.push(`count=${a}`),i||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const d=t.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(d.length>0){const c=[...new Set(d)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new ms.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const s="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),this.headers.Prefer=a.join(","),new ms.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",s=[];return t&&s.push(`count=${t}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new ms.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};$a.default=Zg;var za={},qa={};Object.defineProperty(qa,"__esModule",{value:!0});qa.version=void 0;qa.version="0.0.0-automated";Object.defineProperty(za,"__esModule",{value:!0});za.DEFAULT_HEADERS=void 0;const em=qa;za.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${em.version}`};var Nh=rt&&rt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(jo,"__esModule",{value:!0});const tm=Nh($a),rm=Nh(on),sm=za;let nm=class _h{constructor(t,{headers:r={},schema:s,fetch:a}={}){this.url=t,this.headers=Object.assign(Object.assign({},sm.DEFAULT_HEADERS),r),this.schemaName=s,this.fetch=a}from(t){const r=new URL(`${this.url}/${t}`);return new tm.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new _h(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:s=!1,get:a=!1,count:i}={}){let l;const o=new URL(`${this.url}/rpc/${t}`);let d;s||a?(l=s?"HEAD":"GET",Object.entries(r).filter(([u,m])=>m!==void 0).map(([u,m])=>[u,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([u,m])=>{o.searchParams.append(u,m)})):(l="POST",d=r);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new rm.default({method:l,url:o,headers:c,schema:this.schemaName,body:d,fetch:this.fetch,allowEmpty:!1})}};jo.default=nm;var is=rt&&rt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.PostgrestError=Ue.PostgrestBuilder=Ue.PostgrestTransformBuilder=Ue.PostgrestFilterBuilder=Ue.PostgrestQueryBuilder=Ue.PostgrestClient=void 0;const Sh=is(jo);Ue.PostgrestClient=Sh.default;const Ch=is($a);Ue.PostgrestQueryBuilder=Ch.default;const Eh=is(on);Ue.PostgrestFilterBuilder=Eh.default;const Th=is(Ma);Ue.PostgrestTransformBuilder=Th.default;const Ph=is(Ia);Ue.PostgrestBuilder=Ph.default;const Dh=is(Ua);Ue.PostgrestError=Dh.default;var am=Ue.default={PostgrestClient:Sh.default,PostgrestQueryBuilder:Ch.default,PostgrestFilterBuilder:Eh.default,PostgrestTransformBuilder:Th.default,PostgrestBuilder:Ph.default,PostgrestError:Dh.default};const{PostgrestClient:im,PostgrestQueryBuilder:Dy,PostgrestFilterBuilder:Oy,PostgrestTransformBuilder:Ay,PostgrestBuilder:Ry,PostgrestError:Ly}=am;function lm(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const om=lm(),dm="2.11.15",cm=`realtime-js/${dm}`,um="1.0.0",Oh=1e4,hm=1e3;var Ds;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ds||(Ds={}));var Te;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Te||(Te={}));var ct;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ct||(ct={}));var yl;(function(e){e.websocket="websocket"})(yl||(yl={}));var dr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(dr||(dr={}));class fm{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),s=new TextDecoder;return this._decodeBroadcast(t,r,s)}_decodeBroadcast(t,r,s){const a=r.getUint8(1),i=r.getUint8(2);let l=this.HEADER_LENGTH+2;const o=s.decode(t.slice(l,l+a));l=l+a;const d=s.decode(t.slice(l,l+i));l=l+i;const c=JSON.parse(s.decode(t.slice(l,t.byteLength)));return{ref:null,topic:o,event:d,payload:c}}}class Ah{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ae;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ae||(ae={}));const Fd=(e,t,r={})=>{var s;const a=(s=r.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(t).reduce((i,l)=>(i[l]=gm(l,e,t,a),i),{})},gm=(e,t,r,s)=>{const a=t.find(o=>o.name===e),i=a==null?void 0:a.type,l=r[e];return i&&!s.includes(i)?Rh(i,l):pl(l)},Rh=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return pm(t,r)}switch(e){case ae.bool:return mm(t);case ae.float4:case ae.float8:case ae.int2:case ae.int4:case ae.int8:case ae.numeric:case ae.oid:return xm(t);case ae.json:case ae.jsonb:return ym(t);case ae.timestamp:return vm(t);case ae.abstime:case ae.date:case ae.daterange:case ae.int4range:case ae.int8range:case ae.money:case ae.reltime:case ae.text:case ae.time:case ae.timestamptz:case ae.timetz:case ae.tsrange:case ae.tstzrange:return pl(t);default:return pl(t)}},pl=e=>e,mm=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},xm=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},ym=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},pm=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,s=e[r];if(e[0]==="{"&&s==="}"){let i;const l=e.slice(1,r);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(o=>Rh(t,o))}return e},vm=e=>typeof e=="string"?e.replace(" ","T"):e,Lh=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class yi{constructor(t,r,s={},a=Oh){this.channel=t,this.event=r,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var s;return this._hasReceived(t)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Hd;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Hd||(Hd={}));class Os{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Os.syncState(this.state,a,i,l),this.pendingDiffs.forEach(d=>{this.state=Os.syncDiff(this.state,d,i,l)}),this.pendingDiffs=[],o()}),this.channel._on(s.diff,{},a=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Os.syncDiff(this.state,a,i,l),o())}),this.onJoin((a,i,l)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:l})}),this.onLeave((a,i,l)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,s,a){const i=this.cloneDeep(t),l=this.transformState(r),o={},d={};return this.map(i,(c,u)=>{l[c]||(d[c]=u)}),this.map(l,(c,u)=>{const m=i[c];if(m){const x=u.map(E=>E.presence_ref),v=m.map(E=>E.presence_ref),k=u.filter(E=>v.indexOf(E.presence_ref)<0),y=m.filter(E=>x.indexOf(E.presence_ref)<0);k.length>0&&(o[c]=k),y.length>0&&(d[c]=y)}else o[c]=u}),this.syncDiff(i,{joins:o,leaves:d},s,a)}static syncDiff(t,r,s,a){const{joins:i,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(i,(o,d)=>{var c;const u=(c=t[o])!==null&&c!==void 0?c:[];if(t[o]=this.cloneDeep(d),u.length>0){const m=t[o].map(v=>v.presence_ref),x=u.filter(v=>m.indexOf(v.presence_ref)<0);t[o].unshift(...x)}s(o,u,d)}),this.map(l,(o,d)=>{let c=t[o];if(!c)return;const u=d.map(m=>m.presence_ref);c=c.filter(m=>u.indexOf(m.presence_ref)<0),t[o]=c,a(o,c,d),c.length===0&&delete t[o]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(s=>r(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,s)=>{const a=t[s];return"metas"in a?r[s]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[s]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Bd;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Bd||(Bd={}));var Wd;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Wd||(Wd={}));var jt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(jt||(jt={}));class No{constructor(t,r={config:{}},s){this.topic=t,this.params=r,this.socket=s,this.bindings={},this.state=Te.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new yi(this,ct.join,this.params,this.timeout),this.rejoinTimer=new Ah(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Te.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Te.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Te.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Te.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ct.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new Os(this),this.broadcastEndpointURL=Lh(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Te.closed){const{config:{broadcast:i,presence:l,private:o}}=this.params;this._onError(u=>t==null?void 0:t(jt.CHANNEL_ERROR,u)),this._onClose(()=>t==null?void 0:t(jt.CLOSED));const d={},c={broadcast:i,presence:l,postgres_changes:(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(u=>u.filter))!==null&&a!==void 0?a:[],private:o};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:u})=>{var m;if(this.socket.setAuth(),u===void 0){t==null||t(jt.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,v=(m=x==null?void 0:x.length)!==null&&m!==void 0?m:0,k=[];for(let y=0;y<v;y++){const E=x[y],{filter:{event:g,schema:f,table:h,filter:w}}=E,b=u&&u[y];if(b&&b.event===g&&b.schema===f&&b.table===h&&b.filter===w)k.push(Object.assign(Object.assign({},E),{id:b.id}));else{this.unsubscribe(),this.state=Te.errored,t==null||t(jt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,t&&t(jt.SUBSCRIBED);return}}).receive("error",u=>{this.state=Te.errored,t==null||t(jt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(jt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,s){return this._on(t,r,s)}async send(t,r={}){var s,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:l}=t,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=c.body)===null||a===void 0?void 0:a.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,o,d;const c=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(o=(l=this.params)===null||l===void 0?void 0:l.config)===null||o===void 0?void 0:o.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Te.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ct.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new yi(this,ct.leave,{},t),s.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,s){const a=new AbortController,i=setTimeout(()=>a.abort(),s),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),l}_push(t,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new yi(this,t,r,s);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(t,r,s){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,s){var a,i;const l=t.toLocaleLowerCase(),{close:o,error:d,leave:c,join:u}=ct;if(s&&[o,d,c,u].indexOf(l)>=0&&s!==this._joinRef())return;let x=this._onMessage(l,r,s);if(r&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(v=>{var k,y,E;return((k=v.filter)===null||k===void 0?void 0:k.event)==="*"||((E=(y=v.filter)===null||y===void 0?void 0:y.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===l}).map(v=>v.callback(x,s)):(i=this.bindings[l])===null||i===void 0||i.filter(v=>{var k,y,E,g,f,h;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in v){const w=v.id,b=(k=v.filter)===null||k===void 0?void 0:k.event;return w&&((y=r.ids)===null||y===void 0?void 0:y.includes(w))&&(b==="*"||(b==null?void 0:b.toLocaleLowerCase())===((E=r.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const w=(f=(g=v==null?void 0:v.filter)===null||g===void 0?void 0:g.event)===null||f===void 0?void 0:f.toLocaleLowerCase();return w==="*"||w===((h=r==null?void 0:r.event)===null||h===void 0?void 0:h.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===l}).map(v=>{if(typeof x=="object"&&"ids"in x){const k=x.data,{schema:y,table:E,commit_timestamp:g,type:f,errors:h}=k;x=Object.assign(Object.assign({},{schema:y,table:E,commit_timestamp:g,eventType:f,new:{},old:{},errors:h}),this._getPayloadRecords(k))}v.callback(x,s)})}_isClosed(){return this.state===Te.closed}_isJoined(){return this.state===Te.joined}_isJoining(){return this.state===Te.joining}_isLeaving(){return this.state===Te.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,s){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:s};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const s=t.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&No.isEqual(a.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const s in t)if(t[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ct.close,{},t)}_onError(t){this._on(ct.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Te.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Fd(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Fd(t.columns,t.old_record)),r}}const Vd=()=>{},wm=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class bm{constructor(t,r){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Oh,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Vd,this.ref=0,this.logger=Vd,this.conn=null,this.sendBuffer=[],this.serializer=new fm,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let l;return i?l=i:typeof fetch>"u"?l=(...o)=>ln(async()=>{const{default:d}=await Promise.resolve().then(()=>as);return{default:d}},void 0).then(({default:d})=>d(...o)):l=fetch,(...o)=>l(...o)},this.endPoint=`${t}/${yl.websocket}`,this.httpEndpoint=Lh(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const a=(s=r==null?void 0:r.params)===null||s===void 0?void 0:s.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,l)=>l(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Ah(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=om),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:um}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,s){this.logger(t,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Ds.connecting:return dr.Connecting;case Ds.open:return dr.Open;case Ds.closing:return dr.Closing;default:return dr.Closed}}isConnected(){return this.connectionState()===dr.Open}channel(t,r={config:{}}){const s=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===s);if(a)return a;{const i=new No(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:s,payload:a,ref:i}=t,l=()=>{this.encode(t,o=>{var d;(d=this.conn)===null||d===void 0||d.send(o)})};this.log("push",`${r} ${s} (${i})`,a),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const a={access_token:r,version:cm};r&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(ct.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(hm,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:s,event:a,payload:i,ref:l}=r;s==="phoenix"&&a==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),l&&l===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${s} ${a} ${l&&"("+l+")"||""}`,i),Array.from(this.channels).filter(o=>o._isMember(s)).forEach(o=>o._trigger(a,i,l)),this.stateChangeCallbacks.message.forEach(o=>o(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(ct.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const s=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${s}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const s=new Blob([wm],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}}class _o extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function we(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class km extends _o{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class vl extends _o{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var jm=function(e,t,r,s){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(s.next(u))}catch(m){l(m)}}function d(u){try{c(s.throw(u))}catch(m){l(m)}}function c(u){u.done?i(u.value):a(u.value).then(o,d)}c((s=s.apply(e,t||[])).next())})};const $h=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>ln(async()=>{const{default:s}=await Promise.resolve().then(()=>as);return{default:s}},void 0).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)},Nm=()=>jm(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ln(()=>Promise.resolve().then(()=>as),void 0)).Response:Response}),wl=e=>{if(Array.isArray(e))return e.map(r=>wl(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,s])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=wl(s)}),t};var kr=function(e,t,r,s){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(s.next(u))}catch(m){l(m)}}function d(u){try{c(s.throw(u))}catch(m){l(m)}}function c(u){u.done?i(u.value):a(u.value).then(o,d)}c((s=s.apply(e,t||[])).next())})};const pi=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),_m=(e,t,r)=>kr(void 0,void 0,void 0,function*(){const s=yield Nm();e instanceof s&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{t(new km(pi(a),e.status||500))}).catch(a=>{t(new vl(pi(a),a))}):t(new vl(pi(e),e))}),Sm=(e,t,r,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s&&(a.body=JSON.stringify(s)),Object.assign(Object.assign({},a),r))};function dn(e,t,r,s,a,i){return kr(this,void 0,void 0,function*(){return new Promise((l,o)=>{e(r,Sm(t,s,a,i)).then(d=>{if(!d.ok)throw d;return s!=null&&s.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>_m(d,o,s))})})}function pa(e,t,r,s){return kr(this,void 0,void 0,function*(){return dn(e,"GET",t,r,s)})}function Ut(e,t,r,s,a){return kr(this,void 0,void 0,function*(){return dn(e,"POST",t,s,a,r)})}function Cm(e,t,r,s,a){return kr(this,void 0,void 0,function*(){return dn(e,"PUT",t,s,a,r)})}function Em(e,t,r,s){return kr(this,void 0,void 0,function*(){return dn(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function Mh(e,t,r,s,a){return kr(this,void 0,void 0,function*(){return dn(e,"DELETE",t,s,a,r)})}var Me=function(e,t,r,s){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(s.next(u))}catch(m){l(m)}}function d(u){try{c(s.throw(u))}catch(m){l(m)}}function c(u){u.done?i(u.value):a(u.value).then(o,d)}c((s=s.apply(e,t||[])).next())})};const Tm={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Gd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Pm{constructor(t,r={},s,a){this.url=t,this.headers=r,this.bucketId=s,this.fetch=$h(a)}uploadOrUpdate(t,r,s,a){return Me(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},Gd),a);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",this.encodeMetadata(d)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",this.encodeMetadata(d))):(i=s,o["cache-control"]=`max-age=${l.cacheControl}`,o["content-type"]=l.contentType,d&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),a!=null&&a.headers&&(o=Object.assign(Object.assign({},o),a.headers));const c=this._removeEmptyFolders(r),u=this._getFinalPath(c),m=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:i,headers:o},l!=null&&l.duplex?{duplex:l.duplex}:{})),x=yield m.json();return m.ok?{data:{path:c,id:x.Id,fullPath:x.Key},error:null}:{data:null,error:x}}catch(i){if(we(i))return{data:null,error:i};throw i}})}upload(t,r,s){return Me(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,s)})}uploadToSignedUrl(t,r,s,a){return Me(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),l=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${l}`);o.searchParams.set("token",r);try{let d;const c=Object.assign({upsert:Gd.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&s instanceof Blob?(d=new FormData,d.append("cacheControl",c.cacheControl),d.append("",s)):typeof FormData<"u"&&s instanceof FormData?(d=s,d.append("cacheControl",c.cacheControl)):(d=s,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const m=yield this.fetch(o.toString(),{method:"PUT",body:d,headers:u}),x=yield m.json();return m.ok?{data:{path:i,fullPath:x.Key},error:null}:{data:null,error:x}}catch(d){if(we(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(t,r){return Me(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield Ut(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),l=new URL(this.url+i.url),o=l.searchParams.get("token");if(!o)throw new _o("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:o},error:null}}catch(s){if(we(s))return{data:null,error:s};throw s}})}update(t,r,s){return Me(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,s)})}move(t,r,s){return Me(this,void 0,void 0,function*(){try{return{data:yield Ut(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(we(a))return{data:null,error:a};throw a}})}copy(t,r,s){return Me(this,void 0,void 0,function*(){try{return{data:{path:(yield Ut(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(we(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,s){return Me(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield Ut(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const l=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(a){if(we(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,s){return Me(this,void 0,void 0,function*(){try{const a=yield Ut(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(a){if(we(a))return{data:null,error:a};throw a}})}download(t,r){return Me(this,void 0,void 0,function*(){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=i?`?${i}`:"";try{const o=this._getFinalPath(t);return{data:yield(yield pa(this.fetch,`${this.url}/${a}/${o}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(we(o))return{data:null,error:o};throw o}})}info(t){return Me(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const s=yield pa(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:wl(s),error:null}}catch(s){if(we(s))return{data:null,error:s};throw s}})}exists(t){return Me(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield Em(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(we(s)&&s instanceof vl){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}})}getPublicUrl(t,r){const s=this._getFinalPath(t),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});d!==""&&a.push(d);let c=a.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${s}${c}`)}}}remove(t){return Me(this,void 0,void 0,function*(){try{return{data:yield Mh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}})}list(t,r,s){return Me(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},Tm),r),{prefix:t||""});return{data:yield Ut(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(we(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const Dm="2.7.1",Om={"X-Client-Info":`storage-js/${Dm}`};var Nr=function(e,t,r,s){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(s.next(u))}catch(m){l(m)}}function d(u){try{c(s.throw(u))}catch(m){l(m)}}function c(u){u.done?i(u.value):a(u.value).then(o,d)}c((s=s.apply(e,t||[])).next())})};class Am{constructor(t,r={},s){this.url=t,this.headers=Object.assign(Object.assign({},Om),r),this.fetch=$h(s)}listBuckets(){return Nr(this,void 0,void 0,function*(){try{return{data:yield pa(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(we(t))return{data:null,error:t};throw t}})}getBucket(t){return Nr(this,void 0,void 0,function*(){try{return{data:yield pa(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Nr(this,void 0,void 0,function*(){try{return{data:yield Ut(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(we(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return Nr(this,void 0,void 0,function*(){try{return{data:yield Cm(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(we(s))return{data:null,error:s};throw s}})}emptyBucket(t){return Nr(this,void 0,void 0,function*(){try{return{data:yield Ut(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Nr(this,void 0,void 0,function*(){try{return{data:yield Mh(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}})}}class Rm extends Am{constructor(t,r={},s){super(t,r,s)}from(t){return new Pm(this.url,this.headers,t,this.fetch)}}const Lm="2.50.5";let bs="";typeof Deno<"u"?bs="deno":typeof document<"u"?bs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?bs="react-native":bs="node";const $m={"X-Client-Info":`supabase-js-${bs}/${Lm}`},Mm={headers:$m},Im={schema:"public"},Um={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},zm={};var qm=function(e,t,r,s){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(s.next(u))}catch(m){l(m)}}function d(u){try{c(s.throw(u))}catch(m){l(m)}}function c(u){u.done?i(u.value):a(u.value).then(o,d)}c((s=s.apply(e,t||[])).next())})};const Fm=e=>{let t;return e?t=e:typeof fetch>"u"?t=bh:t=fetch,(...r)=>t(...r)},Hm=()=>typeof Headers>"u"?kh:Headers,Bm=(e,t,r)=>{const s=Fm(r),a=Hm();return(i,l)=>qm(void 0,void 0,void 0,function*(){var o;const d=(o=yield t())!==null&&o!==void 0?o:e;let c=new a(l==null?void 0:l.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${d}`),s(i,Object.assign(Object.assign({},l),{headers:c}))})};var Wm=function(e,t,r,s){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(s.next(u))}catch(m){l(m)}}function d(u){try{c(s.throw(u))}catch(m){l(m)}}function c(u){u.done?i(u.value):a(u.value).then(o,d)}c((s=s.apply(e,t||[])).next())})};function Vm(e){return e.endsWith("/")?e:e+"/"}function Gm(e,t){var r,s;const{db:a,auth:i,realtime:l,global:o}=e,{db:d,auth:c,realtime:u,global:m}=t,x={db:Object.assign(Object.assign({},d),a),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),l),global:Object.assign(Object.assign(Object.assign({},m),o),{headers:Object.assign(Object.assign({},(r=m==null?void 0:m.headers)!==null&&r!==void 0?r:{}),(s=o==null?void 0:o.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>Wm(this,void 0,void 0,function*(){return""})};return e.accessToken?x.accessToken=e.accessToken:delete x.accessToken,x}const Ih="2.70.0",Er=30*1e3,bl=3,vi=bl*Er,Qm="http://localhost:9999",Km="supabase.auth.token",Jm={"X-Client-Info":`gotrue-js/${Ih}`},kl="X-Supabase-Api-Version",Uh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Ym=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Xm=6e5;class So extends Error{constructor(t,r,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function J(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Zm extends So{constructor(t,r,s){super(t,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function ex(e){return J(e)&&e.name==="AuthApiError"}class zh extends So{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class nr extends So{constructor(t,r,s,a){super(t,s,a),this.name=r,this.status=s}}class $t extends nr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function tx(e){return J(e)&&e.name==="AuthSessionMissingError"}class Pn extends nr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Dn extends nr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class On extends nr{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function rx(e){return J(e)&&e.name==="AuthImplicitGrantRedirectError"}class Qd extends nr{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class jl extends nr{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function wi(e){return J(e)&&e.name==="AuthRetryableFetchError"}class Kd extends nr{constructor(t,r,s){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class As extends nr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const va="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Jd=` 	
\r=`.split(""),sx=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Jd.length;t+=1)e[Jd[t].charCodeAt(0)]=-2;for(let t=0;t<va.length;t+=1)e[va[t].charCodeAt(0)]=t;return e})();function Yd(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(va[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(va[s]),t.queuedBits-=6}}function qh(e,t,r){const s=sx[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Xd(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=l=>{ix(l,s,r)};for(let l=0;l<e.length;l+=1)qh(e.charCodeAt(l),a,i);return t.join("")}function nx(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function ax(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}nx(s,t)}}function ix(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function lx(e){const t=[],r={queue:0,queuedBits:0},s=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)qh(e.charCodeAt(a),r,s);return new Uint8Array(t)}function ox(e){const t=[];return ax(e,r=>t.push(r)),new Uint8Array(t)}function dx(e){const t=[],r={queue:0,queuedBits:0},s=a=>{t.push(a)};return e.forEach(a=>Yd(a,r,s)),Yd(null,r,s),t.join("")}function cx(e){return Math.round(Date.now()/1e3)+e}function ux(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const lt=()=>typeof window<"u"&&typeof document<"u",ar={tested:!1,writable:!1},Rs=()=>{if(!lt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ar.tested)return ar.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ar.tested=!0,ar.writable=!0}catch{ar.tested=!0,ar.writable=!1}return ar.writable};function hx(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((s,a)=>{t[a]=s}),t}const Fh=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>ln(async()=>{const{default:s}=await Promise.resolve().then(()=>as);return{default:s}},void 0).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)},fx=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Hh=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},An=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Rn=async(e,t)=>{await e.removeItem(t)};class Fa{constructor(){this.promise=new Fa.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Fa.promiseConstructor=Promise;function bi(e){const t=e.split(".");if(t.length!==3)throw new As("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!Ym.test(t[s]))throw new As("JWT not in base64url format");return{header:JSON.parse(Xd(t[0])),payload:JSON.parse(Xd(t[1])),signature:lx(t[2]),raw:{header:t[0],payload:t[1]}}}async function gx(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function mx(e,t){return new Promise((s,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await e(i);if(!t(i,null,l)){s(l);return}}catch(l){if(!t(i,l)){a(l);return}}})()})}function xx(e){return("0"+e.toString(16)).substr(-2)}function yx(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(t),Array.from(t,xx).join("")}async function px(e){const r=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(s);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function vx(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await px(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function _r(e,t,r=!1){const s=yx();let a=s;r&&(a+="/PASSWORD_RECOVERY"),await Hh(e,`${t}-code-verifier`,a);const i=await vx(s);return[i,s===i?"plain":"s256"]}const wx=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function bx(e){const t=e.headers.get(kl);if(!t||!t.match(wx))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function kx(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function jx(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Nx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Sr(e){if(!Nx.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var _x=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r};const or=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Sx=[502,503,504];async function Zd(e){var t;if(!fx(e))throw new jl(or(e),0);if(Sx.includes(e.status))throw new jl(or(e),e.status);let r;try{r=await e.json()}catch(i){throw new zh(or(i),i)}let s;const a=bx(e);if(a&&a.getTime()>=Uh["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new Kd(or(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new $t}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new Kd(or(r),e.status,r.weak_password.reasons);throw new Zm(or(r),e.status||500,s)}const Cx=(e,t,r,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),r))};async function ee(e,t,r,s){var a;const i=Object.assign({},s==null?void 0:s.headers);i[kl]||(i[kl]=Uh["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const l=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(l.redirect_to=s.redirectTo);const o=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await Ex(e,t,r+o,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(d):{data:Object.assign({},d),error:null}}async function Ex(e,t,r,s,a,i){const l=Cx(t,s,a,i);let o;try{o=await e(r,Object.assign({},l))}catch(d){throw console.error(d),new jl(or(d),0)}if(o.ok||await Zd(o),s!=null&&s.noResolveJson)return o;try{return await o.json()}catch(d){await Zd(d)}}function bt(e){var t;let r=null;Ox(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=cx(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:s},error:null}}function ec(e){const t=bt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ft(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Tx(e){return{data:e,error:null}}function Px(e){const{action_link:t,email_otp:r,hashed_token:s,redirect_to:a,verification_type:i}=e,l=_x(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:r,hashed_token:s,redirect_to:a,verification_type:i},d=Object.assign({},l);return{data:{properties:o,user:d},error:null}}function Dx(e){return e}function Ox(e){return e.access_token&&e.refresh_token&&e.expires_in}const ki=["global","local","others"];var Ax=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r};class Rx{constructor({url:t="",headers:r={},fetch:s}){this.url=t,this.headers=r,this.fetch=Fh(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=ki[0]){if(ki.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ki.join(", ")}`);try{return await ee(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(J(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,r={}){try{return await ee(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ft})}catch(s){if(J(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:r}=t,s=Ax(t,["options"]),a=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await ee(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Px,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(J(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await ee(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ft})}catch(r){if(J(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,s,a,i,l,o,d;try{const c={nextPage:null,lastPage:0,total:0},u=await ee(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:Dx});if(u.error)throw u.error;const m=await u.json(),x=(l=u.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(d=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&d!==void 0?d:[];return v.length>0&&(v.forEach(k=>{const y=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(k.split(";")[1].split("=")[1]);c[`${E}Page`]=y}),c.total=parseInt(x)),{data:Object.assign(Object.assign({},m),c),error:null}}catch(c){if(J(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){Sr(t);try{return await ee(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ft})}catch(r){if(J(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Sr(t);try{return await ee(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Ft})}catch(s){if(J(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,r=!1){Sr(t);try{return await ee(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ft})}catch(s){if(J(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){Sr(t.userId);try{const{data:r,error:s}=await ee(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:s}}catch(r){if(J(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Sr(t.userId),Sr(t.id);try{return{data:await ee(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(J(r))return{data:null,error:r};throw r}}}const Lx={getItem:e=>Rs()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Rs()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Rs()&&globalThis.localStorage.removeItem(e)}};function tc(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function $x(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Cr={debug:!!(globalThis&&Rs()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Bh extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Mx extends Bh{}async function Ix(e,t,r){Cr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),Cr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){Cr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Cr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Cr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Mx(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Cr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}$x();const Ux={url:Qm,storageKey:Km,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Jm,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function rc(e,t,r){return await r()}class Zs{constructor(t){var r,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Zs.nextInstanceID,Zs.nextInstanceID+=1,this.instanceID>0&&lt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},Ux),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Rx({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Fh(a.fetch),this.lock=a.lock||rc,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:lt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Ix:this.lock=rc,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:Rs()?this.storage=Lx:(this.memoryStorage={},this.storage=tc(this.memoryStorage)):(this.memoryStorage={},this.storage=tc(this.memoryStorage)),lt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Ih}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=hx(window.location.href);let s="none";if(this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce"),lt()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),rx(i)){const d=(t=i.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:o}=a;return this._debug("#_initialize()","detected session in URL",l,"redirect type",o),await this._saveSession(l),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return J(r)?{error:r}:{error:new zh("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,s,a;try{const i=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:bt}),{data:l,error:o}=i;if(o||!l)return{data:{user:null,session:null},error:o};const d=l.session,c=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:c,session:d},error:null}}catch(i){if(J(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,s,a;try{let i;if("email"in t){const{email:u,password:m,options:x}=t;let v=null,k=null;this.flowType==="pkce"&&([v,k]=await _r(this.storage,this.storageKey)),i=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:u,password:m,data:(r=x==null?void 0:x.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:v,code_challenge_method:k},xform:bt})}else if("phone"in t){const{phone:u,password:m,options:x}=t;i=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:m,data:(s=x==null?void 0:x.data)!==null&&s!==void 0?s:{},channel:(a=x==null?void 0:x.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:bt})}else throw new Dn("You must provide either an email or phone number and a password");const{data:l,error:o}=i;if(o||!l)return{data:{user:null,session:null},error:o};const d=l.session,c=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:c,session:d},error:null}}catch(i){if(J(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:l,options:o}=t;r=await ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:ec})}else if("phone"in t){const{phone:i,password:l,options:o}=t;r=await ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:ec})}else throw new Dn("You must provide either an email or phone number and a password");const{data:s,error:a}=r;return a?{data:{user:null,session:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Pn}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(r){if(J(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,s,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,s,a,i,l,o,d,c,u,m,x,v;let k,y;if("message"in t)k=t.message,y=t.signature;else{const{chain:E,wallet:g,statement:f,options:h}=t;let w;if(lt())if(typeof g=="object")w=g;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))w=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(h!=null&&h.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=g}const b=new URL((r=h==null?void 0:h.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in w&&w.signIn){const S=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},h==null?void 0:h.signInWithSolana),{version:"1",domain:b.host,uri:b.href}),f?{statement:f}:null));let P;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")P=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)P=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)k=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),y=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${b.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1",`URI: ${b.href}`,`Issued At: ${(a=(s=h==null?void 0:h.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=h==null?void 0:h.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${h.signInWithSolana.notBefore}`]:[],...!((l=h==null?void 0:h.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${h.signInWithSolana.expirationTime}`]:[],...!((o=h==null?void 0:h.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${h.signInWithSolana.chainId}`]:[],...!((d=h==null?void 0:h.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${h.signInWithSolana.nonce}`]:[],...!((c=h==null?void 0:h.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${h.signInWithSolana.requestId}`]:[],...!((m=(u=h==null?void 0:h.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||m===void 0)&&m.length?["Resources",...h.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const S=await w.signMessage(new TextEncoder().encode(k),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=S}}try{const{data:E,error:g}=await ee(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:dx(y)},!((x=t.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:bt});if(g)throw g;return!E||!E.session||!E.user?{data:{user:null,session:null},error:new Pn}:(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),{data:Object.assign({},E),error:g})}catch(E){if(J(E))return{data:{user:null,session:null},error:E};throw E}}async _exchangeCodeForSession(t){const r=await An(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(r??"").split("/");try{const{data:i,error:l}=await ee(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:bt});if(await Rn(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Pn}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:l})}catch(i){if(J(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:s,token:a,access_token:i,nonce:l}=t,o=await ee(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:bt}),{data:d,error:c}=o;return c?{data:{user:null,session:null},error:c}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new Pn}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:c})}catch(r){if(J(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,s,a,i,l;try{if("email"in t){const{email:o,options:d}=t;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await _r(this.storage,this.storageKey));const{error:m}=await ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},create_user:(s=d==null?void 0:d.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in t){const{phone:o,options:d}=t,{data:c,error:u}=await ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(a=d==null?void 0:d.data)!==null&&a!==void 0?a:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Dn("You must provide either an email or phone number.")}catch(o){if(J(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(t){var r,s;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:l,error:o}=await ee(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:bt});if(o)throw o;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,c=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:c,session:d},error:null}}catch(a){if(J(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,s,a;try{let i=null,l=null;return this.flowType==="pkce"&&([i,l]=await _r(this.storage,this.storageKey)),await ee(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:Tx})}catch(i){if(J(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;if(s)throw s;if(!r)throw new $t;const{error:a}=await ee(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(J(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:s,type:a,options:i}=t,{error:l}=await ee(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:s,type:a,options:i}=t,{data:l,error:o}=await ee(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:o}}throw new Dn("You must provide either an email or phone number and a type")}catch(r){if(J(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await An(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<vi:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.storage.isServer){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(d,c,u)=>(!l&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,c,u))})}return{data:{session:t},error:null}}const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ft}):await this._useSession(async r=>{var s,a,i;const{data:l,error:o}=r;if(o)throw o;return!(!((s=l.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new $t}:await ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Ft})})}catch(r){if(J(r))return tx(r)&&(await this._removeSession(),await Rn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async s=>{const{data:a,error:i}=s;if(i)throw i;if(!a.session)throw new $t;const l=a.session;let o=null,d=null;this.flowType==="pkce"&&t.email!=null&&([o,d]=await _r(this.storage,this.storageKey));const{data:c,error:u}=await ee(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:d}),jwt:l.access_token,xform:Ft});if(u)throw u;return l.user=c.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(s){if(J(s))return{data:{user:null},error:s};throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new $t;const r=Date.now()/1e3;let s=r,a=!0,i=null;const{payload:l}=bi(t.access_token);if(l.exp&&(s=l.exp,a=s<=r),a){const{session:o,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:d}=await this._getUser(t.access_token);if(d)throw d;i={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(J(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var s;if(!t){const{data:l,error:o}=r;if(o)throw o;t=(s=l.session)!==null&&s!==void 0?s:void 0}if(!(t!=null&&t.refresh_token))throw new $t;const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(J(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!lt())throw new On("No browser detected.");if(t.error||t.error_description||t.error_code)throw new On(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Qd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new On("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Qd("No code detected.");const{data:f,error:h}=await this._exchangeCodeForSession(t.code);if(h)throw h;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:f.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:i,refresh_token:l,expires_in:o,expires_at:d,token_type:c}=t;if(!i||!o||!l||!c)throw new On("No session defined in URL");const u=Math.round(Date.now()/1e3),m=parseInt(o);let x=u+m;d&&(x=parseInt(d));const v=x-u;v*1e3<=Er&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${m}s`);const k=x-m;u-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,x,u):u-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,x,u);const{data:y,error:E}=await this._getUser(i);if(E)throw E;const g={provider_token:s,provider_refresh_token:a,access_token:i,expires_in:m,expires_at:x,refresh_token:l,token_type:c,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:t.type},error:null}}catch(s){if(J(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await An(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return{error:i};const l=(s=a.session)===null||s===void 0?void 0:s.access_token;if(l){const{error:o}=await this.admin.signOut(l,t);if(o&&!(ex(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return t!=="others"&&(await this._removeSession(),await Rn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=ux(),s={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async r=>{var s,a;try{const{data:{session:i},error:l}=r;if(l)throw l;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await _r(this.storage,this.storageKey,!0));try{return await ee(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(J(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(J(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:s,error:a}=await this._useSession(async i=>{var l,o,d,c,u;const{data:m,error:x}=i;if(x)throw x;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await ee(this.fetch,"GET",v,{headers:this.headers,jwt:(u=(c=m.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return lt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:t.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(J(s))return{data:{provider:t.provider,url:null},error:s};throw s}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var s,a;const{data:i,error:l}=r;if(l)throw l;return await ee(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(J(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await mx(async a=>(a>0&&await gx(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await ee(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:bt})),(a,i)=>{const l=200*Math.pow(2,a);return i&&wi(i)&&Date.now()+l-s<Er})}catch(s){if(this._debug(r,"error",s),J(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",s),lt()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await An(this.storage,this.storageKey);if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const a=((t=s.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<vi;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${vi}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),wi(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,s;if(!t)throw new $t;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Fa;const{data:i,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!i.session)throw new $t;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(a,"error",i),J(i)){const l={session:null,error:i};return wi(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,s=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,r)}catch(d){i.push(d)}});if(await Promise.all(l),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Hh(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await Rn(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&lt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Er);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-t)/Er);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Er}ms, refresh threshold is ${bl} ticks`),a<=bl&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Bh)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!lt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,s){const a=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,l]=await _r(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});a.push(o.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);a.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;return i?{data:null,error:i}:await ee(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(J(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var s,a;const{data:i,error:l}=r;if(l)return{data:null,error:l};const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:d,error:c}=await ee(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&(!((a=d==null?void 0:d.totp)===null||a===void 0)&&a.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(r){if(J(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return{data:null,error:i};const{data:l,error:o}=await ee(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:o})})}catch(r){if(J(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;return i?{data:null,error:i}:await ee(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(J(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:s}=await this._challenge({factorId:t.factorId});return s?{data:null,error:s}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const s=(t==null?void 0:t.factors)||[],a=s.filter(l=>l.factor_type==="totp"&&l.status==="verified"),i=s.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:s,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,s;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=bi(a.access_token);let o=null;l.aal&&(o=l.aal);let d=o;((s=(r=a.user.factors)===null||r===void 0?void 0:r.filter(m=>m.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(d="aal2");const u=l.amr||[];return{data:{currentLevel:o,nextLevel:d,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,r={keys:[]}){let s=r.keys.find(l=>l.kid===t);if(s||(s=this.jwks.keys.find(l=>l.kid===t),s&&this.jwks_cached_at+Xm>Date.now()))return s;const{data:a,error:i}=await ee(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!a.keys||a.keys.length===0)throw new As("JWKS is empty");if(this.jwks=a,this.jwks_cached_at=Date.now(),s=a.keys.find(l=>l.kid===t),!s)throw new As("No matching signing key found in JWKS");return s}async getClaims(t,r={keys:[]}){try{let s=t;if(!s){const{data:v,error:k}=await this.getSession();if(k||!v.session)return{data:null,error:k};s=v.session.access_token}const{header:a,payload:i,signature:l,raw:{header:o,payload:d}}=bi(s);if(kx(i.exp),!a.kid||a.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:v}=await this.getUser(s);if(v)throw v;return{data:{claims:i,header:a,signature:l},error:null}}const c=jx(a.alg),u=await this.fetchJwk(a.kid,r),m=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,m,l,ox(`${o}.${d}`)))throw new As("Invalid JWT signature");return{data:{claims:i,header:a,signature:l},error:null}}catch(s){if(J(s))return{data:null,error:s};throw s}}}Zs.nextInstanceID=0;const zx=Zs;class qx extends zx{constructor(t){super(t)}}var Fx=function(e,t,r,s){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(s.next(u))}catch(m){l(m)}}function d(u){try{c(s.throw(u))}catch(m){l(m)}}function c(u){u.done?i(u.value):a(u.value).then(o,d)}c((s=s.apply(e,t||[])).next())})};class Hx{constructor(t,r,s){var a,i,l;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const o=Vm(t),d=new URL(o);this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const c=`sb-${d.hostname.split(".")[0]}-auth-token`,u={db:Im,realtime:zm,auth:Object.assign(Object.assign({},Um),{storageKey:c}),global:Mm},m=Gm(s??{},u);this.storageKey=(a=m.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=m.global.headers)!==null&&i!==void 0?i:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(x,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=m.auth)!==null&&l!==void 0?l:{},this.headers,m.global.fetch),this.fetch=Bm(r,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.rest=new im(new URL("rest/v1",d).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),m.accessToken||this._listenForAuthEvents()}get functions(){return new $g(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Rm(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},s={}){return this.rest.rpc(t,r,s)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return Fx(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(r=(t=s.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:s,storage:a,storageKey:i,flowType:l,lock:o,debug:d},c,u){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new qx({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),c),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:s,storage:a,flowType:l,lock:o,debug:d,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new bm(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(t,r,s){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Bx=(e,t,r)=>new Hx(e,t,r),Wx="https://gfxphdzbawtuincogots.supabase.co",Vx="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdmeHBoZHpiYXd0dWluY29nb3RzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIxNTY5MTYsImV4cCI6MjA2NzczMjkxNn0.UO0Z-zPjyf0wzXW7XEjVHFygXVfg7o15-1RJaBhIJV4",R=Bx(Wx,Vx),Wh=T.createContext({user:null,session:null,loading:!0,signOut:async()=>{}}),at=()=>{const e=T.useContext(Wh);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Gx=({children:e})=>{const[t,r]=T.useState(null),[s,a]=T.useState(null),[i,l]=T.useState(!0);T.useEffect(()=>{R.auth.getSession().then(({data:{session:c}})=>{a(c),r((c==null?void 0:c.user)??null),l(!1)});const{data:{subscription:d}}=R.auth.onAuthStateChange(async(c,u)=>{a(u),r((u==null?void 0:u.user)??null),l(!1)});return()=>d.unsubscribe()},[]);const o=async()=>{await R.auth.signOut()};return n.jsx(Wh.Provider,{value:{user:t,session:s,loading:i,signOut:o},children:e})},Vh=T.createContext({isDark:!0,toggleTheme:()=>{}}),Gh=()=>{const e=T.useContext(Vh);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},Qx=({children:e})=>{const[t,r]=T.useState(!0);T.useEffect(()=>{const a=localStorage.getItem("theme");r(a?a==="dark":!0)},[]),T.useEffect(()=>{localStorage.setItem("theme",t?"dark":"light"),t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]);const s=()=>{r(!t)};return n.jsx(Vh.Provider,{value:{isDark:t,toggleTheme:s},children:e})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Kx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Q=(e,t)=>{const r=T.forwardRef(({color:s="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:o="",children:d,...c},u)=>T.createElement("svg",{ref:u,...Kx,width:a,height:a,stroke:s,strokeWidth:l?Number(i)*24/Number(a):i,className:["lucide",`lucide-${Jx(e)}`,o].join(" "),...c},[...t.map(([m,x])=>T.createElement(m,x)),...Array.isArray(d)?d:[d]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=Q("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nl=Q("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=Q("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=Q("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=Q("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=Q("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=Q("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=Q("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _l=Q("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=Q("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=Q("CloudSun",[["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}],["path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128",key:"dpwdj0"}],["path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z",key:"s09mg5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=Q("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xx=Q("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=Q("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=Q("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=Q("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=Q("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=Q("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=Q("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=Q("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=Q("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=Q("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nc=Q("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=Q("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=Q("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=Q("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=Q("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ly=Q("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=Q("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oy=Q("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=Q("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dy=Q("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=Q("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sl=Q("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=Q("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=Q("Sunrise",[["path",{d:"M12 2v8",key:"1q4o3n"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0=Q("Sunset",[["path",{d:"M12 10V2",key:"16sf7g"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m16 6-4 4-4-4",key:"6wukr"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=Q("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=Q("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=Q("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=Q("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=Q("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=Q("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=Q("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cy=Q("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=Q("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=Q("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),hy=()=>{const[e,t]=T.useState(!1),[r,s]=T.useState(""),[a,i]=T.useState(""),[l,o]=T.useState(""),[d,c]=T.useState(!1),[u,m]=T.useState(!1),[x,v]=T.useState(""),k=async y=>{y.preventDefault(),c(!0),v("");try{if(e){const{error:E}=await R.auth.signUp({email:r,password:a,options:{data:{full_name:l}}});if(E)throw E;v("Check your email for the confirmation link!")}else{const{error:E}=await R.auth.signInWithPassword({email:r,password:a});if(E)throw E}}catch(E){v(E.message)}finally{c(!1)}};return n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-emerald-900 via-teal-900 to-cyan-900 flex items-center justify-center p-4",children:[n.jsx("div",{className:`absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%23ffffff" fill-opacity="0.05"%3E%3Cpath d="M30 30c0-11.046-8.954-20-20-20s-20 8.954-20 20 8.954 20 20 20 20-8.954 20-20zm0 0c0 11.046 8.954 20 20 20s20-8.954 20-20-8.954-20-20-20-20 8.954-20 20z"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E')] opacity-20`}),n.jsx("div",{className:"relative w-full max-w-md",children:n.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-2xl border border-white/20 p-8",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-emerald-400 to-teal-400 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:n.jsx(Jh,{className:"w-8 h-8 text-white"})}),n.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Life Tracker"}),n.jsx("p",{className:"text-emerald-100 text-sm",children:e?"Create your account":"Welcome back"})]}),n.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-emerald-100 text-sm font-medium mb-2",children:"Full Name"}),n.jsxs("div",{className:"relative",children:[n.jsx(At,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-emerald-300"}),n.jsx("input",{type:"text",value:l,onChange:y=>o(y.target.value),className:"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-emerald-200 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:border-transparent",placeholder:"Enter your full name",required:e})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-emerald-100 text-sm font-medium mb-2",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(sy,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-emerald-300"}),n.jsx("input",{type:"email",value:r,onChange:y=>s(y.target.value),className:"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-emerald-200 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:border-transparent",placeholder:"Enter your email",required:!0})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-emerald-100 text-sm font-medium mb-2",children:"Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(Yh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-emerald-300"}),n.jsx("input",{type:u?"text":"password",value:a,onChange:y=>i(y.target.value),className:"w-full pl-10 pr-12 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-emerald-200 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:border-transparent",placeholder:"Enter your password",required:!0}),n.jsx("button",{type:"button",onClick:()=>m(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-emerald-300 hover:text-emerald-200",children:u?n.jsx(Zx,{className:"w-5 h-5"}):n.jsx(ey,{className:"w-5 h-5"})})]})]}),x&&n.jsx("div",{className:`p-3 rounded-lg text-sm ${x.includes("Check your email")?"bg-emerald-500/20 text-emerald-100 border border-emerald-400/30":"bg-red-500/20 text-red-100 border border-red-400/30"}`,children:x}),n.jsx("button",{type:"submit",disabled:d,className:"w-full bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 text-white font-medium py-3 px-4 rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Loading...":e?"Create Account":"Sign In"})]}),n.jsx("div",{className:"mt-6 text-center",children:n.jsx("button",{onClick:()=>t(!e),className:"text-emerald-200 hover:text-emerald-100 text-sm transition-colors",children:e?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})})]})},ic=({setActiveTab:e})=>{var u;const{user:t}=at(),{isDark:r}=Gh(),[s,a]=T.useState({studyHoursToday:0,prayersCompleted:0,totalPrayers:5,habitStreak:0,nextExamDays:0,quranReadToday:0,quranDailyGoal:2}),[i,l]=T.useState([]),o=new Date().toLocaleDateString("en-US",{weekday:"long"}),d=["Saturday","Sunday","Monday","Tuesday","Wednesday"].includes(o);T.useEffect(()=>{t&&c()},[t]);const c=async()=>{if(!t)return;const m=new Date().toISOString().split("T")[0],x=new Date().toLocaleDateString("en-US",{weekday:"long"});try{const{data:v}=await R.from("study_sessions").select("duration").eq("user_id",t.id).eq("date",m),k=(v==null?void 0:v.reduce((L,C)=>L+C.duration,0))||0,{data:y}=await R.from("prayer_records").select("*").eq("user_id",t.id).eq("date",m),E=(y==null?void 0:y.length)||0,{data:g}=await R.from("habits").select("streak").eq("user_id",t.id).eq("type","good"),f=g&&g.length>0?Math.max(...g.map(L=>L.streak)):0,{data:h}=await R.from("exams").select("date").eq("user_id",t.id).gte("date",m).order("date",{ascending:!0}).limit(1);let w=0;if(h&&h.length>0){const L=new Date(h[0].date),C=new Date,D=L.getTime()-C.getTime();w=Math.ceil(D/(1e3*60*60*24))}const{data:b}=await R.from("class_schedules").select("*").eq("user_id",t.id).eq("day",x).order("time"),{data:S}=await R.from("quran_readings").select("pages").eq("user_id",t.id).eq("date",m),P=(S==null?void 0:S.reduce((L,C)=>L+C.pages,0))||0;a({studyHoursToday:k,prayersCompleted:E,totalPrayers:5,habitStreak:f,nextExamDays:w,quranReadToday:P,quranDailyGoal:2}),l(b||[])}catch(v){console.error("Error loading dashboard data:",v)}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:["Welcome back, ",((u=t==null?void 0:t.user_metadata)==null?void 0:u.full_name)||"User"]}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Let's make today productive and meaningful"})]}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-emerald-600 p-6 rounded-xl text-white shadow-lg",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-emerald-100",children:"Study Hours Today"}),n.jsxs("p",{className:"text-2xl font-bold",children:[s.studyHoursToday,"h"]})]}),n.jsx(De,{className:"w-8 h-8 text-emerald-200"})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("div",{className:"bg-emerald-400 rounded-full h-2",children:n.jsx("div",{className:"bg-white rounded-full h-2",style:{width:`${Math.min(s.studyHoursToday/6*100,100)}%`}})}),n.jsxs("p",{className:"text-xs text-emerald-100 mt-1",children:[Math.round(s.studyHoursToday/6*100),"% of daily goal"]})]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-teal-500 to-teal-600 p-6 rounded-xl text-white shadow-lg",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-teal-100",children:"Prayers Completed"}),n.jsxs("p",{className:"text-2xl font-bold",children:[s.prayersCompleted,"/",s.totalPrayers]})]}),n.jsx(Et,{className:"w-8 h-8 text-teal-200"})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("div",{className:"bg-teal-400 rounded-full h-2",children:n.jsx("div",{className:"bg-white rounded-full h-2",style:{width:`${s.prayersCompleted/s.totalPrayers*100}%`}})}),n.jsx("p",{className:"text-xs text-teal-100 mt-1",children:s.prayersCompleted===5?"All completed!":"Keep going!"})]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 p-6 rounded-xl text-white shadow-lg",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-amber-100",children:"Habit Streak"}),n.jsx("p",{className:"text-2xl font-bold",children:s.habitStreak})]}),n.jsx(Kh,{className:"w-8 h-8 text-amber-200"})]}),n.jsx("div",{className:"mt-4",children:n.jsx("p",{className:"text-xs text-amber-100",children:"Days consistent"})})]}),n.jsxs("div",{className:"bg-gradient-to-r from-rose-500 to-pink-500 p-6 rounded-xl text-white shadow-lg",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-rose-100",children:"Exam in"}),n.jsx("p",{className:"text-2xl font-bold",children:s.nextExamDays||"None"})]}),n.jsx(cn,{className:"w-8 h-8 text-rose-200"})]}),n.jsx("div",{className:"mt-4",children:n.jsx("p",{className:"text-xs text-rose-100",children:s.nextExamDays>0?"Days remaining":"No upcoming exams"})})]})]}),d&&n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Today's Classes"}),n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[n.jsx(et,{className:"w-4 h-4"}),n.jsx("span",{children:o})]})]}),n.jsx("div",{className:"space-y-3",children:i.length>0?i.map((m,x)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg border border-emerald-200 dark:border-emerald-800",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-3 h-3 bg-emerald-500 rounded-full"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:m.subject}),n.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[m.instructor,"  ",m.location]})]})]}),n.jsx("div",{className:"text-right",children:n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:m.time})})]},x)):n.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[n.jsx(et,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),n.jsx("p",{children:"No classes scheduled for today"}),n.jsx("p",{className:"text-sm mt-1",children:"Add your class schedule to see it here"})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Today's Progress"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-8 h-8 bg-emerald-100 dark:bg-emerald-900 rounded-full flex items-center justify-center",children:n.jsx(De,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),n.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Study Session"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-32 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:n.jsx("div",{className:"bg-emerald-600 h-2 rounded-full",style:{width:`${Math.min(s.studyHoursToday/6*100,100)}%`}})}),n.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Math.round(s.studyHoursToday/6*100),"%"]})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-8 h-8 bg-teal-100 dark:bg-teal-900 rounded-full flex items-center justify-center",children:n.jsx(Et,{className:"w-4 h-4 text-teal-600 dark:text-teal-400"})}),n.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Daily Prayers"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-32 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:n.jsx("div",{className:"bg-teal-600 h-2 rounded-full",style:{width:`${s.prayersCompleted/s.totalPrayers*100}%`}})}),n.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Math.round(s.prayersCompleted/s.totalPrayers*100),"%"]})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-8 h-8 bg-amber-100 dark:bg-amber-900 rounded-full flex items-center justify-center",children:n.jsx(ts,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"})}),n.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Quran Reading"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-32 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:n.jsx("div",{className:"bg-amber-600 h-2 rounded-full",style:{width:`${Math.min(s.quranReadToday/s.quranDailyGoal*100,100)}%`}})}),n.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Math.round(s.quranReadToday/s.quranDailyGoal*100),"%"]})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 dark:bg-indigo-900 rounded-full flex items-center justify-center",children:n.jsx(Xe,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"})}),n.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Sleep Goal"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-32 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:n.jsx("div",{className:"bg-indigo-600 h-2 rounded-full w-0"})}),n.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"0%"})]})]})]})]})}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Quick Actions"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("button",{onClick:()=>e("study"),className:"w-full bg-emerald-50 dark:bg-emerald-900/20 hover:bg-emerald-100 dark:hover:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 py-3 px-4 rounded-lg transition-all duration-200 flex items-center space-x-2 hover:shadow-sm",children:[n.jsx(De,{className:"w-4 h-4"}),n.jsx("span",{children:"Start Study Session"})]}),n.jsxs("button",{onClick:()=>e("prayer"),className:"w-full bg-teal-50 dark:bg-teal-900/20 hover:bg-teal-100 dark:hover:bg-teal-900/30 text-teal-700 dark:text-teal-400 py-3 px-4 rounded-lg transition-all duration-200 flex items-center space-x-2 hover:shadow-sm",children:[n.jsx(Et,{className:"w-4 h-4"}),n.jsx("span",{children:"Log Prayer"})]}),n.jsxs("button",{onClick:()=>e("habits"),className:"w-full bg-amber-50 dark:bg-amber-900/20 hover:bg-amber-100 dark:hover:bg-amber-900/30 text-amber-700 dark:text-amber-400 py-3 px-4 rounded-lg transition-all duration-200 flex items-center space-x-2 hover:shadow-sm",children:[n.jsx(gt,{className:"w-4 h-4"}),n.jsx("span",{children:"Update Habits"})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Recent Achievements"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("button",{onClick:()=>e("achievements"),className:"w-full flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-left",children:[n.jsx("div",{className:"w-8 h-8 bg-yellow-100 dark:bg-yellow-900 rounded-full flex items-center justify-center",children:n.jsx(hn,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:"Getting Started"}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Welcome to Life Tracker!"})]})]}),n.jsxs("button",{onClick:()=>e("achievements"),className:"w-full flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-left",children:[n.jsx("div",{className:"w-8 h-8 bg-emerald-100 dark:bg-emerald-900 rounded-full flex items-center justify-center",children:n.jsx(De,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:"First Steps"}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Start tracking to unlock achievements"})]})]})]})]})]})]})]})},fy=[{id:"dashboard",label:"Dashboard",icon:ty},{id:"study",label:"Study Tracker",icon:De},{id:"prayer",label:"Prayer Tracker",icon:Et},{id:"quran",label:"Quran Tracker",icon:ts},{id:"habits",label:"Habit Tracker",icon:gt},{id:"exam",label:"Exam Countdown",icon:cn},{id:"routine",label:"Classes",icon:et},{id:"sleep",label:"Sleep Tracker",icon:Xe},{id:"achievements",label:"Achievements",icon:en},{id:"profile",label:"Profile",icon:At}],gy=({activeTab:e,setActiveTab:t})=>{var o;const{signOut:r,user:s}=at(),{isDark:a,toggleTheme:i}=Gh(),l=async()=>{await r()};return n.jsxs("div",{className:"fixed left-0 top-0 h-full w-64 bg-white dark:bg-gray-900 shadow-lg z-10 border-r border-gray-200 dark:border-gray-700 flex flex-col",children:[n.jsxs("div",{className:"flex-1 flex flex-col p-6 min-h-0",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-8",children:[n.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-lg flex items-center justify-center",children:n.jsx(Jh,{className:"w-5 h-5 text-white"})}),n.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Life Tracker"})]}),n.jsx("nav",{className:`space-y-2 overflow-y-auto flex-1 min-h-0 sidebar-scrollbar${a?" dark":""}`,children:fy.map(d=>{const c=d.icon;return n.jsxs("button",{onClick:()=>t(d.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${e===d.id?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 border-r-2 border-emerald-600 dark:border-emerald-400":"text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[n.jsx(c,{className:"w-5 h-5"}),n.jsx("span",{className:"font-medium",children:d.label})]},d.id)})})]}),n.jsx("div",{className:"px-6 pb-6 space-y-4",children:n.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[n.jsx("div",{className:"w-8 h-8 bg-emerald-100 dark:bg-emerald-900 rounded-full flex items-center justify-center",children:n.jsx(At,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white truncate",children:((o=s==null?void 0:s.user_metadata)==null?void 0:o.full_name)||"User"}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:s==null?void 0:s.email})]})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs("button",{onClick:i,className:"flex-1 flex items-center justify-center space-x-2 px-3 py-2 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg transition-colors",children:[a?n.jsx(Eo,{className:"w-4 h-4"}):n.jsx(Xe,{className:"w-4 h-4"}),n.jsx("span",{children:a?"Light":"Dark"})]}),n.jsxs("button",{onClick:l,className:"flex-1 flex items-center justify-center space-x-2 px-3 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:[n.jsx(ry,{className:"w-4 h-4"}),n.jsx("span",{children:"Sign Out"})]})]})]})})]})},my=()=>{const{user:e}=at(),[t,r]=T.useState(!1),[s,a]=T.useState(0),[i,l]=T.useState(""),[o,d]=T.useState(6),[c,u]=T.useState(0),[m,x]=T.useState([]),[v,k]=T.useState([]),[y,E]=T.useState(!1),[g,f]=T.useState(""),[h,w]=T.useState(null),[b,S]=T.useState(null);T.useEffect(()=>{e&&P()},[e]),T.useEffect(()=>{let j=null;return t?(j=setInterval(()=>{a(U=>U+1)},1e3),w(j)):h&&(clearInterval(h),w(null)),()=>{j&&clearInterval(j)}},[t]);const P=async()=>{if(!e)return;const j=new Date().toISOString().split("T")[0],{data:U}=await R.from("study_sessions").select("duration").eq("user_id",e.id).eq("date",j);if(U){const A=U.reduce((H,B)=>H+B.duration,0);u(A)}const G=new Date;G.setDate(G.getDate()-G.getDay());const{data:_}=await R.from("study_sessions").select("date, duration").eq("user_id",e.id).gte("date",G.toISOString().split("T")[0]);if(_){const A=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],H=A.map(B=>({day:B,hours:_.filter(K=>new Date(K.date).getDay()===A.indexOf(B)).reduce((K,Y)=>K+Y.duration,0)}));k(H)}const{data:M}=await R.from("study_sessions").select("subject, duration").eq("user_id",e.id).gte("date",G.toISOString().split("T")[0]);if(M){const A=new Map;M.forEach(K=>{const Y=A.get(K.subject)||0;A.set(K.subject,Y+K.duration)});const H=["bg-blue-500","bg-green-500","bg-purple-500","bg-orange-500","bg-red-500"],B=Array.from(A.entries()).map(([K,Y],ve)=>({name:K,hours:Number(Y),color:H[ve%H.length]}));x(B)}},L=()=>{if(!i.trim()){alert("Please select or enter a subject first");return}r(!0),S(Date.now())},C=()=>{r(!1),S(null)},D=async()=>{if(!e||s===0)return;const j=new Date().toISOString().split("T")[0],U=s/3600,{error:G}=await R.from("study_sessions").insert({user_id:e.id,subject:i,duration:U,date:j,notes:`${Math.floor(s/3600)}h ${Math.floor(s%3600/60)}m session`});G||(a(0),r(!1),l(""),S(null),P())},O=()=>{g.trim()&&!m.find(j=>j.name===g)&&(x(j=>[...j,{name:g,hours:0,color:["bg-blue-500","bg-green-500","bg-purple-500","bg-orange-500","bg-red-500"][j.length%5]}]),f(""),E(!1))},F=()=>s;return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Study Tracker"}),n.jsxs("button",{onClick:()=>E(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[n.jsx(un,{className:"w-4 h-4"}),n.jsx("span",{children:"Add Subject"})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Current Session"}),n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[n.jsx(et,{className:"w-4 h-4"}),n.jsx("span",{children:t?"Active":"Paused"})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Subject"}),n.jsxs("select",{value:i,onChange:j=>l(j.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",disabled:t,children:[n.jsx("option",{value:"",children:"Select a subject"}),m.map(j=>n.jsx("option",{value:j.name,children:j.name},j.name))]})]}),n.jsxs("div",{className:"text-center mb-6",children:[n.jsxs("div",{className:"text-6xl font-bold text-gray-800 dark:text-white mb-2",children:[Math.floor(F()/3600),":",Math.floor(F()%3600/60).toString().padStart(2,"0"),":",(F()%60).toString().padStart(2,"0")]}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:i||"Select a subject to start"}),t&&n.jsx("p",{className:"text-sm text-green-600 dark:text-green-400 mt-2",children:"Session in progress..."})]}),n.jsxs("div",{className:"flex justify-center space-x-4 mb-6",children:[t?n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:C,className:"px-8 py-3 bg-yellow-100 text-yellow-700 hover:bg-yellow-200 rounded-lg font-medium flex items-center space-x-2 transition-colors",children:[n.jsx(ay,{className:"w-5 h-5"}),n.jsx("span",{children:"Pause"})]}),n.jsx("button",{onClick:D,className:"px-8 py-3 bg-blue-100 text-blue-700 hover:bg-blue-200 rounded-lg font-medium transition-colors",children:"End Session"})]}):n.jsxs("button",{onClick:L,disabled:!i,className:"px-8 py-3 bg-green-100 text-green-700 hover:bg-green-200 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg font-medium flex items-center space-x-2 transition-colors",children:[n.jsx(ly,{className:"w-5 h-5"}),n.jsx("span",{children:"Start"})]}),n.jsx("button",{onClick:()=>{a(0),r(!1),S(null)},className:"px-8 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Reset"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[c.toFixed(1),"h"]}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Today's Total"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[o,"h"]}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Daily Goal"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:[Math.round(c/o*100),"%"]}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Progress"})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Daily Progress"}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-300 mb-2",children:[n.jsx("span",{children:"Progress towards daily goal"}),n.jsxs("span",{children:[c.toFixed(1),"/",o," hours"]})]}),n.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:n.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-300",style:{width:`${Math.min(c/o*100,100)}%`}})})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Subject Breakdown"}),n.jsx("div",{className:"space-y-4",children:m.length>0?m.map(j=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:`w-4 h-4 rounded-full ${j.color}`}),n.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:j.name})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-sm font-medium text-gray-800 dark:text-white",children:[j.hours.toFixed(1),"h"]}),n.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"this week"})]})]},j.name)):n.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[n.jsx(De,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),n.jsx("p",{children:"No subjects added yet"}),n.jsx("p",{className:"text-sm mt-1",children:"Add subjects to track your study progress"})]})})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Weekly Overview"}),n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[n.jsx(hn,{className:"w-4 h-4"}),n.jsxs("span",{children:[v.reduce((j,U)=>j+U.hours,0).toFixed(1),"h total"]})]})]}),n.jsx("div",{className:"grid grid-cols-7 gap-2",children:v.map(j=>n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:j.day}),n.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg p-3",children:n.jsxs("div",{className:"text-sm font-medium text-gray-800 dark:text-white",children:[j.hours.toFixed(1),"h"]})})]},j.day))})]}),y&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Add Subject"}),n.jsx("button",{onClick:()=>E(!1),className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:n.jsx(Ne,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Subject Name"}),n.jsx("input",{type:"text",value:g,onChange:j=>f(j.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Mathematics, Physics, etc."})]}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{onClick:()=>E(!1),className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:O,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Add Subject"})]})]})]})})]})},xy=()=>{const{user:e}=at(),t=[{name:"Fajr",time:"05:00",completed:!1,type:null,icon:Zh},{name:"Dhuhr",time:"12:00",completed:!1,type:null,icon:Eo},{name:"Asr",time:"16:00",completed:!1,type:null,icon:Yx},{name:"Maghrib",time:"18:00",completed:!1,type:null,icon:e0},{name:"Isha",time:"20:00",completed:!1,type:null,icon:Xe}],[r,s]=T.useState(t),[a,i]=T.useState(!1),[l,o]=T.useState(null),[d,c]=T.useState(""),[u,m]=T.useState(0),[x,v]=T.useState(0),[k,y]=T.useState(null),[E,g]=T.useState({totalPrayers:0,totalPossible:35,withJamat:0,consistency:0,bestStreak:0,personalBest:0}),[f,h]=T.useState([]),[w,b]=T.useState(!1);T.useEffect(()=>{e&&(s(t),L(),S())},[e]);const S=async()=>{if(!e)return;console.log("Testing database connection...");const{data:N,error:I}=await R.from("missed_prayers").select("count").eq("user_id",e.id).limit(1);console.log("Database connection test:",{data:N,error:I})},P=async()=>{if(!e)return;const N=new Date().toISOString().split("T")[0];console.log("Clearing all prayers for today:",N);try{const{error:I}=await R.from("prayer_records").delete().eq("user_id",e.id).eq("date",N);console.log("Clear regular prayers result:",{error:I});const{error:z}=await R.from("missed_prayers").delete().eq("user_id",e.id).eq("missed_date",N);console.log("Clear kaza prayers result:",{error:z}),await L()}catch(I){console.error("Error clearing prayers:",I)}},L=async()=>{if(e)try{const[N,I,z,W]=await Promise.all([F(),j(),U(),G()]);if(N){const X=t.map(Z=>{const V=N.find(ne=>ne.prayer_name===Z.name);return{...Z,completed:!!V,type:(V==null?void 0:V.prayer_type)||null}});s(X)}await _()}catch(N){console.error("Error loading prayer data:",N)}},C=(N,I)=>{o(N),c(I)},D=N=>{s(I=>I.map(z=>z.name===N?{...z,time:d}:z)),o(null),c("")},O=()=>{o(null),c("")},F=async()=>{if(!e)return null;const N=new Date().toISOString().split("T")[0];console.log("Loading today's prayers for date:",N);const{data:I,error:z}=await R.from("prayer_records").select("*").eq("user_id",e.id).eq("date",N);console.log("Regular prayers loaded:",I,"Error:",z);const{data:W,error:X}=await R.from("missed_prayers").select("*").eq("user_id",e.id).eq("missed_date",N);console.log("Kaza prayers loaded:",W,"Error:",X);const Z=[...I||[],...(W||[]).map(V=>({...V,prayer_type:"kaza",date:V.missed_date,time:V.completed_time||V.prayer_time,completed:V.is_completed}))];return console.log("Combined prayers for today:",Z),Z},j=async()=>{if(!e)return;const N=new Date;N.setDate(N.getDate()-N.getDay());const I=N.toISOString().split("T")[0],z=new Date(N);z.setDate(z.getDate()+6);const W=z.toISOString().split("T")[0],{data:X,error:Z}=await R.from("prayer_records").select("*").eq("user_id",e.id).gte("date",I).lte("date",W);if(X){const V=X.filter(Ba=>Ba.prayer_type!=="kaza"),ne=V.length,fe=35,Ha=V.filter(Ba=>Ba.prayer_type==="jamat").length,t0=Math.round(ne/fe*100);g({totalPrayers:ne,totalPossible:fe,withJamat:Ha,consistency:t0,bestStreak:0,personalBest:0})}},U=async()=>{if(!e)return;const N=new Date;let I=0,z=new Date(N);for(;;){const V=z.toISOString().split("T")[0],{data:ne}=await R.from("prayer_records").select("*").eq("user_id",e.id).eq("date",V);if(ne&&ne.length>=5)I++,z.setDate(z.getDate()-1);else break}m(I);const W=new Date;W.setDate(1);const X=W.toISOString().split("T")[0],{data:Z}=await R.from("prayer_records").select("*").eq("user_id",e.id).gte("date",X);if(Z){const ne=new Date().getDate()*5,fe=Math.round(Z.length/ne*100);v(fe)}},G=async()=>{if(!e)return;const N=new Date;N.setDate(N.getDate()-30);const I=N.toISOString().split("T")[0],z=new Date().toISOString().split("T")[0];console.log("Loading kaza prayers from:",I,"to:",z);const{data:W,error:X}=await R.from("missed_prayers").select("*").eq("user_id",e.id).gte("missed_date",I).lte("missed_date",z).order("missed_date",{ascending:!1});if(console.log("Missed prayers data:",W,"Error:",X),W){const Z=W.map(V=>({id:V.id,prayer_name:V.prayer_name,date:V.missed_date,completed:V.is_completed,completed_date:V.completed_date,prayer_time:V.prayer_time}));console.log("Processed kaza prayers list:",Z),h(Z)}else h([])},_=async()=>{if(!e)return;const N=new Date().toISOString().split("T")[0],z=new Date().toTimeString().slice(0,5);for(const W of r)if(z>W.time){const{data:X}=await R.from("prayer_records").select("*").eq("user_id",e.id).eq("prayer_name",W.name).eq("date",N).single();if(!X){const{data:Z}=await R.from("missed_prayers").select("*").eq("user_id",e.id).eq("prayer_name",W.name).eq("missed_date",N).single();Z||await R.from("missed_prayers").insert({user_id:e.id,prayer_name:W.name,missed_date:N,prayer_time:W.time})}}},M=async(N,I)=>{var X;if(!e)return;const z=new Date().toISOString().split("T")[0],W=new Date().toTimeString().slice(0,5);console.log("Logging prayer:",{prayerName:N,type:I,today:z,now:W});try{if(I==="kaza"){const{data:Z,error:V}=await R.from("missed_prayers").upsert({user_id:e.id,prayer_name:N,missed_date:z,prayer_time:((X=r.find(ne=>ne.name===N))==null?void 0:X.time)||"00:00",is_completed:!1,completed_date:null,completed_time:null},{onConflict:"user_id,prayer_name,missed_date"}).select();if(console.log("Kaza prayer insert result:",{data:Z,error:V}),V){console.error("Error adding kaza prayer:",V);return}s(ne=>ne.map(fe=>fe.name===N?{...fe,completed:!0,type:I}:fe)),y(null),await G()}else{const{data:Z,error:V}=await R.from("prayer_records").upsert({user_id:e.id,prayer_name:N,prayer_type:I,date:z,time:W},{onConflict:"user_id,prayer_name,date"}).select();if(console.log("Regular prayer insert result:",{data:Z,error:V}),V){console.error("Error adding regular prayer:",V);return}s(ne=>ne.map(fe=>fe.name===N?{...fe,completed:!0,type:I}:fe)),y(null),await Promise.all([j(),U(),G()])}}catch(Z){console.error("Unexpected error logging prayer:",Z)}},A=async N=>{if(!e)return;const I=new Date().toISOString().split("T")[0],z=r.find(W=>W.name===N);console.log("Removing prayer:",{prayerName:N,type:z==null?void 0:z.type,today:I});try{if((z==null?void 0:z.type)==="kaza"){const{data:W,error:X}=await R.from("missed_prayers").delete().eq("user_id",e.id).eq("prayer_name",N).eq("missed_date",I);if(console.log("Kaza prayer delete result:",{data:W,error:X}),X){console.error("Error deleting kaza prayer:",X);return}s(Z=>Z.map(V=>V.name===N?{...V,completed:!1,type:null}:V)),await G()}else{const{data:W,error:X}=await R.from("prayer_records").delete().eq("user_id",e.id).eq("prayer_name",N).eq("date",I);if(console.log("Regular prayer delete result:",{data:W,error:X}),X){console.error("Error deleting regular prayer:",X);return}s(Z=>Z.map(V=>V.name===N?{...V,completed:!1,type:null}:V)),await Promise.all([j(),U(),G()])}}catch(W){console.error("Unexpected error removing prayer:",W)}},H=r.filter(N=>N.completed&&N.type!=="kaza").length,B=H/r.length*100,K=N=>{switch(N){case"jamat":return n.jsx(ac,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"});case"individual":return n.jsx(At,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"});case"kaza":return n.jsx(Ln,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"});default:return null}},Y=N=>{switch(N){case"jamat":return"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800";case"individual":return"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800";case"kaza":return"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800";default:return"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700"}},ve=async N=>{if(!e)return;const I=new Date().toISOString().split("T")[0],z=new Date().toTimeString().slice(0,5),{data:W,error:X}=await R.from("missed_prayers").update({is_completed:!0,completed_date:I,completed_time:z,updated_at:new Date().toISOString()}).eq("id",N.id).select();!X&&W&&(h(Z=>Z.map(V=>V.id===N.id?{...V,completed:!0,completed_date:I}:V)),await Promise.all([j(),U(),G()]))},p=async N=>{if(!e)return;const{error:I}=await R.from("missed_prayers").update({is_completed:!1,completed_date:null,completed_time:null,updated_at:new Date().toISOString()}).eq("id",N.id);I||(h(z=>z.map(W=>W.id===N.id?{...W,completed:!1,completed_date:void 0}:W)),await Promise.all([j(),U(),G()]))};return n.jsx(n.Fragment,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Prayer Tracker"}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("button",{onClick:P,className:"px-3 py-1 text-xs bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-md hover:bg-red-200 dark:hover:bg-red-900/30 transition-colors",children:"Clear Today"}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl p-6 text-white",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Today's Progress"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Et,{className:"w-5 h-5"}),n.jsxs("span",{className:"font-medium",children:[H,"/5"]})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex justify-between text-emerald-100 text-sm mb-2",children:[n.jsx("span",{children:"Daily prayers completed"}),n.jsxs("span",{children:[Math.round(B),"%"]})]}),n.jsx("div",{className:"w-full bg-emerald-400 rounded-full h-2",children:n.jsx("div",{className:"bg-white rounded-full h-2 transition-all duration-300",style:{width:`${B}%`}})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:u}),n.jsx("div",{className:"text-emerald-100 text-sm",children:"Day Streak"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[x,"%"]}),n.jsx("div",{className:"text-emerald-100 text-sm",children:"Monthly Progress"})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Daily Prayers"}),n.jsx("div",{className:"space-y-4",children:r.map(N=>{const I=N.icon;return n.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border-2 transition-all ${N.completed?Y(N.type):"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${N.completed?"bg-emerald-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400"}`,children:n.jsx(I,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("h4",{className:"font-medium text-gray-800 dark:text-white",children:N.name}),N.type&&K(N.type)]}),n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[n.jsx(et,{className:"w-4 h-4"}),l===N.name?n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"time",value:d,onChange:z=>c(z.target.value),className:"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white rounded-md px-2 py-1 text-sm"}),n.jsx("button",{onClick:()=>D(N.name),className:"w-6 h-6 rounded-full bg-green-100 dark:bg-green-900/20 text-green-600 dark:text-green-400 hover:bg-green-200 dark:hover:bg-green-900/30 flex items-center justify-center transition-colors",children:n.jsx(Xh,{className:"w-4 h-4"})}),n.jsx("button",{onClick:O,className:"w-6 h-6 rounded-full bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/30 flex items-center justify-center transition-colors",children:n.jsx(Ne,{className:"w-4 h-4"})})]}):n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx("span",{children:N.time}),n.jsx("button",{onClick:()=>C(N.name,N.time),className:"w-4 h-4 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 flex items-center justify-center transition-colors",children:n.jsx(iy,{className:"w-3 h-3"})})]}),N.type&&n.jsxs("span",{className:"capitalize",children:[" ",N.type==="jamat"?"With Jamat":N.type==="individual"?"Individual":"Kaza/Missed"]})]})]})]}),n.jsx("div",{className:"flex items-center space-x-2",children:N.completed?n.jsx("button",{onClick:()=>A(N.name),className:"w-8 h-8 rounded-full bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/30 flex items-center justify-center transition-colors",children:""}):n.jsx("button",{onClick:()=>y(N.name),className:"w-8 h-8 rounded-full border-2 border-gray-300 dark:border-gray-600 hover:border-emerald-500 dark:hover:border-emerald-400 flex items-center justify-center transition-colors",children:n.jsx(_l,{className:"w-4 h-4 text-gray-400"})})})]},N.name)})})]}),k&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:["Log ",k," Prayer"]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("button",{onClick:()=>M(k,"jamat"),className:"w-full flex items-center space-x-3 p-3 bg-emerald-50 dark:bg-emerald-900/20 hover:bg-emerald-100 dark:hover:bg-emerald-900/30 rounded-lg transition-colors",children:[n.jsx(ac,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"With Jamat"}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Prayed in congregation"})]})]}),n.jsxs("button",{onClick:()=>M(k,"individual"),className:"w-full flex items-center space-x-3 p-3 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors",children:[n.jsx(At,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Individual"}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Prayed alone"})]})]}),n.jsxs("button",{onClick:()=>M(k,"kaza"),className:"w-full flex items-center space-x-3 p-3 bg-orange-50 dark:bg-orange-900/20 hover:bg-orange-100 dark:hover:bg-orange-900/30 rounded-lg transition-colors",children:[n.jsx(Ln,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Mark as Missed"}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Add to kaza list for later completion"})]})]})]}),n.jsx("button",{onClick:()=>y(null),className:"w-full mt-4 px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Weekly Summary"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Total prayers"}),n.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[E.totalPrayers,"/",E.totalPossible]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"With Jamat"}),n.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[E.withJamat,"/",E.totalPossible]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Consistency"}),n.jsxs("span",{className:"font-medium text-emerald-600 dark:text-emerald-400",children:[E.consistency,"%"]})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Best Streak"}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-emerald-600 dark:text-emerald-400 mb-2",children:u}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Days of consistent prayers"}),n.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-2",children:"Current streak"})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Kaza Prayers (Last 30 Days)"}),n.jsx("button",{onClick:()=>b(!w),className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300",children:w?"Hide Details":"Show Details"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-300 mb-2",children:[n.jsx("span",{children:"Missed prayers"}),n.jsxs("span",{children:[f.filter(N=>!N.completed).length," remaining"]})]}),n.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:n.jsx("div",{className:"bg-orange-500 h-2 rounded-full transition-all duration-300",style:{width:`${f.filter(N=>N.completed).length/Math.max(f.length,1)*100}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[f.filter(N=>N.completed).length," of ",f.length," completed"]})]}),w&&n.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:f.length>0?f.map(N=>n.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${N.completed?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800"}`,children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${N.completed?"bg-green-500 text-white":"bg-orange-500 text-white"}`,children:n.jsx(Ln,{className:"w-4 h-4"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:N.prayer_name}),n.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Missed on ",new Date(N.date).toLocaleDateString(),N.completed&&n.jsxs("span",{className:"ml-2 text-green-600 dark:text-green-400",children:[" Completed on ",new Date(N.completed_date).toLocaleDateString()]})]})]})]}),n.jsx("div",{className:"flex items-center space-x-2",children:N.completed?n.jsx("button",{onClick:()=>p(N),className:"w-6 h-6 rounded-full bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/30 flex items-center justify-center transition-colors",title:"Mark as incomplete",children:""}):n.jsx("button",{onClick:()=>ve(N),className:"w-6 h-6 rounded-full bg-green-100 dark:bg-green-900/20 text-green-600 dark:text-green-400 hover:bg-green-200 dark:hover:bg-green-900/30 flex items-center justify-center transition-colors",title:"Mark as completed",children:""})})]},N.id)):n.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[n.jsx(Ln,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),n.jsx("p",{children:"No missed prayers in the last 30 days"}),n.jsx("p",{className:"text-sm mt-1",children:"Great job keeping up with your prayers!"})]})})]})]})})},yy=()=>{const{user:e}=at(),[t,r]=T.useState(2),[s,a]=T.useState(0),[i,l]=T.useState(""),[o,d]=T.useState(0),[c,u]=T.useState(0),[m,x]=T.useState(0),[v,k]=T.useState([]),[y,E]=T.useState([]),[g,f]=T.useState({totalPages:0,totalSessions:0,averagePerDay:0,consistency:0}),[h,w]=T.useState(!1),[b,S]=T.useState(!1),[P,L]=T.useState(!1),[C,D]=T.useState(!1),[O,F]=T.useState({pages:1,surah:"",verses:"",notes:""}),[j,U]=T.useState({surah:"",verse:"",page:"",notes:""});yc.useEffect(()=>{e&&(G(),_(),M(),ve())},[e]);const G=async()=>{if(!e)return;const p=new Date().toISOString().split("T")[0],{data:N}=await R.from("quran_readings").select("pages").eq("user_id",e.id).eq("date",p);if(N){const X=N.reduce((Z,V)=>Z+V.pages,0);a(X)}const{data:I}=await R.from("quran_readings").select("*").eq("user_id",e.id).order("date",{ascending:!1});if(I&&(k(I),I.length>0)){l(I[0].surah);const X=I.reduce((Z,V)=>Z+V.pages,0);u(X)}const z=new Date;z.setDate(1);const{data:W}=await R.from("quran_readings").select("pages, date").eq("user_id",e.id).gte("date",z.toISOString().split("T")[0]);if(W){const X=W.reduce((fe,Ha)=>fe+Ha.pages,0),Z=W.length,V=new Date().getDate(),ne=X/V;f({totalPages:X,totalSessions:Z,averagePerDay:Math.round(ne*10)/10,consistency:Math.round(Z/V*100)})}},_=async()=>{if(!e)return;const p=new Date;let N=0,I=new Date(p);for(;;){const z=I.toISOString().split("T")[0],{data:W}=await R.from("quran_readings").select("*").eq("user_id",e.id).eq("date",z);if(W&&W.length>0)N++,I.setDate(I.getDate()-1);else break}x(N)},M=async()=>{if(!e)return;const{data:p}=await R.from("quran_bookmarks").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});p&&E(p)},A=async()=>{if(!e||O.pages<=0)return;const p=new Date().toISOString().split("T")[0];new Date().toTimeString().slice(0,5);const{error:N}=await R.from("quran_readings").insert({user_id:e.id,pages:O.pages,surah:O.surah,verses:O.verses,date:p,notes:O.notes});N||(w(!1),F({pages:1,surah:"",verses:"",notes:""}),await G(),await _())},H=async()=>{if(!e||!j.surah)return;const{error:p}=await R.from("quran_bookmarks").upsert({user_id:e.id,surah:j.surah,verse:j.verse,page:j.page,notes:j.notes,created_at:new Date().toISOString()},{onConflict:"user_id,surah"});p||(S(!1),U({surah:"",verse:"",page:"",notes:""}),await M())},B=async p=>{if(!e)return;const{error:N}=await R.from("quran_readings").delete().eq("id",p).eq("user_id",e.id);N||(await G(),await _())},K=async p=>{if(!e)return;const{error:N}=await R.from("quran_bookmarks").delete().eq("id",p).eq("user_id",e.id);N||await M()},Y=async p=>{if(!e)return;const{error:N}=await R.from("user_settings").upsert({user_id:e.id,quran_daily_goal:p},{onConflict:"user_id"});N||(r(p),D(!1))},ve=async()=>{if(!e)return;const{data:p}=await R.from("user_settings").select("quran_daily_goal").eq("user_id",e.id).single();p&&p.quran_daily_goal&&r(p.quran_daily_goal)};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Quran Tracker"}),n.jsxs("button",{onClick:()=>w(!0),className:"bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[n.jsx(De,{className:"w-4 h-4"}),n.jsx("span",{children:"Log Reading"})]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl p-6 text-white",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Today's Reading"}),n.jsx("button",{onClick:()=>D(!0),className:"text-sm bg-white/20 hover:bg-white/30 text-white px-3 py-1 rounded-lg transition-colors",children:"Set Goal"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex justify-between text-emerald-100 text-sm mb-2",children:[n.jsx("span",{children:"Daily goal progress"}),n.jsxs("span",{children:[Math.round(s/t*100),"%"]})]}),n.jsx("div",{className:"w-full bg-emerald-400 rounded-full h-2",children:n.jsx("div",{className:"bg-white rounded-full h-2 transition-all duration-300",style:{width:`${Math.min(s/t*100,100)}%`}})})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:m}),n.jsx("div",{className:"text-emerald-100 text-sm",children:"Day Streak"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-lg font-bold",children:i||"Not started"}),n.jsx("div",{className:"text-emerald-100 text-sm",children:"Current Surah"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:c}),n.jsx("div",{className:"text-emerald-100 text-sm",children:"Pages Read"})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Reading Goal"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Daily Pages Goal"}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("input",{type:"number",value:t,onChange:p=>r(Number(p.target.value)),className:"w-20 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"}),n.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"pages per day"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Complete Quran in"}),n.jsxs("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:[Math.ceil((604-g.totalPages*2)/t)," days"]}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"At current pace"})]})]}),n.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Overall Progress"}),n.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Math.round(g.totalPages/604*100),"%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:n.jsx("div",{className:"bg-emerald-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(g.totalPages/604*100,100)}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[g.totalPages," of 604 pages completed"]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Quick Actions"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("button",{onClick:()=>w(!0),className:"p-4 bg-emerald-50 dark:bg-emerald-900/20 hover:bg-emerald-100 dark:hover:bg-emerald-900/30 rounded-lg transition-colors border border-emerald-200 dark:border-emerald-800",children:[n.jsx("div",{className:"text-emerald-600 dark:text-emerald-400 font-medium",children:"Log Reading Session"}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Record pages read"})]}),n.jsxs("button",{onClick:()=>S(!0),className:"p-4 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors border border-blue-200 dark:border-blue-800",children:[n.jsx("div",{className:"text-blue-600 dark:text-blue-400 font-medium",children:"Set Bookmark"}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Save current position"})]}),n.jsxs("button",{onClick:()=>L(!0),className:"p-4 bg-purple-50 dark:bg-purple-900/20 hover:bg-purple-100 dark:hover:bg-purple-900/30 rounded-lg transition-colors border border-purple-200 dark:border-purple-800",children:[n.jsx("div",{className:"text-purple-600 dark:text-purple-400 font-medium",children:"View Progress"}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Detailed analytics"})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Recent Readings"}),n.jsxs("div",{className:"space-y-3",children:[v.map((p,N)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-8 h-8 bg-emerald-100 dark:bg-emerald-900/20 rounded-full flex items-center justify-center",children:n.jsx(ts,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:p.surah}),n.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Verses ",p.verses]})]})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"font-medium text-gray-800 dark:text-white",children:[p.pages," pages"]}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:p.date})]}),n.jsx("button",{onClick:()=>B(p.id),className:"w-6 h-6 rounded-full bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/30 flex items-center justify-center transition-colors",title:"Delete reading",children:n.jsx(Ne,{className:"w-3 h-3"})})]})]},N)),v.length===0&&n.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[n.jsx(ts,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),n.jsx("p",{children:"No readings recorded yet"}),n.jsx("p",{className:"text-sm mt-1",children:"Start your Quran reading journey today!"})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Bookmarks"}),n.jsxs("div",{className:"space-y-3",children:[y.map((p,N)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:n.jsx(sc,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:p.surah}),n.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Verses ",p.verse]}),n.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:p.page?`Page ${p.page}`:""})]})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:p.notes}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:p.created_at})]}),n.jsx("button",{onClick:()=>K(p.id),className:"w-6 h-6 rounded-full bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/30 flex items-center justify-center transition-colors",title:"Delete bookmark",children:n.jsx(Ne,{className:"w-3 h-3"})})]})]},N)),y.length===0&&n.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[n.jsx(sc,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),n.jsx("p",{children:"No bookmarks saved yet"}),n.jsx("p",{className:"text-sm mt-1",children:"Bookmark your favorite verses!"})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Monthly Statistics"}),n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[n.jsx(hn,{className:"w-4 h-4"}),n.jsx("span",{children:"This month"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:g.totalPages}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Pages"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:g.totalSessions}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Reading Sessions"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:g.averagePerDay}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Avg. Pages/Day"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:[g.consistency,"%"]}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Consistency"})]})]})]}),h&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Log Reading Session"}),n.jsx("button",{onClick:()=>w(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:n.jsx(Ne,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pages Read"}),n.jsx("input",{type:"number",value:O.pages,onChange:p=>F({...O,pages:Number(p.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",min:"1"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Surah"}),n.jsx("input",{type:"text",value:O.surah,onChange:p=>F({...O,surah:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Al-Fatiha"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Verses"}),n.jsx("input",{type:"text",value:O.verses,onChange:p=>F({...O,verses:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., 1-7"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes (Optional)"}),n.jsx("textarea",{value:O.notes,onChange:p=>F({...O,notes:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",rows:3,placeholder:"Any reflections or notes..."})]})]}),n.jsxs("div",{className:"flex space-x-3 mt-6",children:[n.jsx("button",{onClick:A,className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Log Session"}),n.jsx("button",{onClick:()=>w(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})}),b&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Set Bookmark"}),n.jsx("button",{onClick:()=>S(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:n.jsx(Ne,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Surah"}),n.jsx("input",{type:"text",value:j.surah,onChange:p=>U({...j,surah:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Al-Baqarah"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Verse"}),n.jsx("input",{type:"text",value:j.verse,onChange:p=>U({...j,verse:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., 255"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Page (Optional)"}),n.jsx("input",{type:"text",value:j.page,onChange:p=>U({...j,page:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., 42"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes (Optional)"}),n.jsx("textarea",{value:j.notes,onChange:p=>U({...j,notes:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",rows:3,placeholder:"Why this bookmark is important..."})]})]}),n.jsxs("div",{className:"flex space-x-3 mt-6",children:[n.jsx("button",{onClick:H,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Set Bookmark"}),n.jsx("button",{onClick:()=>S(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})}),P&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-2xl mx-4 max-h-[80vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Detailed Progress"}),n.jsx("button",{onClick:()=>L(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:n.jsx(Ne,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"text-center p-4 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:g.totalPages}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Pages"})]}),n.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:g.totalSessions}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Sessions"})]}),n.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:g.averagePerDay}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Avg/Day"})]}),n.jsxs("div",{className:"text-center p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:[n.jsxs("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:[g.consistency,"%"]}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Consistency"})]})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"Quran Completion Progress"}),n.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4",children:n.jsx("div",{className:"bg-emerald-500 h-4 rounded-full transition-all duration-300",style:{width:`${Math.min(g.totalPages/604*100,100)}%`}})}),n.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:[g.totalPages," of 604 pages completed (",Math.round(g.totalPages/604*100),"%)"]})]})]}),n.jsx("div",{className:"mt-6",children:n.jsx("button",{onClick:()=>L(!1),className:"w-full bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Close"})})]})}),C&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Set Daily Goal"}),n.jsx("button",{onClick:()=>D(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:n.jsx(Ne,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Daily Pages Goal"}),n.jsx("input",{type:"number",value:t,onChange:p=>r(Number(p.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",min:"1",max:"50"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Recommended: 1-5 pages per day for consistent progress"})]}),n.jsx("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-4 rounded-lg",children:n.jsxs("div",{className:"text-sm text-emerald-800 dark:text-emerald-200",children:[n.jsx("strong",{children:"At this pace:"})," You'll complete the Quran in approximately"," ",n.jsxs("span",{className:"font-bold",children:[Math.ceil(604/t)," days"]})]})})]}),n.jsxs("div",{className:"flex space-x-3 mt-6",children:[n.jsx("button",{onClick:()=>Y(t),className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Save Goal"}),n.jsx("button",{onClick:()=>D(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})})]})},py=()=>{const{user:e}=at(),[t,r]=T.useState([]),[s,a]=T.useState(!1),[i,l]=T.useState({name:"",type:"good",category:"health"});T.useEffect(()=>{e&&o()},[e]);const o=async()=>{if(!e)return;const{data:h,error:w}=await R.from("habits").select("*").eq("user_id",e.id);if(h){const b=h.map(S=>({...S,completedToday:d(S.last_completed),badHabitFreeFor:S.type==="bad"?c(S.last_completed):void 0,color:u(S.category)}));r(b)}},d=h=>{if(!h)return!1;const w=new Date().toISOString().split("T")[0];return h===w},c=h=>{if(!h)return 0;const w=new Date(h),S=new Date().getTime()-w.getTime(),P=Math.floor(S/(1e3*60*60*24));return Math.max(0,P)},u=h=>{switch(h){case"health":return"bg-blue-500";case"spiritual":return"bg-emerald-500";case"productivity":return"bg-purple-500";case"learning":return"bg-orange-500";default:return"bg-gray-500"}},m=async(h,w)=>{if(!e)return;const b=new Date().toISOString().split("T")[0],S=t.find(D=>D.id===h);if(!S)return;let P=S.streak,L=b;w==="good"?S.completedToday?(P=Math.max(0,S.streak-1),L=S.lastCompleted||""):P=S.streak+1:S.completedToday||(P=0);const{error:C}=await R.from("habits").update({streak:P,last_completed:L}).eq("id",h);C||r(D=>D.map(O=>O.id===h?{...O,completedToday:!O.completedToday,streak:P,lastCompleted:L,badHabitFreeFor:w==="bad"?c(L):O.badHabitFreeFor}:O))},x=async()=>{if(!e||!i.name.trim())return;const{data:h,error:w}=await R.from("habits").insert({user_id:e.id,name:i.name,type:i.type,category:i.category,streak:0,last_completed:null}).select().single();h&&!w&&(r(b=>[...b,{...h,completedToday:!1,color:u(h.category),badHabitFreeFor:i.type==="bad"?0:void 0}]),l({name:"",type:"good",category:"health"}),a(!1))},v=t.filter(h=>h.type==="good"),k=t.filter(h=>h.type==="bad"),y=v.filter(h=>h.completedToday).length,E=v.length,g=E>0?y/E*100:0,f={health:"bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300",spiritual:"bg-emerald-100 dark:bg-emerald-900/20 text-emerald-800 dark:text-emerald-300",productivity:"bg-purple-100 dark:bg-purple-900/20 text-purple-800 dark:text-purple-300",learning:"bg-orange-100 dark:bg-orange-900/20 text-orange-800 dark:text-orange-300"};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Habit Tracker"}),n.jsxs("button",{onClick:()=>a(!0),className:"bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[n.jsx(un,{className:"w-4 h-4"}),n.jsx("span",{children:"Add Habit"})]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl p-6 text-white",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Today's Progress"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(gt,{className:"w-5 h-5"}),n.jsxs("span",{className:"font-medium",children:[y,"/",E]})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex justify-between text-emerald-100 text-sm mb-2",children:[n.jsx("span",{children:"Good habits completed"}),n.jsxs("span",{children:[Math.round(g),"%"]})]}),n.jsx("div",{className:"w-full bg-emerald-400 rounded-full h-2",children:n.jsx("div",{className:"bg-white rounded-full h-2 transition-all duration-300",style:{width:`${g}%`}})})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:v.length>0?Math.max(...v.map(h=>h.streak)):0}),n.jsx("div",{className:"text-emerald-100 text-sm",children:"Best Streak"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:t.filter(h=>h.streak>0).length}),n.jsx("div",{className:"text-emerald-100 text-sm",children:"Active Habits"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:k.length}),n.jsx("div",{className:"text-emerald-100 text-sm",children:"Bad Habits"})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Good Habits"}),n.jsx("div",{className:"space-y-3",children:v.map(h=>n.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border-2 transition-all ${h.completedToday?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800":"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${h.completedToday?"bg-emerald-500 text-white":`${h.color} text-white`}`,children:h.completedToday?n.jsx(_l,{className:"w-5 h-5"}):n.jsx(gt,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("h4",{className:"font-medium text-gray-800 dark:text-white",children:h.name}),n.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${f[h.category]}`,children:h.category})]}),n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[n.jsx(Kh,{className:"w-4 h-4"}),n.jsxs("span",{children:[h.streak," day streak"]})]})]})]}),n.jsx("button",{onClick:()=>m(h.id,"good"),className:`w-8 h-8 rounded-full flex items-center justify-center transition-colors ${h.completedToday?"bg-emerald-500 text-white":"border-2 border-gray-300 dark:border-gray-600 hover:border-emerald-500 dark:hover:border-emerald-400"}`,children:h.completedToday&&n.jsx(_l,{className:"w-4 h-4"})})]},h.id))})]}),k.length>0&&n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Bad Habits to Overcome"}),n.jsx("div",{className:"space-y-3",children:k.map(h=>n.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border-2 bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-red-500 text-white",children:n.jsx(Nl,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("h4",{className:"font-medium text-gray-800 dark:text-white",children:h.name}),n.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${f[h.category]}`,children:h.category})]}),n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[n.jsx(cn,{className:"w-4 h-4"}),n.jsxs("span",{children:[h.badHabitFreeFor||0," days free from this habit"]})]})]})]}),n.jsx("button",{onClick:()=>m(h.id,"bad"),className:"px-3 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-lg text-sm hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",children:"Did it today"})]},h.id))})]}),s&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Add New Habit"}),n.jsx("button",{onClick:()=>a(!1),className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:n.jsx(Ne,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Habit Name"}),n.jsx("input",{type:"text",value:i.name,onChange:h=>l({...i,name:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Meditate for 10 minutes"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Habit Type"}),n.jsxs("select",{value:i.type,onChange:h=>l({...i,type:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",children:[n.jsx("option",{value:"good",children:"Good Habit (to build)"}),n.jsx("option",{value:"bad",children:"Bad Habit (to overcome)"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category"}),n.jsxs("select",{value:i.category,onChange:h=>l({...i,category:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",children:[n.jsx("option",{value:"health",children:"Health"}),n.jsx("option",{value:"spiritual",children:"Spiritual"}),n.jsx("option",{value:"productivity",children:"Productivity"}),n.jsx("option",{value:"learning",children:"Learning"})]})]}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{type:"button",onClick:()=>a(!1),className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),n.jsx("button",{onClick:x,className:"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700",children:"Add Habit"})]})]})]})})]})},vy=()=>{const{user:e}=at(),[t,r]=T.useState([]),[s,a]=T.useState(!1),[i,l]=T.useState(!1),[o,d]=T.useState(!1),[c,u]=T.useState(null),[m,x]=T.useState(!1),[v,k]=T.useState(!1),[y,E]=T.useState({subject:"",date:"",time:"",location:"",type:"class_test",targetHours:10,notes:""}),[g,f]=T.useState({hours:1,notes:""});yc.useEffect(()=>{e&&h()},[e]);const h=async()=>{if(!e)return;const{data:_}=await R.from("exams").select("*").eq("user_id",e.id).order("date",{ascending:!0});_&&r(_)},w=async()=>{if(!e||!y.subject||!y.date||m){console.log("Validation failed or already adding:",{user:!!e,subject:y.subject,date:y.date,isAdding:m});return}x(!0);try{const _={user_id:e.id,subject:y.subject,date:y.date,time:y.time||null,location:y.location||null,type:y.type,target_hours:y.targetHours,study_hours:0};y.notes&&y.notes.trim()&&(_.notes=y.notes.trim()),console.log("Adding exam:",_);const{data:M,error:A}=await R.from("exams").insert(_).select();if(A){console.error("Error adding exam:",A),alert("Failed to add exam: "+A.message);return}console.log("Exam added successfully:",M),a(!1),E({subject:"",date:"",time:"",location:"",type:"class_test",targetHours:10,notes:""}),await h()}catch(_){console.error("Unexpected error:",_),alert("An unexpected error occurred while adding the exam.")}finally{x(!1)}},b=async()=>{if(!(!e||!c||!y.subject||!y.date||v)){k(!0);try{const _={subject:y.subject,date:y.date,time:y.time||null,location:y.location||null,type:y.type,target_hours:y.targetHours};y.notes&&y.notes.trim()&&(_.notes=y.notes.trim());const{error:M}=await R.from("exams").update(_).eq("id",c.id).eq("user_id",e.id);if(M){console.error("Error updating exam:",M),alert("Failed to update exam: "+M.message);return}l(!1),u(null),E({subject:"",date:"",time:"",location:"",type:"class_test",targetHours:10,notes:""}),await h()}catch(_){console.error("Unexpected error:",_),alert("An unexpected error occurred while updating the exam.")}finally{k(!1)}}},S=async _=>{if(!e)return;const{error:M}=await R.from("exams").delete().eq("id",_).eq("user_id",e.id);M||await h()},P=async()=>{if(!e||!c||g.hours<=0)return;const _=c.studyHours+g.hours,{error:M}=await R.from("exams").update({study_hours:_}).eq("id",c.id).eq("user_id",e.id);M||(d(!1),u(null),f({hours:1,notes:""}),await h())},L=_=>{u(_),E({subject:_.subject,date:_.date,time:_.time,location:_.location,type:_.type,targetHours:_.targetHours,notes:_.notes||""}),l(!0)},C=_=>{u(_),d(!0)},D=_=>{const M=new Date(_),A=new Date,H=M.getTime()-A.getTime(),B=Math.ceil(H/(1e3*60*60*24));return Math.max(0,B)},O=_=>{switch(_){case"final":return"bg-red-100 text-red-800";case"class_test":return"bg-orange-100 text-orange-800";case"quiz":return"bg-blue-100 text-blue-800";case"assignment":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},F=_=>{switch(_){case"final":return"Final";case"class_test":return"Class Test";case"quiz":return"Quiz";case"assignment":return"Assignment";default:return _}},j=_=>_<=3?"text-red-600 dark:text-red-400":_<=7?"text-orange-600 dark:text-orange-400":_<=14?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-green-400",U=t.sort((_,M)=>new Date(_.date).getTime()-new Date(M.date).getTime())[0],G=U?D(U.date):0;return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Exam Countdown"}),n.jsxs("button",{onClick:()=>a(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[n.jsx(un,{className:"w-4 h-4"}),n.jsx("span",{children:"Add Exam"})]})]}),U&&n.jsxs("div",{className:"bg-gradient-to-r from-red-500 to-orange-600 rounded-xl p-6 text-white",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Next Exam"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(cn,{className:"w-5 h-5"}),n.jsx("span",{className:"font-medium",children:U.subject})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-3xl font-bold",children:G}),n.jsx("div",{className:"text-red-100 text-sm",children:"Days Left"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"text-xl font-bold",children:[U.studyHours,"h"]}),n.jsx("div",{className:"text-red-100 text-sm",children:"Hours Studied"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"text-xl font-bold",children:[Math.round(U.studyHours/U.targetHours*100),"%"]}),n.jsx("div",{className:"text-red-100 text-sm",children:"Progress"})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Upcoming Exams"}),n.jsxs("div",{className:"space-y-4",children:[t.map(_=>{const M=D(_.date),A=_.studyHours/_.targetHours*100;return n.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4 hover:shadow-md transition-shadow bg-white dark:bg-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:n.jsx(De,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-800 dark:text-white",children:_.subject}),n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[n.jsx(et,{className:"w-4 h-4"}),n.jsxs("span",{children:[_.time,"  ",_.location]})]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:`text-2xl font-bold ${j(M)}`,children:M}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"days left"})]})]}),n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${O(_.type)}`,children:F(_.type)}),n.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[_.date,"  ",_.time]})]}),n.jsxs("div",{className:"mb-2",children:[n.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-300 mb-1",children:[n.jsx("span",{children:"Study Progress"}),n.jsxs("span",{children:[_.studyHours,"h / ",_.targetHours,"h"]})]}),n.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:n.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${A>=100?"bg-green-500":A>=70?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(A,100)}%`}})})]}),n.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[n.jsxs("span",{children:[Math.round(A),"% complete"]}),n.jsxs("span",{children:[_.targetHours-_.studyHours,"h remaining"]})]}),n.jsxs("div",{className:"flex justify-end space-x-2 mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:[n.jsx("button",{onClick:()=>C(_),className:"px-3 py-1 bg-emerald-100 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 rounded-lg text-sm hover:bg-emerald-200 dark:hover:bg-emerald-900/30 transition-colors",children:"Log Study"}),n.jsx("button",{onClick:()=>L(_),className:"px-3 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 rounded-lg text-sm hover:bg-blue-200 dark:hover:bg-blue-900/30 transition-colors",children:n.jsx(Co,{className:"w-3 h-3"})}),n.jsx("button",{onClick:()=>S(_.id),className:"px-3 py-1 bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-lg text-sm hover:bg-red-200 dark:hover:bg-red-900/30 transition-colors",children:n.jsx(To,{className:"w-3 h-3"})})]})]},_.id)}),t.length===0&&n.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[n.jsx(De,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),n.jsx("p",{children:"No exams scheduled yet"}),n.jsx("p",{className:"text-sm mt-1",children:"Add your first exam to get started!"})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Recommended Study Schedule"}),n.jsxs("div",{className:"space-y-3",children:[t.slice(0,3).map(_=>{const M=D(_.date),A=_.targetHours-_.studyHours,H=M>0?Math.ceil(A/M):0;return n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:n.jsx(gt,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:_.subject}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:A>0?`${A}h remaining`:"Study complete!"})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:H>0?`${H}h/day`:"Complete!"}),n.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[M," days left"]})]})]},_.id)}),t.length===0&&n.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:n.jsx("p",{className:"text-sm",children:"No study schedule available"})})]})]}),t.length>0&&n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Exam Statistics"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t.length}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Exams"})]}),n.jsxs("div",{className:"text-center p-4 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:t.filter(_=>D(_.date)<=7).length}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"This Week"})]}),n.jsxs("div",{className:"text-center p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:Math.round(t.reduce((_,M)=>_+M.studyHours/M.targetHours*100,0)/t.length)}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Avg Progress"})]}),n.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:t.reduce((_,M)=>_+M.studyHours,0)}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Hours Studied"})]})]})]}),s&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4 max-h-[80vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Add New Exam"}),n.jsx("button",{onClick:()=>a(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:n.jsx(Ne,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Subject ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:y.subject,onChange:_=>E({...y,subject:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Mathematics",required:!0})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Date ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"date",value:y.date,onChange:_=>E({...y,date:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Time (Optional)"}),n.jsx("input",{type:"time",value:y.time,onChange:_=>E({...y,time:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Location (Optional)"}),n.jsx("input",{type:"text",value:y.location,onChange:_=>E({...y,location:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Room 101"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),n.jsxs("select",{value:y.type,onChange:_=>E({...y,type:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",children:[n.jsx("option",{value:"class_test",children:"Class Test"}),n.jsx("option",{value:"final",children:"Final"}),n.jsx("option",{value:"quiz",children:"Quiz"}),n.jsx("option",{value:"assignment",children:"Assignment"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Target Hours"}),n.jsx("input",{type:"number",value:y.targetHours,onChange:_=>E({...y,targetHours:Number(_.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",min:"1"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes (Optional)"}),n.jsx("textarea",{value:y.notes,onChange:_=>E({...y,notes:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",rows:3,placeholder:"Any additional notes..."})]})]}),n.jsxs("div",{className:"flex space-x-3 mt-6",children:[n.jsx("button",{onClick:w,disabled:m,className:`flex-1 px-4 py-2 rounded-lg transition-colors ${m?"bg-gray-400 cursor-not-allowed text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:m?"Adding...":"Add Exam"}),n.jsx("button",{onClick:()=>a(!1),disabled:m,className:`flex-1 px-4 py-2 rounded-lg transition-colors ${m?"bg-gray-300 cursor-not-allowed text-gray-500":"bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200"}`,children:"Cancel"})]})]})}),i&&c&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4 max-h-[80vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Edit Exam"}),n.jsx("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:n.jsx(Ne,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Subject ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:y.subject,onChange:_=>E({...y,subject:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Mathematics"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Date ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"date",value:y.date,onChange:_=>E({...y,date:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Time (Optional)"}),n.jsx("input",{type:"time",value:y.time,onChange:_=>E({...y,time:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Location (Optional)"}),n.jsx("input",{type:"text",value:y.location,onChange:_=>E({...y,location:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Room 101"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),n.jsxs("select",{value:y.type,onChange:_=>E({...y,type:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",children:[n.jsx("option",{value:"class_test",children:"Class Test"}),n.jsx("option",{value:"final",children:"Final"}),n.jsx("option",{value:"quiz",children:"Quiz"}),n.jsx("option",{value:"assignment",children:"Assignment"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Target Hours"}),n.jsx("input",{type:"number",value:y.targetHours,onChange:_=>E({...y,targetHours:Number(_.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",min:"1"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes (Optional)"}),n.jsx("textarea",{value:y.notes,onChange:_=>E({...y,notes:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",rows:3,placeholder:"Any additional notes..."})]})]}),n.jsxs("div",{className:"flex space-x-3 mt-6",children:[n.jsx("button",{onClick:b,disabled:v,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:v?"Updating...":"Update Exam"}),n.jsx("button",{onClick:()=>l(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})}),o&&c&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Log Study Session"}),n.jsx("button",{onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:n.jsx(Ne,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:n.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[n.jsx("strong",{children:c.subject}),n.jsx("br",{}),"Current progress: ",c.studyHours,"h / ",c.targetHours,"h"]})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hours Studied"}),n.jsx("input",{type:"number",value:g.hours,onChange:_=>f({...g,hours:Number(_.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",min:"0.5",step:"0.5"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes (Optional)"}),n.jsx("textarea",{value:g.notes,onChange:_=>f({...g,notes:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",rows:3,placeholder:"What did you study today?"})]})]}),n.jsxs("div",{className:"flex space-x-3 mt-6",children:[n.jsx("button",{onClick:P,className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Log Session"}),n.jsx("button",{onClick:()=>d(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})})]})},wy=()=>{const{user:e}=at(),[t,r]=T.useState([]),[s,a]=T.useState([]),[i,l]=T.useState("Saturday"),[o,d]=T.useState("routine"),[c,u]=T.useState(!1),[m,x]=T.useState(!1),[v,k]=T.useState(!1),[y,E]=T.useState(null),[g,f]=T.useState({subject:"",time:"",endTime:"",location:"",instructor:"",day:"Saturday",color:"#3B82F6"}),[h,w]=T.useState({subject:"",date:"",status:"present",notes:""}),b=["Saturday","Sunday","Monday","Tuesday","Wednesday"],S=["Mathematics","Physics","Chemistry","Biology","English"];T.useEffect(()=>{e&&(P(),L())},[e]),T.useEffect(()=>{const p=new Date().toLocaleDateString("en-US",{weekday:"long"});b.includes(p)&&l(p)},[]);const P=async()=>{if(!e)return;const{data:p}=await R.from("class_schedules").select("*").eq("user_id",e.id).order("time");p&&a(p)},L=async()=>{if(!e)return;const{data:p}=await R.from("attendance_records").select("*").eq("user_id",e.id).order("date",{ascending:!1});p&&r(p)},C=async()=>{if(!e||!g.subject||!g.time||!g.endTime)return;const{error:p}=await R.from("class_schedules").insert({user_id:e.id,subject:g.subject,time:g.time,end_time:g.endTime,location:g.location,instructor:g.instructor,day:g.day,color:g.color});p||(u(!1),f({subject:"",time:"",endTime:"",location:"",instructor:"",day:"Saturday",color:"#3B82F6"}),await P())},D=async()=>{if(!e||!y||!g.subject||!g.time||!g.endTime)return;const{error:p}=await R.from("class_schedules").update({subject:g.subject,time:g.time,end_time:g.endTime,location:g.location,instructor:g.instructor,day:g.day,color:g.color}).eq("id",y.id).eq("user_id",e.id);p||(k(!1),E(null),f({subject:"",time:"",endTime:"",location:"",instructor:"",day:"Saturday",color:"#3B82F6"}),await P())},O=async p=>{if(!e)return;const{error:N}=await R.from("class_schedules").delete().eq("id",p).eq("user_id",e.id);N||await P()},F=async()=>{if(!e||!h.subject||!h.date)return;const{error:p}=await R.from("attendance_records").insert({user_id:e.id,subject:h.subject,date:h.date,status:h.status,notes:h.notes||null});p||(x(!1),w({subject:"",date:"",status:"present",notes:""}),await L())},j=p=>{E(p),f({subject:p.subject,time:p.time,endTime:p.endTime,location:p.location,instructor:p.instructor,day:p.day,color:p.color}),k(!0)},U=p=>s.filter(N=>N.day===p).sort((N,I)=>N.time.localeCompare(I.time)),G=()=>{const p=new Date,N=p.toLocaleDateString("en-US",{weekday:"long"}),I=p.toTimeString().slice(0,5);return b.includes(N)?s.find(z=>z.day===N&&z.time<=I&&z.endTime>=I):null},_=()=>{const p=new Date,N=p.toLocaleDateString("en-US",{weekday:"long"}),I=p.toTimeString().slice(0,5);if(!b.includes(N)){const z=b.find(X=>{const Z=b.indexOf(X),V=b.indexOf(N);return Z>V});return z?U(z)[0]:U("Saturday")[0]}return s.find(z=>z.day===N&&z.time>I)},M=()=>{const p=t.length,N=t.filter(W=>W.status==="present").length,I=t.filter(W=>W.status==="absent").length,z=t.filter(W=>W.status==="late").length;return{total:p,present:N,absent:I,late:z,percentage:p>0?Math.round(N/p*100):0}},A=p=>{const N=t.filter(W=>W.subject===p),I=N.filter(W=>W.status==="present").length,z=N.length;return{total:z,present:I,percentage:z>0?Math.round(I/z*100):0}},H=p=>{switch(p){case"present":return n.jsx(Qh,{className:"w-5 h-5 text-green-500"});case"absent":return n.jsx(cy,{className:"w-5 h-5 text-red-500"});case"late":return n.jsx(et,{className:"w-5 h-5 text-yellow-500"});default:return null}},B=p=>{switch(p){case"present":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"absent":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"late":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}},K=G(),Y=_(),ve=M();return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Class Management"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("button",{onClick:()=>d("routine"),className:`px-4 py-2 rounded-lg transition-colors ${o==="routine"?"bg-emerald-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:[n.jsx(De,{className:"w-4 h-4 inline mr-2"}),"Routine"]}),n.jsxs("button",{onClick:()=>d("attendance"),className:`px-4 py-2 rounded-lg transition-colors ${o==="attendance"?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:[n.jsx(Ls,{className:"w-4 h-4 inline mr-2"}),"Attendance"]})]})]}),o==="routine"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[K&&n.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl p-6 text-white",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Current Class"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),n.jsx("span",{className:"text-sm",children:"Live"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"text-2xl font-bold",children:K.subject}),n.jsxs("div",{className:"flex items-center space-x-2 text-emerald-100",children:[n.jsx(et,{className:"w-4 h-4"}),n.jsxs("span",{children:[K.time," - ",K.endTime]})]}),n.jsxs("div",{className:"flex items-center space-x-2 text-emerald-100",children:[n.jsx(nc,{className:"w-4 h-4"}),n.jsx("span",{children:K.location})]}),n.jsxs("div",{className:"flex items-center space-x-2 text-emerald-100",children:[n.jsx(At,{className:"w-4 h-4"}),n.jsx("span",{children:K.instructor})]})]})]}),Y&&n.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl p-6 text-white",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Next Class"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(et,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:"Upcoming"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"text-2xl font-bold",children:Y.subject}),n.jsxs("div",{className:"flex items-center space-x-2 text-blue-100",children:[n.jsx(et,{className:"w-4 h-4"}),n.jsxs("span",{children:[Y.time," - ",Y.endTime]})]}),n.jsxs("div",{className:"flex items-center space-x-2 text-blue-100",children:[n.jsx(nc,{className:"w-4 h-4"}),n.jsx("span",{children:Y.location})]}),n.jsxs("div",{className:"flex items-center space-x-2 text-blue-100",children:[n.jsx(At,{className:"w-4 h-4"}),n.jsx("span",{children:Y.instructor})]})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Weekly Schedule"}),n.jsxs("button",{onClick:()=>u(!0),className:"bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[n.jsx(un,{className:"w-4 h-4"}),n.jsx("span",{children:"Add Class"})]})]}),n.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:b.map(p=>n.jsx("button",{onClick:()=>l(p),className:`px-4 py-2 rounded-lg transition-colors ${i===p?"bg-emerald-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:p},p))}),n.jsxs("div",{className:"space-y-3",children:[U(i).map(p=>n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:p.color}}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:p.subject}),n.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[p.time," - ",p.endTime,"  ",p.location]}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:p.instructor})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>j(p),className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/20 rounded-lg",children:n.jsx(Co,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>O(p.id),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/20 rounded-lg",children:n.jsx(To,{className:"w-4 h-4"})})]})]},p.id)),U(i).length===0&&n.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[n.jsx(De,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),n.jsxs("p",{children:["No classes scheduled for ",i]}),n.jsx("p",{className:"text-sm mt-1",children:"Add your first class to get started!"})]})]})]})]}),o==="attendance"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl p-6 text-white",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Overall Attendance"}),n.jsxs("button",{onClick:()=>x(!0),className:"bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[n.jsx(Ls,{className:"w-4 h-4"}),n.jsx("span",{children:"Mark Attendance"})]})]}),n.jsxs("div",{className:"grid grid-cols-4 gap-4 text-center",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:ve.total}),n.jsx("div",{className:"text-blue-100 text-sm",children:"Total Classes"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:ve.present}),n.jsx("div",{className:"text-blue-100 text-sm",children:"Present"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:ve.absent}),n.jsx("div",{className:"text-blue-100 text-sm",children:"Absent"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:ve.late}),n.jsx("div",{className:"text-blue-100 text-sm",children:"Late"})]})]}),n.jsxs("div",{className:"mt-4 text-center",children:[n.jsxs("div",{className:"text-3xl font-bold",children:[ve.percentage,"%"]}),n.jsx("div",{className:"text-blue-100 text-sm",children:"Attendance Rate"})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Subject-wise Attendance"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:S.map(p=>{const N=A(p);return n.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"font-medium text-gray-800 dark:text-white",children:p}),n.jsxs("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:[N.percentage,"%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:n.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${N.percentage}%`}})}),n.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[N.present,"/",N.total," classes"]})]},p)})})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Recent Attendance"}),n.jsxs("div",{className:"space-y-3",children:[t.slice(0,10).map(p=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[H(p.status),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:p.subject}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:p.date})]})]}),n.jsx("div",{className:"flex items-center space-x-2",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${B(p.status)}`,children:p.status.charAt(0).toUpperCase()+p.status.slice(1)})})]},p.id)),t.length===0&&n.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[n.jsx(Ls,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),n.jsx("p",{children:"No attendance records yet"}),n.jsx("p",{className:"text-sm mt-1",children:"Mark your first attendance to get started!"})]})]})]})]}),c&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4 max-h-[80vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Add New Class"}),n.jsx("button",{onClick:()=>u(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:n.jsx(Ne,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Subject ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:g.subject,onChange:p=>f({...g,subject:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Mathematics",required:!0})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Start Time ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"time",value:g.time,onChange:p=>f({...g,time:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["End Time ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"time",value:g.endTime,onChange:p=>f({...g,endTime:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Location (Optional)"}),n.jsx("input",{type:"text",value:g.location,onChange:p=>f({...g,location:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Room 101"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Instructor (Optional)"}),n.jsx("input",{type:"text",value:g.instructor,onChange:p=>f({...g,instructor:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Dr. Smith"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Day"}),n.jsx("select",{value:g.day,onChange:p=>f({...g,day:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",children:b.map(p=>n.jsx("option",{value:p,children:p},p))})]})]}),n.jsxs("div",{className:"flex space-x-3 mt-6",children:[n.jsx("button",{onClick:C,className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Add Class"}),n.jsx("button",{onClick:()=>u(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})}),v&&y&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4 max-h-[80vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Edit Class"}),n.jsx("button",{onClick:()=>k(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:n.jsx(Ne,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Subject ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:g.subject,onChange:p=>f({...g,subject:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Mathematics",required:!0})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Start Time ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"time",value:g.time,onChange:p=>f({...g,time:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["End Time ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"time",value:g.endTime,onChange:p=>f({...g,endTime:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Location (Optional)"}),n.jsx("input",{type:"text",value:g.location,onChange:p=>f({...g,location:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Room 101"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Instructor (Optional)"}),n.jsx("input",{type:"text",value:g.instructor,onChange:p=>f({...g,instructor:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Dr. Smith"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Day"}),n.jsx("select",{value:g.day,onChange:p=>f({...g,day:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",children:b.map(p=>n.jsx("option",{value:p,children:p},p))})]})]}),n.jsxs("div",{className:"flex space-x-3 mt-6",children:[n.jsx("button",{onClick:D,className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Update Class"}),n.jsx("button",{onClick:()=>k(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})}),m&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Mark Attendance"}),n.jsx("button",{onClick:()=>x(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:n.jsx(Ne,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Subject ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{value:h.subject,onChange:p=>w({...h,subject:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0,children:[n.jsx("option",{value:"",children:"Select Subject"}),S.map(p=>n.jsx("option",{value:p,children:p},p))]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Date ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"date",value:h.date,onChange:p=>w({...h,date:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),n.jsxs("select",{value:h.status,onChange:p=>w({...h,status:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",children:[n.jsx("option",{value:"present",children:"Present"}),n.jsx("option",{value:"absent",children:"Absent"}),n.jsx("option",{value:"late",children:"Late"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes (Optional)"}),n.jsx("textarea",{value:h.notes,onChange:p=>w({...h,notes:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",rows:3,placeholder:"Any additional notes..."})]})]}),n.jsxs("div",{className:"flex space-x-3 mt-6",children:[n.jsx("button",{onClick:F,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Mark Attendance"}),n.jsx("button",{onClick:()=>x(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})})]})},by=()=>{var w;const{user:e}=at(),[t,r]=T.useState([]),[s,a]=T.useState(8),[i,l]=T.useState(!1),[o,d]=T.useState(!1),[c,u]=T.useState({date:"",bedtime:"",wakeTime:"",quality:3,notes:""});T.useEffect(()=>{e&&m()},[e]);const m=async()=>{if(!e)return;const{data:b}=await R.from("sleep_records").select("*").eq("user_id",e.id).order("date",{ascending:!1}).limit(30);b&&r(b)},x=async()=>{if(!e||!c.date||!c.bedtime||!c.wakeTime)return;d(!0);const b=new Date(`2000-01-01T${c.bedtime}`);let P=(new Date(`2000-01-01T${c.wakeTime}`).getTime()-b.getTime())/(1e3*60*60);P<0&&(P+=24);const{error:L}=await R.from("sleep_records").insert({user_id:e.id,date:c.date,bedtime:c.bedtime,wake_time:c.wakeTime,duration:Math.round(P*10)/10,quality:c.quality,notes:c.notes||null});L||(l(!1),u({date:"",bedtime:"",wakeTime:"",quality:3,notes:""}),await m()),d(!1)},v=()=>{if(t.length===0)return{avgDuration:0,avgQuality:0,goalAchieved:0,totalNights:0,bestNight:null,worstNight:null};const S=t.reduce((O,F)=>O+F.duration,0)/t.length,P=t.reduce((O,F)=>O+F.quality,0)/t.length,L=t.filter(O=>O.duration>=s).length,C=t.reduce((O,F)=>F.quality>O.quality?F:O),D=t.reduce((O,F)=>F.quality<O.quality?F:O);return{avgDuration:Math.round(S*10)/10,avgQuality:Math.round(P*10)/10,goalAchieved:L,totalNights:t.length,bestNight:C,worstNight:D}},k=b=>b>=4?"bg-green-100 dark:bg-green-900/20":b>=3?"bg-yellow-100 dark:bg-yellow-900/20":"bg-red-100 dark:bg-red-900/20",y=()=>{if(!t[0])return null;const P=new Date().getHours();return P>=22||P<=6?{status:"sleep",message:"Sleep time"}:{status:"awake",message:"Awake time"}},E=()=>{if(t.length<2)return"stable";const b=t.slice(0,7),S=t.slice(7,14);if(b.length===0||S.length===0)return"stable";const P=b.reduce((C,D)=>C+D.duration,0)/b.length,L=S.reduce((C,D)=>C+D.duration,0)/S.length;return P>L+.5?"improving":P<L-.5?"declining":"stable"},g=v(),f=y(),h=E();return T.useEffect(()=>{const b=new Date().toISOString().split("T")[0];u(S=>({...S,date:b}))},[]),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Sleep Tracker"}),n.jsxs("button",{onClick:()=>l(!0),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[n.jsx(un,{className:"w-4 h-4"}),n.jsx("span",{children:"Log Sleep"})]})]}),f&&n.jsxs("div",{className:`rounded-xl p-6 text-white ${f.status==="sleep"?"bg-gradient-to-r from-indigo-500 to-purple-600":"bg-gradient-to-r from-orange-500 to-yellow-600"}`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Current Status"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[f.status==="sleep"?n.jsx(Xe,{className:"w-5 h-5"}):n.jsx(Eo,{className:"w-5 h-5"}),n.jsx("span",{className:"font-medium",children:f.message})]})]}),n.jsxs("div",{className:"grid grid-cols-4 gap-4 text-center",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[((w=t[0])==null?void 0:w.duration)||0,"h"]}),n.jsx("div",{className:"text-indigo-100 text-sm",children:"Last Night"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[s,"h"]}),n.jsx("div",{className:"text-indigo-100 text-sm",children:"Daily Goal"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[g.avgDuration,"h"]}),n.jsx("div",{className:"text-indigo-100 text-sm",children:"7-Day Average"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[g.avgQuality,"/5"]}),n.jsx("div",{className:"text-indigo-100 text-sm",children:"Avg Quality"})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Sleep Goal & Trends"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Daily Sleep Goal (hours)"}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("input",{type:"number",value:s,onChange:b=>a(Number(b.target.value)),min:"6",max:"12",step:"0.5",className:"w-20 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"}),n.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"hours per night"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Goal Achievement"}),n.jsxs("div",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:[g.totalNights>0?Math.round(g.goalAchieved/g.totalNights*100):0,"%"]}),n.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[g.goalAchieved," of ",g.totalNights," nights"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sleep Trend"}),n.jsx("div",{className:`text-2xl font-bold ${h==="improving"?"text-green-600 dark:text-green-400":h==="declining"?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"}`,children:h.charAt(0).toUpperCase()+h.slice(1)}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Last 7 days vs previous week"})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Weekly Overview"}),n.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[t.slice(0,7).reverse().map((b,S)=>n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:new Date(b.date).toLocaleDateString("en-US",{weekday:"short"})}),n.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg p-3 border border-gray-200 dark:border-gray-600",children:[n.jsxs("div",{className:"text-sm font-medium text-gray-800 dark:text-white",children:[b.duration,"h"]}),n.jsx("div",{className:"flex justify-center mt-1",children:[...Array(5)].map((P,L)=>n.jsx("div",{className:`w-2 h-2 rounded-full mx-0.5 ${L<b.quality?"bg-indigo-500":"bg-gray-300 dark:bg-gray-600"}`},L))})]})]},b.id)),t.length===0&&n.jsxs("div",{className:"col-span-7 text-center py-8 text-gray-500 dark:text-gray-400",children:[n.jsx(Xe,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),n.jsx("p",{children:"No sleep records yet"}),n.jsx("p",{className:"text-sm mt-1",children:"Log your first sleep to get started!"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Average Duration"}),n.jsx(et,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})]}),n.jsxs("div",{className:"text-3xl font-bold text-indigo-600 dark:text-indigo-400 mb-2",children:[g.avgDuration,"h"]}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Last 7 days"})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Sleep Quality"}),n.jsx(Sl,{className:"w-5 h-5 text-green-600 dark:text-green-400"})]}),n.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400 mb-2",children:[g.avgQuality,"/5"]}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Average rating"})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Consistency"}),n.jsx(gt,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})]}),n.jsxs("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400 mb-2",children:[g.totalNights>0?Math.round(g.goalAchieved/g.totalNights*100):0,"%"]}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Goal achievement"})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Recent Sleep Records"}),n.jsxs("div",{className:"space-y-3",children:[t.slice(0,5).map(b=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${k(b.quality)}`,children:n.jsx(Xe,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:b.date}),n.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[b.bedtime," - ",b.wakeTime]}),b.notes&&n.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:b.notes})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"font-medium text-gray-800 dark:text-white",children:[b.duration,"h"]}),n.jsx("div",{className:"flex justify-end",children:[...Array(5)].map((S,P)=>n.jsx("div",{className:`w-2 h-2 rounded-full mx-0.5 ${P<b.quality?"bg-indigo-500":"bg-gray-300 dark:bg-gray-600"}`},P))})]})]},b.id)),t.length===0&&n.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[n.jsx(Xe,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),n.jsx("p",{children:"No sleep records yet"}),n.jsx("p",{className:"text-sm mt-1",children:"Log your first sleep to get started!"})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Sleep Tips"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 dark:bg-indigo-900/20 rounded-full flex items-center justify-center",children:n.jsx(e0,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Consistent Schedule"}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Go to bed and wake up at the same time every day"})]})]}),n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"w-8 h-8 bg-purple-100 dark:bg-purple-900/20 rounded-full flex items-center justify-center",children:n.jsx(Xe,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Sleep Environment"}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Keep your bedroom cool, dark, and quiet"})]})]}),n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"w-8 h-8 bg-orange-100 dark:bg-orange-900/20 rounded-full flex items-center justify-center",children:n.jsx(Zh,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Morning Light"}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Get sunlight exposure in the morning"})]})]}),n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center",children:n.jsx(et,{className:"w-4 h-4 text-green-600 dark:text-green-400"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Pre-Sleep Routine"}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Develop a relaxing bedtime routine"})]})]})]})]}),i&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Log Sleep"}),n.jsx("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:n.jsx(Ne,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Date ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"date",value:c.date,onChange:b=>u({...c,date:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Bedtime ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"time",value:c.bedtime,onChange:b=>u({...c,bedtime:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Wake Time ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"time",value:c.wakeTime,onChange:b=>u({...c,wakeTime:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sleep Quality"}),n.jsx("div",{className:"flex items-center space-x-2",children:[1,2,3,4,5].map(b=>n.jsx("button",{onClick:()=>u({...c,quality:b}),className:`p-2 rounded-lg transition-colors ${c.quality>=b?"text-yellow-500 bg-yellow-100 dark:bg-yellow-900/20":"text-gray-300 dark:text-gray-600 hover:text-yellow-400"}`,children:n.jsx(Sl,{className:"w-5 h-5"})},b))}),n.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[c.quality===1&&"Very Poor",c.quality===2&&"Poor",c.quality===3&&"Fair",c.quality===4&&"Good",c.quality===5&&"Excellent"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes (Optional)"}),n.jsx("textarea",{value:c.notes,onChange:b=>u({...c,notes:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",rows:3,placeholder:"How did you sleep? Any factors that affected your sleep?"})]})]}),n.jsxs("div",{className:"flex space-x-3 mt-6",children:[n.jsx("button",{onClick:x,disabled:o||!c.date||!c.bedtime||!c.wakeTime,className:"flex-1 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg transition-colors",children:o?"Logging...":"Log Sleep"}),n.jsx("button",{onClick:()=>l(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})})]})},ky=()=>{const{user:e}=at(),[t,r]=T.useState([]),[s,a]=T.useState({}),[i,l]=T.useState(!0),[o,d]=T.useState("all"),[c,u]=T.useState(!1),m=[{id:"all",label:"All",icon:ji},{id:"study",label:"Study",icon:De},{id:"prayer",label:"Prayer",icon:Et},{id:"quran",label:"Quran",icon:ts},{id:"habits",label:"Habits",icon:gt},{id:"attendance",label:"Classes",icon:Ls},{id:"sleep",label:"Sleep",icon:Xe},{id:"general",label:"General",icon:en}];T.useEffect(()=>{e&&(x(),v())},[e]);const x=async()=>{if(e)try{const{data:C}=await R.from("study_sessions").select("*").eq("user_id",e.id),{data:D}=await R.from("prayer_records").select("*").eq("user_id",e.id),{data:O}=await R.from("quran_sessions").select("*").eq("user_id",e.id),{data:F}=await R.from("attendance_records").select("*").eq("user_id",e.id),{data:j}=await R.from("sleep_records").select("*").eq("user_id",e.id),{data:U}=await R.from("habit_records").select("*").eq("user_id",e.id);a({studySessions:C||[],prayerRecords:D||[],quranSessions:O||[],attendanceRecords:F||[],sleepRecords:j||[],habitRecords:U||[]})}catch(C){console.error("Error loading user stats:",C)}finally{l(!1)}},v=()=>{r([{id:"study_1",title:"First Steps",description:"Complete your first study session",icon:De,category:"study",unlocked:!1,progress:0,maxProgress:1,rarity:"common",points:10},{id:"study_2",title:"Study Enthusiast",description:"Study for 10 hours total",icon:De,category:"study",unlocked:!1,progress:0,maxProgress:10,rarity:"common",points:25},{id:"study_3",title:"Study Marathon",description:"Study for 50 hours total",icon:ji,category:"study",unlocked:!1,progress:0,maxProgress:50,rarity:"epic",points:100},{id:"study_4",title:"Focus Master",description:"Complete 5 study sessions of 2+ hours each",icon:gt,category:"study",unlocked:!1,progress:0,maxProgress:5,rarity:"rare",points:75},{id:"study_5",title:"Study Legend",description:"Study for 100 hours total",icon:xs,category:"study",unlocked:!1,progress:0,maxProgress:100,rarity:"legendary",points:250},{id:"prayer_1",title:"Prayer Beginner",description:"Log your first prayer",icon:Et,category:"prayer",unlocked:!1,progress:0,maxProgress:1,rarity:"common",points:10},{id:"prayer_2",title:"Prayer Warrior",description:"Complete all 5 daily prayers for 7 consecutive days",icon:ny,category:"prayer",unlocked:!1,progress:0,maxProgress:7,rarity:"rare",points:75},{id:"prayer_3",title:"Prayer Master",description:"Complete all 5 daily prayers for 30 consecutive days",icon:xs,category:"prayer",unlocked:!1,progress:0,maxProgress:30,rarity:"legendary",points:300},{id:"quran_1",title:"Quran Reader",description:"Complete your first Quran reading session",icon:ts,category:"quran",unlocked:!1,progress:0,maxProgress:1,rarity:"common",points:10},{id:"quran_2",title:"Quran Scholar",description:"Read Quran for 7 consecutive days",icon:Sl,category:"quran",unlocked:!1,progress:0,maxProgress:7,rarity:"rare",points:50},{id:"quran_3",title:"Quran Master",description:"Read Quran for 21 consecutive days",icon:xs,category:"quran",unlocked:!1,progress:0,maxProgress:21,rarity:"epic",points:150},{id:"attendance_1",title:"Class Attender",description:"Mark your first attendance",icon:Ls,category:"attendance",unlocked:!1,progress:0,maxProgress:1,rarity:"common",points:10},{id:"attendance_2",title:"Perfect Week",description:"Attend all classes for a week",icon:cn,category:"attendance",unlocked:!1,progress:0,maxProgress:5,rarity:"rare",points:50},{id:"attendance_3",title:"Perfect Attendance",description:"Attend all classes for a month",icon:xs,category:"attendance",unlocked:!1,progress:0,maxProgress:20,rarity:"legendary",points:200},{id:"sleep_1",title:"Sleep Tracker",description:"Log your first sleep record",icon:Xe,category:"sleep",unlocked:!1,progress:0,maxProgress:1,rarity:"common",points:10},{id:"sleep_2",title:"Sleep Champion",description:"Meet sleep goal for 7 consecutive days",icon:en,category:"sleep",unlocked:!1,progress:0,maxProgress:7,rarity:"rare",points:75},{id:"sleep_3",title:"Early Bird",description:"Wake up before 6 AM for 10 days",icon:hn,category:"sleep",unlocked:!1,progress:0,maxProgress:10,rarity:"epic",points:100},{id:"general_1",title:"App Explorer",description:"Use all 6 main features of the app",icon:uy,category:"general",unlocked:!1,progress:0,maxProgress:6,rarity:"common",points:25},{id:"general_2",title:"Consistency King",description:"Use the app for 30 consecutive days",icon:xs,category:"general",unlocked:!1,progress:0,maxProgress:30,rarity:"legendary",points:500},{id:"general_3",title:"Secret Discoverer",description:"Find this hidden achievement",icon:dy,category:"general",unlocked:!1,progress:0,maxProgress:1,rarity:"epic",points:100,secret:!0}])},k=()=>{if(!s||Object.keys(s).length===0)return;const C=t.map(D=>{let O=0,F=!1;switch(D.id){case"study_1":O=s.studySessions.length>0?1:0,F=O>=D.maxProgress;break;case"study_2":O=Math.floor(s.studySessions.reduce((U,G)=>U+(G.duration||0),0)),F=O>=D.maxProgress;break;case"study_3":O=Math.floor(s.studySessions.reduce((U,G)=>U+(G.duration||0),0)),F=O>=D.maxProgress;break;case"study_4":O=s.studySessions.filter(U=>(U.duration||0)>=2).length,F=O>=D.maxProgress;break;case"study_5":O=Math.floor(s.studySessions.reduce((U,G)=>U+(G.duration||0),0)),F=O>=D.maxProgress;break;case"prayer_1":O=s.prayerRecords.length>0?1:0,F=O>=D.maxProgress;break;case"prayer_2":O=y(s.prayerRecords,5),F=O>=D.maxProgress;break;case"prayer_3":O=y(s.prayerRecords,5),F=O>=D.maxProgress;break;case"quran_1":O=s.quranSessions.length>0?1:0,F=O>=D.maxProgress;break;case"quran_2":O=y(s.quranSessions,1),F=O>=D.maxProgress;break;case"quran_3":O=y(s.quranSessions,1),F=O>=D.maxProgress;break;case"attendance_1":O=s.attendanceRecords.length>0?1:0,F=O>=D.maxProgress;break;case"attendance_2":O=y(s.attendanceRecords,1),F=O>=D.maxProgress;break;case"attendance_3":O=y(s.attendanceRecords,1),F=O>=D.maxProgress;break;case"sleep_1":O=s.sleepRecords.length>0?1:0,F=O>=D.maxProgress;break;case"sleep_2":O=y(s.sleepRecords,1),F=O>=D.maxProgress;break;case"sleep_3":O=s.sleepRecords.filter(U=>new Date(`2000-01-01T${U.wake_time}`).getHours()<6).length,F=O>=D.maxProgress;break;case"general_1":O=[s.studySessions.length>0,s.prayerRecords.length>0,s.quranSessions.length>0,s.habitRecords.length>0,s.attendanceRecords.length>0,s.sleepRecords.length>0].filter(Boolean).length,F=O>=D.maxProgress;break;case"general_2":O=g(),F=O>=D.maxProgress;break;case"general_3":O=c?1:0,F=O>=D.maxProgress;break}return{...D,progress:Math.min(O,D.maxProgress),unlocked:F,unlockedDate:F&&!D.unlockedDate?new Date().toISOString().split("T")[0]:D.unlockedDate}});r(C)},y=(C,D)=>{if(C.length===0)return 0;const O=[...new Set(C.map(G=>G.date))].sort();let F=0,j=0,U=null;for(const G of O)C.filter(M=>M.date===G).length>=D?(!U||E(U,G)?j++:j=1,F=Math.max(F,j),U=G):j=0;return F},E=(C,D)=>{const O=new Date(C),F=new Date(D),j=Math.abs(F.getTime()-O.getTime());return Math.ceil(j/(1e3*60*60*24))===1},g=()=>Math.min(30,Math.floor((Date.now()-new Date("2024-01-01").getTime())/(1e3*60*60*24)));T.useEffect(()=>{k()},[s]);const f=C=>{switch(C){case"common":return"from-gray-400 to-gray-600 dark:from-gray-500 dark:to-gray-700";case"rare":return"from-blue-400 to-blue-600 dark:from-blue-500 dark:to-blue-700";case"epic":return"from-purple-400 to-purple-600 dark:from-purple-500 dark:to-purple-700";case"legendary":return"from-yellow-400 to-orange-600 dark:from-yellow-500 dark:to-orange-700";default:return"from-gray-400 to-gray-600 dark:from-gray-500 dark:to-gray-700"}},h=C=>{switch(C){case"study":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"prayer":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"quran":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400";case"habits":return"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400";case"attendance":return"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/20 dark:text-indigo-400";case"sleep":return"bg-pink-100 text-pink-800 dark:bg-pink-900/20 dark:text-pink-400";case"general":return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}},w=o==="all"?t.filter(C=>!C.secret||c):t.filter(C=>C.category===o&&(!C.secret||c)),b=t.filter(C=>C.unlocked),S=t.filter(C=>!C.secret||c).length,P=Math.round(b.length/S*100),L=b.reduce((C,D)=>C+D.points,0);return i?n.jsxs("div",{className:"space-y-6",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Achievements"}),n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"Loading achievements..."})})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Achievements"}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[b.length," / ",S," unlocked"]}),n.jsxs("button",{onClick:()=>u(!c),className:"text-xs px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[c?"Hide":"Show"," Secret"]})]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-600 rounded-xl p-6 text-white",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Achievement Progress"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ji,{className:"w-5 h-5"}),n.jsxs("span",{className:"font-medium",children:[P,"%"]})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex justify-between text-yellow-100 text-sm mb-2",children:[n.jsx("span",{children:"Overall completion"}),n.jsxs("span",{children:[b.length,"/",S]})]}),n.jsx("div",{className:"w-full bg-yellow-400 rounded-full h-2",children:n.jsx("div",{className:"bg-white rounded-full h-2 transition-all duration-300",style:{width:`${P}%`}})})]}),n.jsxs("div",{className:"grid grid-cols-4 gap-4 text-center",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:t.filter(C=>C.unlocked&&C.rarity==="legendary").length}),n.jsx("div",{className:"text-yellow-100 text-sm",children:"Legendary"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:t.filter(C=>C.unlocked&&C.rarity==="epic").length}),n.jsx("div",{className:"text-yellow-100 text-sm",children:"Epic"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:t.filter(C=>C.unlocked&&C.rarity==="rare").length}),n.jsx("div",{className:"text-yellow-100 text-sm",children:"Rare"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:t.filter(C=>C.unlocked&&C.rarity==="common").length}),n.jsx("div",{className:"text-yellow-100 text-sm",children:"Common"})]})]}),n.jsxs("div",{className:"mt-4 text-center",children:[n.jsx("div",{className:"text-2xl font-bold",children:L}),n.jsx("div",{className:"text-yellow-100 text-sm",children:"Total Points"})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Categories"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:m.map(C=>{const D=C.icon;return n.jsxs("button",{onClick:()=>d(C.id),className:`px-4 py-2 rounded-lg transition-colors flex items-center space-x-2 ${o===C.id?"bg-indigo-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[n.jsx(D,{className:"w-4 h-4"}),n.jsx("span",{children:C.label})]},C.id)})})]}),b.length>0&&n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Recently Unlocked"}),n.jsx("div",{className:"space-y-3",children:b.filter(C=>C.unlockedDate).sort((C,D)=>new Date(D.unlockedDate).getTime()-new Date(C.unlockedDate).getTime()).slice(0,3).map(C=>{const D=C.icon;return n.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:`w-12 h-12 rounded-full bg-gradient-to-r ${f(C.rarity)} flex items-center justify-center`,children:n.jsx(D,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:C.title}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:C.description}),n.jsxs("div",{className:"text-xs text-yellow-600 dark:text-yellow-400 font-medium",children:[C.points," points"]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Unlocked"}),n.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:C.unlockedDate})]})]},C.id)})})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"All Achievements"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:w.map(C=>{const D=C.icon,O=C.maxProgress?C.progress/C.maxProgress*100:0;return n.jsxs("div",{className:`p-4 rounded-lg border-2 transition-all ${C.unlocked?"bg-gradient-to-br from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 border-yellow-300 dark:border-yellow-700":"bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600"} ${C.secret&&!c?"opacity-50":""}`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("div",{className:`w-12 h-12 rounded-full bg-gradient-to-r ${f(C.rarity)} flex items-center justify-center ${C.unlocked?"":"opacity-50"}`,children:n.jsx(D,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{className:"flex items-center space-x-2",children:[C.secret&&n.jsx(Yh,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"}),n.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${h(C.category)}`,children:C.category})]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("h4",{className:`font-medium ${C.unlocked?"text-gray-800 dark:text-white":"text-gray-500 dark:text-gray-400"}`,children:C.title}),n.jsx("p",{className:`text-sm ${C.unlocked?"text-gray-600 dark:text-gray-300":"text-gray-400 dark:text-gray-500"}`,children:C.description})]}),!C.unlocked&&C.maxProgress&&n.jsxs("div",{className:"mb-2",children:[n.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mb-1",children:[n.jsx("span",{children:"Progress"}),n.jsxs("span",{children:[C.progress,"/",C.maxProgress]})]}),n.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:n.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${O}%`}})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${C.rarity==="legendary"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":C.rarity==="epic"?"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400":C.rarity==="rare"?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}`,children:C.rarity.charAt(0).toUpperCase()+C.rarity.slice(1)}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[C.points," pts"]}),C.unlocked&&n.jsxs("div",{className:"text-xs text-green-600 dark:text-green-400 font-medium flex items-center",children:[n.jsx(Qh,{className:"w-3 h-3 mr-1"}),"Unlocked"]})]})]})]},C.id)})})]})]})},jy=()=>{var F;const{user:e,signOut:t}=at(),[r,s]=T.useState(!1),[a,i]=T.useState(!1),[l,o]=T.useState(!1),[d,c]=T.useState(""),[u,m]=T.useState(!1),[x,v]=T.useState(!1),[k,y]=T.useState({totalStudyHours:0,totalPrayersCompleted:0,totalQuranPages:0,streakDays:0,achievementsUnlocked:0,attendanceRate:0,totalSleepHours:0,averageSleepQuality:0,totalHabitsCompleted:0,totalExams:0,memberSince:"",lastActive:""}),[E,g]=T.useState([]),[f,h]=T.useState({name:((F=e==null?void 0:e.user_metadata)==null?void 0:F.full_name)||"",email:(e==null?void 0:e.email)||"",joinDate:"2024-01-01",university:"",major:"",year:"1st",location:"",timezone:"UTC+2",dailyStudyGoal:6,sleepGoal:8,weeklyQuranGoal:14,phone:"",website:"",bio:""});T.useEffect(()=>{e&&(w(),b(),S())},[e]);const w=async()=>{var U;if(!e)return;const{data:j}=await R.from("profiles").select("*").eq("user_id",e.id).single();j&&h({name:j.full_name||"",email:j.email||"",joinDate:((U=j.created_at)==null?void 0:U.split("T")[0])||"2024-01-01",university:j.university||"",major:j.major||"",year:j.year||"Senior",location:j.location||"",timezone:j.timezone||"UTC+2",dailyStudyGoal:j.daily_study_goal||6,sleepGoal:j.sleep_goal||8,weeklyQuranGoal:j.weekly_quran_goal||14,phone:j.phone||"",website:j.website||"",bio:j.bio||""})},b=async()=>{if(e)try{const{data:j}=await R.from("study_sessions").select("*").eq("user_id",e.id),{data:U}=await R.from("prayer_records").select("*").eq("user_id",e.id),{data:G}=await R.from("quran_sessions").select("*").eq("user_id",e.id),{data:_}=await R.from("attendance_records").select("*").eq("user_id",e.id),{data:M}=await R.from("sleep_records").select("*").eq("user_id",e.id),{data:A}=await R.from("habit_records").select("*").eq("user_id",e.id),{data:H}=await R.from("exams").select("*").eq("user_id",e.id),B=(j==null?void 0:j.reduce((ne,fe)=>ne+(fe.duration||0),0))||0,K=(U==null?void 0:U.length)||0,Y=(G==null?void 0:G.reduce((ne,fe)=>ne+(fe.pages_read||0),0))||0,ve=(M==null?void 0:M.reduce((ne,fe)=>ne+(fe.duration||0),0))||0,p=(M==null?void 0:M.length)>0?M.reduce((ne,fe)=>ne+(fe.quality||0),0)/M.length:0,N=(A==null?void 0:A.length)||0,I=(H==null?void 0:H.length)||0,z=(_==null?void 0:_.filter(ne=>ne.status==="present").length)||0,W=(_==null?void 0:_.length)||0,X=W>0?Math.round(z/W*100):0,Z=Math.min(30,Math.floor((Date.now()-new Date("2024-01-01").getTime())/(1e3*60*60*24))),V=Math.min(8,Math.floor(B/10)+Math.floor(K/10));y({totalStudyHours:Math.round(B*10)/10,totalPrayersCompleted:K,totalQuranPages:Y,streakDays:Z,achievementsUnlocked:V,attendanceRate:X,totalSleepHours:Math.round(ve*10)/10,averageSleepQuality:Math.round(p*10)/10,totalHabitsCompleted:N,totalExams:I,memberSince:f.joinDate,lastActive:new Date().toISOString().split("T")[0]})}catch(j){console.error("Error loading user stats:",j)}},S=async()=>{if(e)try{const j=[],{data:U}=await R.from("study_sessions").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(5);U==null||U.forEach(M=>{j.push({id:M.id,type:"study",description:`Studied ${M.subject} for ${M.duration}h`,time:new Date(M.created_at).toLocaleDateString(),value:`${M.duration}h`})});const{data:G}=await R.from("prayer_records").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(5);G==null||G.forEach(M=>{j.push({id:M.id,type:"prayer",description:`Completed ${M.prayer_name}`,time:new Date(M.created_at).toLocaleDateString(),value:M.prayer_name})});const{data:_}=await R.from("quran_sessions").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(5);_==null||_.forEach(M=>{j.push({id:M.id,type:"quran",description:`Read ${M.pages_read} pages of Quran`,time:new Date(M.created_at).toLocaleDateString(),value:`${M.pages_read} pages`})}),j.sort((M,A)=>new Date(A.time).getTime()-new Date(M.time).getTime()),g(j.slice(0,10))}catch(j){console.error("Error loading recent activities:",j)}},P=async()=>{if(e){v(!0);try{const{error:j}=await R.from("profiles").upsert({user_id:e.id,full_name:f.name,email:f.email,university:f.university,major:f.major,year:f.year,location:f.location,timezone:f.timezone,daily_study_goal:f.dailyStudyGoal,sleep_goal:f.sleepGoal,weekly_quran_goal:f.weeklyQuranGoal,phone:f.phone,website:f.website,bio:f.bio,updated_at:new Date().toISOString()});j||(o(!1),await w())}catch(j){console.error("Error saving profile:",j)}finally{v(!1)}}},L=async()=>{if(!(!e||d!=="RESET")){m(!0);try{await Promise.all([R.from("study_sessions").delete().eq("user_id",e.id),R.from("prayer_records").delete().eq("user_id",e.id),R.from("quran_sessions").delete().eq("user_id",e.id),R.from("habit_records").delete().eq("user_id",e.id),R.from("class_schedules").delete().eq("user_id",e.id),R.from("attendance_records").delete().eq("user_id",e.id),R.from("sleep_records").delete().eq("user_id",e.id),R.from("exams").delete().eq("user_id",e.id)]),s(!1),c(""),await b(),await S(),alert("All data has been reset successfully!")}catch(j){console.error("Error resetting data:",j),alert("Error resetting data. Please try again.")}finally{m(!1)}}},C=async()=>{if(!(!e||d!=="DELETE FOREVER")){m(!0);try{await Promise.all([R.from("study_sessions").delete().eq("user_id",e.id),R.from("prayer_records").delete().eq("user_id",e.id),R.from("quran_sessions").delete().eq("user_id",e.id),R.from("habit_records").delete().eq("user_id",e.id),R.from("class_schedules").delete().eq("user_id",e.id),R.from("attendance_records").delete().eq("user_id",e.id),R.from("sleep_records").delete().eq("user_id",e.id),R.from("exams").delete().eq("user_id",e.id),R.from("profiles").delete().eq("user_id",e.id)]),await t()}catch(j){console.error("Error deleting account:",j),alert("Error deleting account. Please try again.")}finally{m(!1)}}},D=async()=>{if(e)try{const j={profile:f,stats:k,activities:E,exportDate:new Date().toISOString()},U=new Blob([JSON.stringify(j,null,2)],{type:"application/json"}),G=URL.createObjectURL(U),_=document.createElement("a");_.href=G,_.download=`user-data-${e.id}-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(G)}catch(j){console.error("Error exporting data:",j),alert("Error exporting data. Please try again.")}},O=j=>{switch(j){case"study":return n.jsx(De,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"});case"prayer":return n.jsx(Et,{className:"w-4 h-4 text-green-600 dark:text-green-400"});case"quran":return n.jsx(De,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"});case"habit":return n.jsx(gt,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"});case"attendance":return n.jsx(At,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"});case"sleep":return n.jsx(Xe,{className:"w-4 h-4 text-pink-600 dark:text-pink-400"});case"achievement":return n.jsx(en,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400"});default:return n.jsx(gt,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Profile"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("button",{onClick:D,className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[n.jsx(Xx,{className:"w-4 h-4"}),n.jsx("span",{children:"Export Data"})]}),n.jsxs("button",{onClick:()=>o(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[n.jsx(Co,{className:"w-4 h-4"}),n.jsx("span",{children:"Edit Profile"})]})]})]}),n.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 dark:from-blue-600 dark:to-purple-700 rounded-xl p-6 text-white shadow-lg",children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"w-20 h-20 bg-white bg-opacity-20 rounded-full flex items-center justify-center shadow-inner",children:n.jsx(At,{className:"w-10 h-10"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h2",{className:"text-2xl font-bold",children:f.name}),n.jsx("p",{className:"text-blue-100",children:f.email}),n.jsxs("p",{className:"text-blue-100",children:[f.major,"  ",f.year]}),n.jsx("p",{className:"text-blue-100",children:f.university}),f.bio&&n.jsxs("p",{className:"text-blue-100 mt-2 italic",children:['"',f.bio,'"']})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-sm text-blue-100",children:"Member since"}),n.jsx("div",{className:"font-medium",children:new Date(f.joinDate).toLocaleDateString()}),n.jsx("div",{className:"text-sm text-blue-100 mt-2",children:"Last active"}),n.jsx("div",{className:"font-medium",children:k.lastActive})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Study Progress"}),n.jsx(hn,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Total hours"}),n.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[k.totalStudyHours,"h"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Daily goal"}),n.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[f.dailyStudyGoal,"h"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Current streak"}),n.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[k.streakDays," days"]})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Spiritual Progress"}),n.jsx(Et,{className:"w-5 h-5 text-green-600 dark:text-green-400"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Prayers completed"}),n.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:k.totalPrayersCompleted})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Quran pages read"}),n.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:k.totalQuranPages})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Weekly Quran goal"}),n.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[f.weeklyQuranGoal," pages"]})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Health & Habits"}),n.jsx(gt,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Sleep hours"}),n.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[k.totalSleepHours,"h"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Sleep quality"}),n.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[k.averageSleepQuality,"/5"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Habits completed"}),n.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:k.totalHabitsCompleted})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Achievements"}),n.jsx(en,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Unlocked"}),n.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[k.achievementsUnlocked,"/8"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Attendance rate"}),n.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[k.attendanceRate,"%"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Total exams"}),n.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:k.totalExams})]})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Data Management"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(oy,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Reset All Data"}),n.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Clear all tracking data but keep your account"})]})]}),n.jsx("button",{onClick:()=>s(!0),className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg transition-colors",children:"Reset Data"})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(To,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Delete Account"}),n.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Permanently delete your account and all data"})]})]}),n.jsx("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:"Delete Account"})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Recent Activity"}),n.jsx("div",{className:"space-y-3",children:E.length>0?E.map((j,U)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-8 h-8 bg-white dark:bg-gray-600 rounded-full flex items-center justify-center shadow-sm",children:O(j.type)}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:j.description}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:j.time})]})]}),j.value&&n.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 font-medium",children:j.value})]},j.id||U)):n.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[n.jsx("p",{children:"No recent activity"}),n.jsx("p",{className:"text-sm mt-1",children:"Start using the app to see your activity here"})]})})]}),l&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-2xl mx-4 max-h-[80vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Edit Profile"}),n.jsx("button",{onClick:()=>o(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:n.jsx(Ne,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Full Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:f.name,onChange:j=>h({...f,name:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Email ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",value:f.email,onChange:j=>h({...f,email:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"University"}),n.jsx("input",{type:"text",value:f.university,onChange:j=>h({...f,university:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Major"}),n.jsx("input",{type:"text",value:f.major,onChange:j=>h({...f,major:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Academic Year"}),n.jsxs("select",{value:f.year,onChange:j=>h({...f,year:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",children:[n.jsx("option",{value:"1st",children:"1st Year"}),n.jsx("option",{value:"2nd",children:"2nd Year"}),n.jsx("option",{value:"3rd",children:"3rd Year"}),n.jsx("option",{value:"4th",children:"4th Year"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Location"}),n.jsx("input",{type:"text",value:f.location,onChange:j=>h({...f,location:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Phone"}),n.jsx("input",{type:"tel",value:f.phone,onChange:j=>h({...f,phone:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Website"}),n.jsx("input",{type:"url",value:f.website,onChange:j=>h({...f,website:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Daily Study Goal (hours)"}),n.jsx("input",{type:"number",value:f.dailyStudyGoal,onChange:j=>h({...f,dailyStudyGoal:Number(j.target.value)}),min:"1",max:"24",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sleep Goal (hours)"}),n.jsx("input",{type:"number",value:f.sleepGoal,onChange:j=>h({...f,sleepGoal:Number(j.target.value)}),min:"6",max:"12",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Weekly Quran Goal (pages)"}),n.jsx("input",{type:"number",value:f.weeklyQuranGoal,onChange:j=>h({...f,weeklyQuranGoal:Number(j.target.value)}),min:"1",max:"100",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Bio"}),n.jsx("textarea",{value:f.bio,onChange:j=>h({...f,bio:j.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"Tell us about yourself..."})]})]}),n.jsxs("div",{className:"flex space-x-3 mt-6",children:[n.jsx("button",{onClick:P,disabled:x||!f.name||!f.email,className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg transition-colors flex items-center justify-center space-x-2",children:x?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),n.jsx("span",{children:"Saving..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(Xh,{className:"w-4 h-4"}),n.jsx("span",{children:"Save Changes"})]})}),n.jsx("button",{onClick:()=>o(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})}),r&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[n.jsx(Nl,{className:"w-6 h-6 text-yellow-600"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Reset All Data"})]}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"This will permanently delete all your tracking data including study sessions, prayers, habits, and more. Your account will remain active."}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:'Type "RESET" to confirm:'}),n.jsx("input",{type:"text",value:d,onChange:j=>c(j.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"Type RESET"})]}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{onClick:()=>{s(!1),c("")},className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),n.jsx("button",{onClick:L,disabled:d!=="RESET"||u,className:"flex-1 px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Resetting...":"Reset Data"})]})]})}),a&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[n.jsx(Nl,{className:"w-6 h-6 text-red-600"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Delete Account"})]}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"This will permanently delete your account and all associated data. This action cannot be undone."}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:'Type "DELETE FOREVER" to confirm:'}),n.jsx("input",{type:"text",value:d,onChange:j=>c(j.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"Type DELETE FOREVER"})]}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{onClick:()=>{i(!1),c("")},className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),n.jsx("button",{onClick:C,disabled:d!=="DELETE FOREVER"||u,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Deleting...":"Delete Account"})]})]})})]})},Ny=()=>{const{user:e,loading:t}=at(),[r,s]=T.useState("dashboard");if(t)return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-900 via-teal-900 to-cyan-900 flex items-center justify-center",children:n.jsx("div",{className:"text-white text-xl",children:"Loading..."})});if(!e)return n.jsx(hy,{});const a=()=>{switch(r){case"dashboard":return n.jsx(ic,{setActiveTab:s});case"study":return n.jsx(my,{});case"prayer":return n.jsx(xy,{});case"quran":return n.jsx(yy,{});case"habits":return n.jsx(py,{});case"exam":return n.jsx(vy,{});case"routine":case"attendance":return n.jsx(wy,{});case"sleep":return n.jsx(by,{});case"achievements":return n.jsx(ky,{});case"profile":return n.jsx(jy,{});default:return n.jsx(ic,{setActiveTab:s})}};return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-emerald-50 dark:from-gray-900 dark:to-emerald-900",children:n.jsxs("div",{className:"flex",children:[n.jsx(gy,{activeTab:r,setActiveTab:s}),n.jsx("main",{className:"flex-1 ml-64",children:n.jsx("div",{className:"p-6",children:a()})})]})})};function _y(){return n.jsx(Qx,{children:n.jsx(Gx,{children:n.jsx(Ny,{})})})}wh(document.getElementById("root")).render(n.jsx(T.StrictMode,{children:n.jsx(_y,{})}));
